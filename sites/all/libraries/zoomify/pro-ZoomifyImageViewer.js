/*

 Zoomify Image Viewer v2.3, Copyright Zoomify, Inc., 1999-2014. All rights reserved.

You may use this file on private and public websites, for personal and commercial purposes, with

or without modifications, so long as this notice is included. Redistribution via other means is not

permitted without prior permission. Additional terms apply. For complete license terms please see

the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

*/

(function(){(function(){return this}).call().Z={}})();

Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){-1==Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,

"callbackFunction",b)&&(Z.callbacks[Z.callbacks.length]={callbackEvent:a,callbackFunction:b})},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.getReady=function(){var a=!0;Z.Viewport&&!Z.Viewport.z542()&&(a=!1);Z.annotations&&!Z.Viewport.z542AnnotationPanel&&(a=!1);!Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.z542()||(a=!1);!Z.NavigatorVisible||Z.Navigator&&Z.Navigator.z542()||

(a=!1);!Z.RulerVisible||Z.Ruler&&Z.Ruler.z542()||(a=!1);if(!a)window.setTimeout(Z.getReady,100);else if("function"===typeof Z.onReady)Z.onReady()},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};

Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Utils.isStrVal(Z.copyrightPath)?Z.Utils.enforceCopyright():Z.Viewer.configureViewer();0!=Z.debug&&Z.Utils.trace(Z.Utils.getResource("z445"))};

Z.ZoomifyImageViewer=function(){Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);var a=Z.Utils.getElementStyle(Z.pageContainer);Z.viewerW=parseFloat(a.width);Z.viewerH=parseFloat(a.height);-1!=a.width.indexOf("%")&&(Z.viewerW=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"width")));-1!=

a.height.indexOf("%")&&(Z.viewerH=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"height")));isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth);isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight);if(0==Z.viewerW||0==Z.viewerH)winDimensions=Z.Utils.getWindowSize(),0==Z.viewerW&&(Z.pageContainer.parentNode.style.width=winDimensions.x+"px",Z.viewerW=Z.pageContainer.clientWidth),0==Z.viewerH&&(Z.pageContainer.parentNode.style.height=winDimensions.y+"px",Z.viewerH=Z.pageContainer.clientHeight);

Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);this.configureViewer=function(){Z.Viewport=new Z.ZoomifyViewport};this.configureComponents=function(){0<Z.toolbarVisible&&(Z.Toolbar=new Z.ZoomifyToolbar(Z.Viewport));0<Z.navigatorVisible&&(Z.Navigator=new Z.ZoomifyNavigator(Z.Viewport));Z.Navigator&&Z.Navigator.z689();Z.rulerVisible&&(Z.Ruler=new Z.ZoomifyRuler(Z.Viewport))};this.setSizeAndPosition=function(a,c,e,f,h){Z.viewerW=a;Z.viewerH=c;Z.ViewerDisplay.style.width=a+"px";

Z.ViewerDisplay.style.height=c+"px";Z.Viewport&&Z.Viewport.z542()&&Z.Viewport.setSizeAndPosition(a,c,e,f);c=1==Z.toolbarPosition?c-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.z542()&&(Z.Toolbar.setSizeAndPosition(a,null,null,c),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.z542()&&(Z.Navigator.setSizeAndPosition(null,null,e,f,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));h&&Z.Viewport.updateView(!0)};this.setImageWithFade=function(a,c,e){Z.Viewport&&

(Z.Viewport.z542()||e)&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",a,c,e)},50))};this.setImage=function(a,c,e,f){Z.Viewport&&(Z.Viewport.z542()||f)&&(Z.Viewport.zoomAndPanAllStop(!0),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.Utils.validateImagePath(),"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),f&&Z.Utils.setParameters(Z.parameters),e||(Z.imageProperties?(a=Z.Utils.xmlConvertTextToDoc(imageProperties),

Z.Viewport.z607(a)):(a=new Z.NetConnector,Z.Viewport.loadImageProperties(a))))};this.setTourPath=function(a,c){Z.Viewport&&Z.Viewport.z542()&&Z.Viewport.setHotspotPath(a,c)};this.setHotspotPath=function(a,c){Z.Viewport&&Z.Viewport.z542()&&Z.Viewport.setHotspotPath(a,c)};this.setAnnotationPath=function(a,c){Z.Viewport&&Z.Viewport.z542()&&Z.Viewport.setAnnotationPath(a,c)};this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",function(a){var c="";null!==Z.editing&&

Z.Viewport.verifyEditsUnsaved()?c="You have unsaved edits. Return to page to save edits?":Z.editing=null;return(a||window.event).returnValue=c})}};

Z.ZoomifyViewport=function(){function a(d){d=Z.Utils.getResource("z209");".xml"!=Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slidePath=Z.slidePath+"/"+d);XMLPath=Z.Utils.cacheProofPath(Z.slidePath);"undefined"!==typeof XMLPath&&Z.Utils.isStrVal(XMLPath)&&(d=new Z.NetConnector,d.loadXML(XMLPath))}function b(d,a,b,n,v,c,e,O,m,f,h){Z.imageW=d;Z.imageH=a;jd=c;kd=e;gc=O;hc=v;Aa=b;Fa=n;null!==m&&null!==f&&null!==h&&(Z.sourceMagnification=m,Z.focal=f,Z.quality=h);r();

l.validateXYZDefaults();Lb=g(za,Z.initialZ);kb=ia=g(na,Z.initialZ);Z.useCanvas&&Ma.scale(ia,ia);Ga&&Bd();la&&vd();Z.virtualPointerVisible&&Cd();u();Gc(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);Z.initialFullPage&&l.toggleFullViewMode(!0);Z.Utils.addEventListener(document,"keydown",Bb);Z.Utils.addEventListener(document,"keyup",Bb);Z.mobileDevice?(Z.Utils.addEventListener(ea,"touchstart",sa),Z.Utils.addEventListener(ea,"touchmove",sa),Z.Utils.addEventListener(ea,"touchend",sa),Z.Utils.addEventListener(ea,

"touchcancel",sa),Z.Utils.addEventListener(ea,"gesturestart",sa),Z.Utils.addEventListener(ea,"gesturechange",sa),Z.Utils.addEventListener(ea,"gestureend",sa),document.getElementsByTagName("body")[0].onorientationchange=ce):(Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",sa),Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",sa),Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault),Z.Utils.addEventListener(ea,"mousedown",sa),Z.Utils.addEventListener(ea,"mousemove",Z.Utils.preventDefault),

Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",sa),Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault),Z.coordinatesVisible&&l.setCoordinatesDisplayVisibility(!0));Z.Utils.addEventListener(aa,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(ga,"contextmenu",Z.Utils.preventDefault);Ga&&Z.Utils.addEventListener(Ga,"contextmenu",Z.Utils.preventDefault);la&&Z.Utils.addEventListener(la,"contextmenu",Z.Utils.preventDefault);p(!0);Z.Viewer.configureComponents();

Z.slideshow&&(d=Z.Utils.isStrVal(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,"undefined"!==typeof lb&&(lb.selectedIndex=d),df&&!Z.slideshowPlaying?l.slideshowStart():Z.slideshowPlaying&&l.nextSlide())}function c(d,a,b,n,v,c,e,O,m,f,h){p(!1);Ga&&("undefined"!==typeof Kf&&Z.Utils.arrayClear(Kf),"undefined"!==typeof Lf&&Z.Utils.arrayClear(Lf));la&&("undefined"!==typeof t&&Z.Utils.arrayClear(t),"undefined"!==typeof mb&&Z.Utils.arrayClear(mb),null!=ka?"undefined"!==typeof Mb&&Z.Utils.arrayClear(Mb):

("undefined"!==typeof X&&Z.Utils.arrayClear(X),"undefined"!==typeof da&&Z.Utils.arrayClear(da),"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba),"undefined"!==typeof pa&&Z.Utils.arrayClear(pa),"undefined"!==typeof nb&&Z.Utils.arrayClear(nb)));za=na=0;Tb=!1;ic=Qc=0;"undefined"!==typeof Rc&&Z.Utils.arrayClear(Rc);"undefined"!==typeof $a&&Z.Utils.arrayClear($a);"undefined"!==typeof Cb&&Z.Utils.arrayClear(Cb);"undefined"!==typeof qa&&Z.Utils.arrayClear(qa);"undefined"!==typeof ob&&Z.Utils.arrayClear(ob);

"undefined"!==typeof ab&&Z.Utils.arrayClear(ab);"undefined"!==typeof Mf&&Z.Utils.arrayClear(Mf);"undefined"!==typeof cc&&Z.Utils.arrayClear(cc);"undefined"!==typeof Hc&&Z.Utils.arrayClear(Hc);"undefined"!==typeof Ca&&Z.Utils.arrayClear(Ca);"undefined"!==typeof Ra&&Z.Utils.arrayClear(Ra);"undefined"!==typeof bb&&Z.Utils.arrayClear(bb);Z.imageW=d;Z.imageH=a;jd=c;kd=e;gc=O;hc=v;Aa=b;Fa=n;r();Z.Utils.setParameters(Z.parameters);l.validateXYZDefaults();Lb=g(za,Z.initialZ);kb=ia=g(na,Z.initialZ);Z.useCanvas&&

(Ma.restore(),Ma.scale(ia,ia));aa&&Z.Utils.clearDisplay(aa);ga&&Z.Utils.clearDisplay(ga);pb&&Z.Utils.clearDisplay(pb);Ga&&Z.Utils.clearDisplay(Ga);la&&Z.Utils.clearDisplay(la);Sa&&Z.Utils.clearDisplay(Sa);ya&&Z.Utils.clearDisplay(ya);Db&&Z.Utils.clearDisplay(Db);sc&&Z.Utils.clearDisplay(sc);Ga&&Bd();la&&vd();Z.virtualPointerVisible&&Cd();u();l.setSizeAndPosition(ub,fb,ef,de);Gc(Z.initialX,Z.initialY,Z.initialZ);p(!0);Z.Navigator&&0<Z.navigatorVisible&&Z.Navigator.setImage(Z.imagePath);Z.slideshowPlaying&&

l.nextSlide()}function e(){qb=1;"undefined"!==typeof vb&&Z.Utils.arrayClear(vb);"undefined"!==typeof Nb&&Z.Utils.arrayClear(Nb);"undefined"!==typeof gb&&Z.Utils.arrayClear(gb);"undefined"!==typeof Ub&&Z.Utils.arrayClear(Ub);"undefined"!==typeof Ob&&Z.Utils.arrayClear(Ob);"undefined"!==typeof tc&&Z.Utils.arrayClear(tc);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==

typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof Sc&&Z.Utils.arrayClear(Sc);"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast);"undefined"!==typeof wb&&Z.Utils.arrayClear(wb);"undefined"!==typeof Je&&Z.Utils.arrayClear(Je)}function f(d,a,b,n){if("undefined"===

typeof b||null===b)b=0;if("undefined"===typeof n||null===n)n=0;Z.viewerW=ub=d;Z.viewerH=fb=a;Ha=ub*Nf;Da=fb*Nf;Vb=Ha/2;Na=Da/2;Eb=-((Ha-ub)/2)+b;xb=-((Da-fb)/2)+n;ea.width=Ha;ea.height=Da;T.width=Ha+"px";T.height=Da+"px";T.left=Eb+"px";T.top=xb+"px";ga.width=Ha;ga.height=Da;Ia.width=Ha+"px";Ia.height=Da+"px";Ga&&(Ga.width=Ha,Ga.height=Da,qd.width=Ha+"px",qd.height=Da+"px");la&&(la.width=Ha,la.height=Da,Wb.width=Ha+"px",Wb.height=Da+"px",ff&&(d=parseInt(Z.Utils.getResource("z133"),10),d=uc(gf,d,ub,

fb),hf.left=d.x+"px",hf.top=d.y+"px"));Sa&&(Sa.width=Ha,Sa.height=Da,dc.width=Ha+"px",dc.height=Da+"px");ya&&(ya.width=Ha,ya.height=Da,Pb.width=Ha+"px",Pb.height=Da+"px");jf&&(d=new l.calculateAnnotationPanelDimensions(yd,Fb,zd),a=l.calculateAnnotationPanelCoords(Ke,d.w,d.h,ub,fb),l.sizeAndPositionAnnotationPanel(ee,d.w,d.h,a.x,a.y));Z.useCanvas&&(Ma.translate(Vb,Na),Ma.save(),Sa&&(Le.translate(Vb,Na),Le.save()),ya&&(ta.translate(Vb,Na),ta.save()))}function h(d){if("ZoomifyImageFile"==Z.tileSource){var a=

parseFloat(Z.Utils.getResource("z125")),b=parseFloat(Z.Utils.getResource("z124"));d.loadByteRange(Z.imagePath,a,b,"header")}else if("ZoomifyImageFolder"==Z.tileSource)a=Z.Utils.cacheProofPath(Z.imagePath+"/ImageProperties.xml"),d.loadXML(a);else if("ZoomifyPFFFile"==Z.tileSource){var a=Z.Utils.getResource("z125"),b=Z.Utils.getResource("z123"),n=Z.imagePath.replace(".","%2E");d.loadXML(Z.tileHandlerPathFull+"?file="+n+"&requestType=1&begin="+a+"&end="+b)}}function k(d,a){e();if("undefined"===typeof l.z542)window.setTimeout(function(){k(d,

a)},100);else{var xd=null,n=null,v=null,Za=null,ud=null,O=null,m=null,g=null,f=null,h=null,G=null;"ZoomifyImageFolder"==Z.tileSource?(xd=parseInt(d.documentElement.getAttribute("WIDTH"),10),n=parseInt(d.documentElement.getAttribute("HEIGHT"),10),ud=parseInt(d.documentElement.getAttribute("NUMTILES"),10),parseInt(d.documentElement.getAttribute("NUMIMAGES"),10),O=parseInt(d.documentElement.getAttribute("VERSION"),10),v=Za=parseInt(d.documentElement.getAttribute("TILESIZE"),10)):"ZoomifyPFFFile"==Z.tileSource?

(xd=parseInt(d.documentElement.getAttribute("WIDTH"),10),n=parseInt(d.documentElement.getAttribute("HEIGHT"),10),v=Za=parseInt(d.documentElement.getAttribute("TILESIZE"),10),ud=parseInt(d.documentElement.getAttribute("NUMTILES"),10),parseInt(d.documentElement.getAttribute("NUMIMAGES"),10),O=parseInt(d.documentElement.getAttribute("VERSION"),10),m=parseInt(d.documentElement.getAttribute("HEADERSIZE"),10),g=1060+m):"ImageServer"==Z.tileSource&&(xd=parseInt(d.documentElement.getAttribute("WIDTH"),10),

n=parseInt(d.documentElement.getAttribute("HEIGHT"),10),Za=d.documentElement.getAttribute("TILESIZE"),v=Z.Utils.isStrVal(Za)?parseInt(Za,10):Aa,Za=Z.Utils.isStrVal(Za)?parseInt(Za,10):Fa,f=d.documentElement.getAttribute("MAGNIFICATION"),f=Z.Utils.isStrVal(f)?parseInt(f,10):Z.sourceMagnification,h=d.documentElement.getAttribute("FOCAL"),h=Z.Utils.isStrVal(h)?parseInt(h,10):Z.focal,G=d.documentElement.getAttribute("QUALITY"),G=Z.Utils.isStrVal(G)?parseInt(G,10):Z.quality);null!==Z.tileW&&(v=Z.tileW);

null!==Z.tileH&&(Za=Z.tileH);if("ZoomifyImageFolder"==Z.tileSource||"ImageServer"==Z.tileSource){if(null===v||isNaN(v))v=Aa;if(null===Za||isNaN(Za))Za=Fa;if(null===ud||isNaN(ud))ud=1}!isNaN(xd)&&0<xd&&!isNaN(n)&&0<n&&!isNaN(v)&&0<v&&!isNaN(Za)&&0<Za&&0<ud?l.z542()?c(xd,n,v,Za,ud,O,m,g,f,h,G,a):b(xd,n,v,Za,ud,O,m,g,f,h,G,a):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function r(){var d;if("ZoomifyImageFile"==

Z.tileSource)for(d=qb-1;0<=d;d--)gb[d]=Math.ceil(vb[d]/Aa),Ub[d]=Math.ceil(Nb[d]/Fa),Ob[d]=gb[d]*Ub[d];else{d=Z.imageW;for(var a=Z.imageH;d>Aa||a>Fa;)d/=2,a/=2,qb++;d=Z.imageW;for(var a=Z.imageH,b=0,n=qb-1;0<=n;n--)vb[n]=d,Nb[n]=a,gb[n]=Math.ceil(vb[n]/Aa),Ub[n]=Math.ceil(Nb[n]/Fa),Ob[n]=gb[n]*Ub[n],d/=2,a/=2,b+=Ob[n];if(b!=hc&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){vb=[];Nb=[];gb=[];Ub=[];qb=0;d=Z.imageW;a=Z.imageH;qb=1;for(b=2;d>Aa||

a>Fa;)d=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,d%2&&d++,a%2&&a++,qb++;d=Z.imageW;a=Z.imageH;b=2;tileCounter=0;for(n=qb-1;0<=n;n--)gb[n]=Math.floor(d/Aa),d%Aa&&gb[n]++,Ub[n]=Math.floor(a/Fa),a%Fa&&Ub[n]++,Ob[n]=gb[n]*Ub[n],tileCounter+=Ob[n],vb[n]=d,Nb[n]=a,d=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,d%2&&d++,a%2&&a++;d=tileCounter;d!=hc&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}}function p(d){jc=d;Z.Utils.validateCallback("viewportInitialized");Z.Viewport&&Z.Viewport.z542()&&

Z.Toolbar&&Z.Toolbar.z542()&&Z.Navigator&&Z.Navigator.z542()&&Z.Utils.validateCallback("viewerInitialized")}function u(){E(Of);qb>Pf&&(E(Qf),qb>Rf&&E(Sf));$a.sort();$a=Z.Utils.arrayUnique($a);W($a,ma,"simple","image-backfill")}function E(d){for(var a=gb[d]-1,b=Ub[d]-1,n=0;n<=b;n++)for(var v=0;v<=a;v++)$a[$a.length]=d+"-"+v+"-"+n}function s(d){if(d){d=oa(za);Z.Utils.arrayClear($a);a=d.t;for(b=d.b;a<=b;a++)for(n=d.l,v=d.r;n<=v;n++)$a[$a.length]=za+"-"+n+"-"+a;$a.sort();$a=Z.Utils.arrayUnique($a);W($a,

ma,"simple","image-backfill")}else{d=oa();Z.Utils.arrayClear(qa);for(var a=d.t,b=d.b;a<=b;a++)for(var n=d.l,v=d.r;n<=v;n++)qa[qa.length]=na+"-"+n+"-"+a;ab.sort();qa.sort();ab=Z.Utils.arrayUnique(ab);qa=Z.Utils.arrayUnique(qa);2==Z.debug&&Z.Utils.trace("Tiles required: "+qa.join(", "));d=Z.Utils.arrayIntersect(qa,ab);qa=Z.Utils.arraySubtract(qa,ab);Qc=ic=qa.length;Z.updateViewPercent=l.updateViewValidate(Qc,ic);Z.ToolbarDisplay&&Z.Toolbar.z542()&&Z.Toolbar.updateProgress(Qc,ic);ab=Z.Utils.arraySubtract(ab,

d);ab=ab.concat(d);if(0!=ic){d=0;for(a=Cb.length;d<a;d++)Cb[d].alpha=1;Z.Utils.arrayClear(Cb)}}}function C(d,a,b,n,v,c){if(0<b.length){var e=oa();v||Z.Utils.clearDisplay(d);if("canvasCopy"==n)Z.Utils.clearDisplay(ga),Ma.restore(),Ma.save(),Ma.scale(1,1),Ma.drawImage(pb,-Vb,-Na),Ma.restore(),Ma.save(),Ma.scale(ia,ia);else if("centerOut"==n)for(n=Math.floor(b.length/2),v=b.length;n<v;n++){var O=b[n];O&&O.t==a&&(a==za||O.c>=e.l&&O.c<=e.r&&O.r>=e.t&&O.r<=e.b)&&A(d,a,O);b.length-n-1!=n&&(O=b[b.length-

n-1])&&O.t==a&&(a==za||O.c>=e.l&&O.c<=e.r&&O.r>=e.t&&O.r<=e.b)&&A(d,a,O)}else for(n=0,v=b.length;n<v;n++)(O=b[n])&&O.t==a&&(a==za||O.c>=e.l&&O.c<=e.r&&O.r>=e.t&&O.r<=e.b)&&A(d,a,O);if(2==Z.debug&&"viewportDisplay"==d.id){Z.Utils.arrayClear(cc);n=0;for(v=b.length;n<v;n++)O&&b[n].t==a&&(a==za||b[n].c>=e.l&&b[n].c<=e.r&&b[n].r>=e.t&&b[n].r<=e.b)&&(cc[cc.length]=b[n].name);0<cc.length&&(cc.sort(),cc=Z.Utils.arrayUnique(cc));d=0<cc.length?cc.join(", "):"No cached tiles to redisplay";Z.Utils.trace("Tiles redisplaying - "+

c+": "+d)}}}function J(d,a){var b=oa();syncTransitionCanvas();for(var n=0,v=a.length;n<v;n++){var c=a[n];c&&c.t==d&&(d==za||c.c>=b.l&&c.c<=b.r&&c.r>=b.t&&c.r<=b.b)&&A(pb,d,c)}}function W(d,a,b,n){var v="undefined"!==typeof n&&null!==n?" - "+n+": ":": ";2==Z.debug&&" - backfill: "!=v&&Z.Utils.trace("Tiles to be loaded"+v+d.join(", "));if(0==d.length)2==Z.debug&&Z.Utils.trace("No new tiles loaded.");else if(v=(new Date).getTime(),"centerOut"==b){b=Math.floor(d.length/2);for(var c=d.length;b<c;b++){var e=

d[b];e&&(e=new U(e,n),H(e,v,a));d.length-b-1!=b&&(e=d[d.length-b-1])&&(e=new U(e,n),H(e,v,a))}}else for(b=0,c=d.length;b<c;b++)if(e=d[b])e=new U(e,n),H(e,v,a)}function U(d,a){this.name=d;this.t=parseInt(d.substring(0,d.indexOf("-")),10);this.c=parseInt(d.substring(d.indexOf("-")+1,d.lastIndexOf("-")),10);this.r=parseInt(d.substring(d.lastIndexOf("-")+1),10);this.x=Math.floor(this.c*Aa);this.y=Math.floor(this.r*Fa);this.image=null;this.alpha=0;this.url=l.formatTilePath(this.t,this.c,this.r,a);this.style=

this.elmt=this.loadTime=null}function Q(d,a,b){b=a+b*gb[d];a=8*b+tc[d];b=Math.floor(b/hb);var n=b*hb,n=n+hb>Ob[d]?8*(Ob[d]-n):rd;this.chunkStart=tc[d]+b*rd;this.chunkEnd=this.chunkStart+n;this.offsetStartInChunk=a-this.chunkStart;this.chunkID=d.toString()+"-"+b.toString()}function F(d,a,b){b=a+b*gb[d];a=4*b+Sc[d];b=Math.floor(b/hb);var n=b*hb,n=n+hb>Ob[d]?4*(Ob[d]-n):Ic;this.chunkStart=Sc[d]+b*Ic;this.chunkEnd=this.chunkStart+n;this.bcStartInChunk=a-this.chunkStart;this.chunkID=d.toString()+"-"+b.toString()}

function R(d,a,b){Je[d]=b;b=Z.imagePath.replace(".","%2E");d=Z.tileHandlerPathFull+"?file="+b+"&requestType=2&begin="+d+"&end="+a;(new Z.NetConnector).loadXML(d)}function S(d,a){for(var b=0,n=Ca.length;b<n;b++){var v=Ca[b].split(",");v[0]==d&&v[5]==a&&(void 0!==v[4]&&"image-display"==v[4]?Ra[Ra.length]=v[1]+"-"+v[2]+"-"+v[3]:"image-backfill"==v[4]&&(bb[bb.length]=v[1]+"-"+v[2]+"-"+v[3]),Ca=Z.Utils.arraySplice(Ca,b,1),b--,n--)}0<Ra.length&&(Ra.sort(),Ra=Z.Utils.arrayUnique(Ra),2==Z.debug&&Z.Utils.trace("Tiles being requested - offset chunk now loaded: "+

Ra.join(", ")),q(Ra,ha,"simple","image-display"));0<bb.length&&(bb.sort(),bb=Z.Utils.arrayUnique(bb),q(bb,ma,"simple","image-backfill"))}function q(d,a,b,n){b=(new Date).getTime();for(var v=0,c=d.length;v<c;v++){var e=null;if(e=d[v])if(d=Z.Utils.arraySplice(d,v,1),v--,c--,index=Z.Utils.arrayIndexOfObjectValue(Hc,"name",e),-1!=index?(e=Hc[index],Hc=Z.Utils.arraySplice(Hc,index,1),e.url=l.formatTilePath(e.t,e.c,e.r,n)):e=new U(e,n),null!=e&&-1==e.url.indexOf("NaN"))2==Z.debug&&Z.Utils.trace(e.name+

"  "+e.url+"  "+e.image),H(e,b,a);else if(-1==e.url.indexOf("NaN")){var O=parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+e.name+".jpg",!1,O,"center",!1)}}}function H(d,a,b){var n=d.name;if("z652"==d.url.substr(0,8)){0<Jc&&(ob[ob.length]=d,ab[ab.length]=d.name);a=Z.Utils.arrayIndexOf(qa,d.name);-1!=a&&(qa=Z.Utils.arraySplice(qa,a,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)a=Z.Utils.arrayIndexOf(Ra,d.name),-1!=a&&(Ra=Z.Utils.arraySplice(Ra,

a,1));Cb[Cb.length]=d}else"offsetLoading"!=d.url?(2==Z.debug&&Z.Utils.trace("Tile actually being loaded: "+n),b==ha&&(type="image-display"),b==ma&&(type="image-backfill"),d.loadTime=a,pg.loadImage(d.url,Z.Utils.createCallback(null,b,d),type,d)):"offsetLoading"==d.url&&(-1==Z.Utils.arrayIndexOfObjectValue(Hc,"name",n)&&(Hc[Hc.length]=d),2==Z.debug&&Z.Utils.trace("Tile not yet being loaded - offset chunk loading in progress: "+n))}function ha(d,a){if(d&&a){d.image=a;var b=d.name,n=Z.Utils.arrayIndexOf(qa,

b);if(-1!=n){qa=Z.Utils.arraySplice(qa,n,1);0<Jc&&(ob[ob.length]=d,ab[ab.length]=b);-1==Z.Utils.arrayIndexOf(Cb,d)&&(Cb[Cb.length]=d);2==Z.debug&&(Z.Utils.trace("Tile received: "+d.name),0==ic&&Z.Utils.trace("Tile loading complete: all requested tiles received."));Me||(Me=window.setInterval(L,50));ic=qa.length;if(0==ic){Z.useCanvas&&0<Jc&&(kf?(J(na,ob),C(ga,na,ob,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(pb)},200),kf=!1):C(ga,na,ob,

"centerOut",!1,"4. Updating view: all new tiles loaded"));Z.imageFiltersVisible&&sd&&Tc(null,null,!0);if(ab.length>Jc)for(;ab.length>Jc&&0<ob.length;)j=Z.Utils.arrayIndexOf(ab,ob[0].name),-1!=j&&(ab=Z.Utils.arraySplice(ab,j,1)),ob=Z.Utils.arraySplice(ob,0,1);Qc=0}Z.updateViewPercent=l.updateViewValidate(Qc,ic);Z.ToolbarDisplay&&Z.Toolbar.z542()&&Z.Toolbar.updateProgress(Qc,ic)}}else if("undefined"===typeof a||null===a)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+d.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+

d.name+".jpg")}function ma(d,a){if(d&&a){d.image=a;var b=d.name;Rc[Rc.length]=d;var n=Z.Utils.arrayIndexOf($a,b);-1!=n&&($a=Z.Utils.arraySplice($a,n,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)b=Z.Utils.arrayIndexOf(bb,b),-1!=b&&(bb=Z.Utils.arraySplice(bb,b,1));d.alpha=1;d.t==za&&A(aa,za,d)}else if("undefined"===typeof a||null===a)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+d.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+d.name+".jpg")}function L(d){for(var a=

d=0,b=Cb.length;a<b;a++){var n=Cb[a];n.t==na?(0!=lf&&1>n.alpha+lf?n.alpha+=lf:(n.alpha=1,d++),A(ga,na,n),d>=b&&(window.clearInterval(Me),Me=null,a=b)):(Cb=Z.Utils.arraySplice(Cb,a,1),n=Z.Utils.arrayIndexOf(qa,n.name),-1!=n&&(qa=Z.Utils.arraySplice(qa,n,1)),b--)}}function A(d,a,b){if("z652"!=b.url.substr(0,8)&&0!=b.image.width&&0!=b.image.height){var n=b.x,v=b.y;a=x(a,1);if(Z.useCanvas){if(d==ga||d==pb||d==aa&&Tb)n-=Z.imageX*a,v-=Z.imageY*a;a=d.getContext("2d");Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=

d.id&&!sd&&(a.globalAlpha=b.alpha);if(Z.imageFiltersVisible&&0!=rb.length)if(sd)"viewportDisplay"==d.id?a=yb:"viewportBackfillDisplay"==d.id?a=mf:"transitionCanvas"==d.id&&(a=yb),a.drawImage(b.image,n,v);else{var c;c=Z.Utils.getImageData(b.image);c=Uc(c);Z.Utils.clearDisplay(pb);Xb.putImageData(c,0,0);a.drawImage(pb,n,v)}else a.drawImage(b.image,n,v);Z.alphaSupported&&1>b.alpha&&"transitionCanvas"!=d.id&&(a.globalAlpha=1);2==Z.debug&&cb(d,b.name,n,v,ia)}else d==ga?(n-=Z.imageX*a-Vb/ia,v-=Z.imageY*

a-Na/ia,a=ia):a=Lb,b.elmt||(b.elmt=Z.Utils.createContainerElement("img"),b.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(b.elmt,"contextmenu",Z.Utils.preventDefault),b.elmt.src=b.url,b.style=b.elmt.style,b.style.position="absolute",Z.Utils.renderQuality(b,Z.renderQuality),Z.cssTransformsSupported&&(b.style[Z.cssTransformProperty+"Origin"]="0px 0px")),b.elmt.parentNode!=d&&d.appendChild(b.elmt),c=b.style,c.display="none",Z.cssTransformsSupported?c[Z.cssTransformProperty]=["matrix(",

(b.image.width/b.elmt.width*a).toFixed(8),",0,0,",(b.image.height/b.elmt.height*a).toFixed(8),",",(n*a).toFixed(8),Z.cssTransformNoUnits?",":"px,",(v*a).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(c.width=b.image.width*a+"px",c.height=b.image.height*a+"px",c.left=n*a+"px",c.top=v*a+"px"),c.display="inline-block",Z.Utils.setOpacity(b,b.alpha),2==Z.debug&&cb(d,b.name,n,v,a)}}function cb(d,a,b,n,v){if(Z.useCanvas){var c=parseInt(Z.Utils.getResource("z129"),10),e=parseInt(Z.Utils.getResource("z160"),

10),O=parseInt(Z.Utils.getResource("z151"),10),c=Math.round(c*v),e=2*(c<e?e:c>O?O:c);d=d.getContext("2d");d.font=e+"px verdana";d.textAlign="left";d.textBaseline="top";e=Aa*v/2;v=Fa*v/2;d.fillStyle="#FFFFFF";d.fillText(a,b+e,n+v);d.fillStyle="#000000";d.fillText(a,b+e+1,n+v+1)}else{var c=parseInt(Z.Utils.getResource("z129"),10),e=parseInt(Z.Utils.getResource("z160"),10),O=parseInt(Z.Utils.getResource("z151"),10),c=Math.round(c*v),m=2*(c<e?e:c>O?O:c),e=parseInt(Z.Utils.getResource("z130"),10)*v,O=

Z.Utils.createContainerElement("div","tileNameTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),c=document.createTextNode(a);O.appendChild(c);d.appendChild(O);Z.Utils.setTextNodeStyle(c,"white","verdana",m+"px","none","normal","normal","normal","normal","1em","center","none");var g=Z.Utils.createContainerElement("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none",

"0px",e+"px","nowrap"),f=document.createTextNode(a);g.appendChild(f);d.appendChild(g);Z.Utils.setTextNodeStyle(f,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","center","none");e=parseFloat(O.style.padding);d=parseFloat(Z.Utils.getElementStyleProperty(O,"width"));isNaN(d)&&(d=parseFloat(Z.Utils.getResource("z115")),d=parseFloat(O.style.fontSize)/d,d=Math.round(parseFloat(a.length*d)));a=Aa*v/2;m=Fa*v/2;O.style.left=b*v+(a-d/2-e)+"px";O.style.top=n*v+m+"px";g.style.left=

1+b*v+(a-d/2-e)+"px";g.style.top=1+n*v+m+"px";Z.Utils.addEventListener(O,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(c);Z.Utils.addEventListener(g,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(f)}}function oa(d,a){if("undefined"===typeof d||null===d)d=na;if("undefined"===typeof a||null===a)a=!1;return new ua(Ta(a),d)}function Ta(d){var a=parseFloat(T.left)-Eb,b=parseFloat(T.top)-xb;if(Z.useCanvas)var n=parseFloat(T.width)/ea.width,a=a/n,b=b/n;n=l.getZoom();

0!=a&&(a/=n);0!=b&&(b/=n);a=Z.imageX-a;b=Z.imageY-b;if(d){d=-(ub/2);var v=ub/2,c=-(fb/2),e=fb/2}else d=-(Ha/2),v=Ha/2,c=-(Da/2),e=Da/2;return new B(a,b,d,v,c,e,n)}function ua(d,a){var b=x(a,1),n=Math.floor(d.l*b/Aa),v=Math.floor(d.r*b/Aa),c=Math.floor(d.t*b/Fa),b=Math.floor(d.b*b/Fa);0>n&&(n=0);v>gb[a]-1&&(v=gb[a]-1);0>c&&(c=0);b>Ub[a]-1&&(b=Ub[a]-1);this.l=n;this.r=v;this.t=c;this.b=b}function B(d,a,b,n,v,c,e){this.l=d+b/e;this.r=d+n/e;this.t=a+v/e;this.b=a+c/e}function $(d,a){var b=d-Z.Utils.getElementPosition(Z.ViewerDisplay).x,

n=a-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(b,n)}function D(d,a){var b=$(d,a),n=Z.Utils.getPageScroll();return new Z.Utils.Point(b.x-Eb+n.x,b.y-xb+n.y)}function M(d,a,b,n){if("undefined"===typeof b||null===b)b=Z.imageZ;if("undefined"===typeof n||null===n)n=Z.imageR;0>n&&(n+=360);var v=parseFloat(T.left)+Vb,c=parseFloat(T.top)+Na;d-=v;a-=c;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(d,a,n),d=viewportClickPt.x,a=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+

d/b,Z.imageY+a/b)}function db(d,a,b,n){if("undefined"===typeof b||null===b)b=Z.imageZ;if("undefined"===typeof n||null===n)n=Z.imageR;0>n&&(n+=360);d=(Z.imageX-d)*b;a=(Z.imageY-a)*b;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(d,a,-n),d=viewportClickPt.x,a=viewportClickPt.y);return new Z.Utils.Point(Eb+d,xb+a)}function x(d,a){return vb[d]/Z.imageW*a}function g(d,a){return a/(vb[d]/Z.imageW)}function Oa(d,a,b,n,v){if(Z.z476){n=Math.round(n);var c=d,e=a;b="undefined"!==typeof b&&null!==b?b:Z.imageZ;

n="undefined"!==typeof n&&null!==n?n:Z.imageR;0>n&&(n+=360);var O=Z.Utils.getDisplayPositionRotated(T,n),m=Z.imageW,g=Z.imageH,f=ub,l=fb,h=Math.round(m*b),k=Math.round(g*b);if("container"==v){var G=b,q=n;if("undefined"===typeof G||null===G)G=Z.imageZ;if("undefined"===typeof q||null===q)q=Z.imageR;0>q&&(q+=360);d=(Eb-d)/G;a=(xb-a)/G;var N,s;switch(q){case 0:N=Z.imageX+d;s=Z.imageY+a;break;case 90:N=Z.imageX+a;s=Z.imageY-d;break;case 180:N=Z.imageX-d;s=Z.imageY-a;break;case 270:N=Z.imageX-a,s=Z.imageY+

d}a=new Z.Utils.Point(N,s);d=a.x;a=a.y}N=(f+O.y)/2/b;s=m-(f+O.y)/2/b;q=(l+O.x)/2/b;O=g-(l+O.x)/2/b;d=(0==n||180==n)&&h>f||(90==n||270==n)&&h>l?d<=N?N:d>=s?s:d:m/2;a=(0==n||180==n)&&k>l||(90==n||270==n)&&k>f?a<=q?q:a>=O?O:a:g/2;if("container"==v){var p;v=b;b=n;if("undefined"===typeof v||null===v)v=Z.imageZ;if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var ba;switch(b){case 0:p=d-Z.imageX;ba=a-Z.imageY;break;case 90:p=Z.imageY-a;ba=d-Z.imageX;break;case 180:p=Z.imageX-d;ba=Z.imageY-a;

break;case 270:p=a-Z.imageY,ba=Z.imageX-d}p=new Z.Utils.Point(Eb-p*v,xb-ba*v);d=p.x;a=p.y}d==c&&a==e||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(d,a)}function ba(d){d>Z.maxZ?(d=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):d<Z.minZ&&(d=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return d}function N(d){d=90*Math.round(Math.abs(d)/90)*Z.Utils.sign(d);-360>=d?d+=360:360<=d&&(d-=360);return d}function G(){if(Z.ToolbarDisplay&&Z.Toolbar.z542()){var d=l.getZoom();

Z.Toolbar.z667(d)}}function Va(){Z.Navigator&&Z.Navigator.z542()&&Z.Navigator.z668()}function Gb(d){Z.Ruler&&Z.Ruler.z542()&&Z.Ruler.z668(d)}function Cd(){vc||(vc=new Image,vc.url=Tf,vc.onload=Ne,vc.onerror=Dd,vc.src=Tf)}function Ne(){var d=vc.width,a=vc.height,b=Z.viewerW/2+100,n=Z.viewerH-200,v=vc.cloneNode(!1);v.width=d;v.height=a;Y=Z.Utils.createContainerElement("div","piC","inline-block","absolute","hidden",d+"px",a+"px",b+"px",n+"px","none","0px","transparent none","0px","0px","normal");Y.appendChild(v);

Z.ViewerDisplay.appendChild(Y);Y.setAttribute("title",Z.Utils.getResource("z398"));d=parseInt(Z.Utils.getResource("z230"),10);Y.style.zIndex=(d+13).toString();Z.mobileDevice?(Z.Utils.addEventListener(Y,"touchstart",qg),Z.Utils.addEventListener(Y,"touchmove",rg),Z.Utils.addEventListener(Y,"touchend",sg),Z.Utils.addEventListener(Y,"touchcancel",tg)):Z.Utils.addEventListener(Y,"mousedown",kc);Z.Utils.addEventListener(v,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(v,"mousedown",Z.Utils.preventDefault)}

function Dd(){Z.Utils.showMessage(Z.Utils.getResource("z291")+this.url,!0)}function kc(d){if((d=Z.Utils.event(d))&&Y){Z.Utils.removeEventListener(Y,"mousedown",kc);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",fe);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseup",Ed);var a=Z.Utils.getMousePosition(d);Ua=new Z.Utils.Point(a.x,a.y);var a=D(d.clientX,d.clientY),b=new Z.Utils.Point(parseFloat(Y.style.left),parseFloat(Y.style.top));d=a.x-b.x;a=a.y-b.y;Y.mouseXPrior=Ua.x;Y.mouseYPrior=Ua.y;Y.mouseXOffset=

d;Y.mouseYOffset=a}}function fe(d){if((d=Z.Utils.event(d))&&Y){d=Z.Utils.getMousePosition(d);Ja=new Z.Utils.Point(d.x,d.y);var a=Ja.x-Y.mouseXPrior,b=Ja.y-Y.mouseYPrior;Y.mouseXPrior=Ja.x;Y.mouseYPrior=Ja.y;d=Y.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function Ed(d){if((d=Z.Utils.event(d))&&Y){d=Z.Utils.getMousePosition(d);d=zb?zb:new Z.Utils.Point(d.x,d.y);Z.Utils.removeEventListener(Z.ViewerDisplay,"mousemove",fe);Z.Utils.removeEventListener(Z.ViewerDisplay,

"mouseup",Ed);Z.Utils.addEventListener(Y,"mousedown",kc);var a=d.x-Y.mouseXPrior,b=d.y-Y.mouseYPrior;d=Y.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function qg(d){!Z.interactivityOff&&(d=Z.Utils.event(d))&&(d.preventDefault(),Y&&(d=Z.Utils.getFirstTouch(d)))&&(d=new Z.Utils.Point(d.pageX,d.pageY),Ua=new Z.Utils.Point(d.x,d.y),Y.mouseXPrior=d.x,Y.mouseYPrior=d.y)}function rg(d){if(!Z.interactivityOff&&Z.mousePan){if(d=Z.Utils.event(d))if(d.preventDefault(),Y&&(d=

Z.Utils.getFirstTouch(d))){d=new Z.Utils.Point(d.pageX,d.pageY);var a=Y.style,b=parseFloat(a.left),n=parseFloat(a.top);a.left=b+(d.x-Y.mouseXPrior)+"px";a.top=n+(d.y-Y.mouseYPrior)+"px";Y.mouseXPrior=d.x;Y.mouseYPrior=d.y}return!1}}function sg(d){if(!Z.interactivityOff&&(d=Z.Utils.event(d))&&Y&&(d=Z.Utils.getFirstTouch(d))){d=new Z.Utils.Point(d.pageX,d.pageY);d=new Z.Utils.Point(d.x,d.y);var a=d.x-Y.mouseXPrior,b=d.y-Y.mouseYPrior;d=Y.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";

d.top=b+"px"}}function tg(d){if(!Z.interactivityOff&&(d=Z.Utils.event(d))&&Y&&(d=Z.Utils.getFirstTouch(d))){d=new Z.Utils.Point(d.pageX,d.pageY);d=new Z.Utils.Point(d.x,d.y);var a=d.x-Y.mouseXPrior,b=d.y-Y.mouseYPrior;d=Y.style;a=parseFloat(d.left)+a;b=parseFloat(d.top)+b;d.left=a+"px";d.top=b+"px"}}function Bd(){Vc=new Image;Uf=parseFloat(Z.Utils.getResource("z234"));Vc.url=Z.watermarkPath;Vc.onload=Ad;Vc.onerror=y;Vc.src=Z.watermarkPath}function Ad(){if(Ga)for(var d=parseFloat(Z.Utils.getResource("z235")),

a=parseFloat(Z.Utils.getResource("z237")),b=parseFloat(Z.Utils.getResource("z236")),n=l.getZoom(),v=(Z.imageW*n-Ga.width)/2,c=(Z.imageH*n-Ga.height)/2,e=(Z.imageW/2-Z.imageX)*n,O=(Z.imageH/2-Z.imageY)*n,m=n<d?d:n,a=Math.round(Z.imageW/a),b=Math.round(Z.imageH/b),d=Ta(),g=Vc.width*m,m=Vc.height*m,f=0,h=0,k=1;k<=a;k++)for(var G=1;G<=b;G++){var q=Math.round(Z.imageW/(a+1)*k),N=Math.round(Z.imageH/(b+1)*G);if(q>d.l&&q<d.r&&N>d.t&&N<d.b){var s=Math.round(q*n-g/2-v+e),p=Math.round(N*n-m/2-c+O);if(4E3<Z.imageW){N=

h+100;if(s<f+100&&p<N)continue;f=s;h=p}var N=g,q=m,ba=p,p=Vc.cloneNode(!1);Z.Utils.setOpacity(p,Uf);p.width=N;p.height=q;N=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",N+"px",q+"px",s+"px",ba+"px","none","0px","transparent none","0px","0px","normal");N.appendChild(p);Ga.appendChild(N);Z.Utils.addEventListener(p,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(p,"mousedown",Z.Utils.preventDefault)}}}function Oe(){Ga&&(Z.Utils.clearDisplay(Ga),Ad())}function y(){Z.Utils.showMessage(Z.Utils.getResource("z292")+

this.url)}function vd(){if(Z.Utils.isStrVal(Z.hotspotPath)){var d=Z.tour?Z.Utils.getResource("z227"):Z.Utils.getResource("z135");".xml"!=Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotPath=Z.hotspotPath+"/"+d);dataPath=Z.Utils.cacheProofPath(Z.hotspotPath)}else Z.Utils.isStrVal(Z.annotationPath)&&(Z.simplePath?dataPath=Z.annotationPath:(".json"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length)&&".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-

4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("z69")),dataPath=Z.Utils.cacheProofPath(Z.annotationPath)));"undefined"!==typeof dataPath&&Z.Utils.isStrVal(dataPath)?(d=new Z.NetConnector,-1!=dataPath.toLowerCase().indexOf(".xml")?d.loadXML(dataPath):-1!=dataPath.toLowerCase().indexOf(".json")&&d.loadJSON(dataPath)):"string"===typeof Z.annotationXMLText?(d=Z.Utils.xmlConvertTextToDoc(Z.annotationXMLText),l.parseAnnotationsXML(d)):"object"===typeof Z.annotationJSONObject?

(d=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),d=Z.Utils.xmlConvertTextToDoc(d),l.parseAnnotationsXML(d)):Z.measureVisible&&null==Z.editMode&&(d=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),l.parseAnnotationsXML(d))}function wd(d,a){var b=Z.Utils.arrayIndexOfObjectValue(mb,"media",d.media);if(-1!=b){var n=new Image;n.src=d.media;var v=n.width,n=n.height;mb[b].element&&(d.image=mb[b].element.cloneNode(!1));d.iW=v;d.iH=n;a&&(b=new Ka,wc(d,b))}else mb[mb.length]={media:d.media,element:null},

b=(new Date).getTime(),v=d.media,ug.loadImage(v,Z.Utils.createCallback(null,vg,v,b),"hotspot")}function ca(d){var a;a=d.getAttribute("ID");this.id=""!=a?a:Pa("labelExternal");a=d.getAttribute("INTERNALID");this.internalID=isNaN(parseInt(a))?ka?Pa("hotspot"):Pa("label"):a;this.poiID=d.getAttribute("POIID");a=unescape(d.getAttribute("NAME"));this.name=""!=a?a:this.id;this.mediaType=d.getAttribute("MEDIATYPE");this.media=d.getAttribute("MEDIA");this.iH=this.iW=this.image=null;a=parseFloat(d.getAttribute("X"));

this.x=isNaN(a)?0:a;a=parseFloat(d.getAttribute("Y"));this.y=isNaN(a)?0:a;a=parseFloat(d.getAttribute("ZOOM"));this.z=isNaN(a)?-1:a;a=parseFloat(d.getAttribute("XSCALE"));this.xScale=isNaN(a)?100:a;a=parseFloat(d.getAttribute("YSCALE"));this.yScale=isNaN(a)?100:a;this.clickURL=d.getAttribute("CLICKURL");this.urlTarget=d.getAttribute("URLTARGET");a=d.getAttribute("ROLLOVER");this.rollover="1"==a||"true"==a;this.caption=unescape(d.getAttribute("CAPTION"));this.tooltip=unescape(d.getAttribute("TOOLTIP"));

this.user=d.getAttribute("USER");this.date=d.getAttribute("DATE");this.textColor=d.getAttribute("TEXTCOLOR");this.backColor=d.getAttribute("BACKCOLOR");this.lineColor=d.getAttribute("LINECOLOR");this.fillColor=d.getAttribute("FILLCOLOR");a=d.getAttribute("TEXTVISIBLE");this.textVisible="false"!=a;a=d.getAttribute("BACKVISIBLE");this.backVisible="false"!=a;a=d.getAttribute("LINEVISIBLE");this.lineVisible="false"!=a;a=d.getAttribute("FILLVISIBLE");this.fillVisible="false"!=a;a=d.getAttribute("CAPTIONPOSITION");

this.captionPosition=Z.Utils.isStrVal(a)?a:"8";a=d.getAttribute("SAVED");this.saved=null===a?!0:a;this.visibility=!0;a=d.getElementsByTagName("CAPTION");0<a.length&&(this.captionHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));a=d.getElementsByTagName("TOOLTIP");0<a.length&&(this.tooltipHTML=unescape(Z.Utils.xmlConvertDocToText(a[0])));if(("freehand"==d.getAttribute("MEDIA")||"rectangle"==d.getAttribute("MEDIA")||"polygon"==d.getAttribute("MEDIA")||"measure"==d.getAttribute("MEDIA"))&&0<d.getElementsByTagName("POLYGON").length){a=

d.getElementsByTagName("POLYGON")[0];this.polyClosed="0"!=a.getAttribute("CLOSED");a=a.getElementsByTagName("POINT");for(var b=[],n=0,v=a.length;n<v;n++){var c=parseFloat(a[n].getAttribute("X")),c=isNaN(c)?0:c,e=parseFloat(a[n].getAttribute("Y")),e=isNaN(e)?0:e;b[b.length]={x:c,y:e}}this.polygonPts=b}this.audio=d.getAttribute("AUDIO");Z.Utils.isStrVal(this.audio)&&(Z.audioContent=!0);a=parseFloat(d.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=d.getAttribute("TRANSITION");a=parseFloat(d.getAttribute("CHANGEFOR"));

this.changeFor=isNaN(a)?0:a;a=parseFloat(d.getAttribute("ROTATION"));this.rotation=isNaN(a)?0:a;this.category=d.getAttribute("CATEGORY");this.zIndex=t.length.toString()}function vg(d,a,b){if(d&&a&&b){a=new Ka;for(var n=0,v=t.length;n<v;n++){var c=t[n];if(c.media==d){var e=Z.Utils.arrayIndexOfObjectValue(mb,"media",d);-1!=e?mb[e].element=b:mb[mb.length]={media:d,element:b};c.image=b.cloneNode(!1);c.iW=b.width;c.iH=b.height;wc(c,a)}}}else Z.Utils.showMessage(Z.Utils.getResource("z248"))}function Wa(){la&&

(Z.Utils.clearDisplay(la),Sa&&Z.Utils.clearDisplay(Sa),ya&&Z.Utils.clearDisplay(ya),"inline-block"==Wb.display&&Vf())}function Vf(){for(var d=new Ka,a=0,b=t.length;a<b;a++)wc(t[a],d);0==la.childNodes.length&&(d=Z.Utils.createContainerElement("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),la.appendChild(d))}function wc(d,a){if(0<ge.length){var b=Z.Utils.arrayIndexOf(ge,d.id);if(-1==b)return}else if(0<he.length&&

(b=Z.Utils.arrayIndexOf(he,d.internalID),-1==b))return;"polygon"==d.media&&(!Z.hotspotsDrawOnlyInView||d.x+Wc>a.box.l&&d.x-Wc<a.box.r&&d.y+Wc>a.box.t&&d.y-Wc<a.box.b)&&Kc(d,a);(!Z.hotspotsDrawOnlyInView||d.x>a.box.l&&d.x<a.box.r&&d.y>a.box.t&&d.y<a.box.b)&&Pe(d,a)}function Pe(d,a,b){-1!=Z.Utils.arrayIndexOfObjectValue(t,"internalID",d.internalID)&&Xc(d.internalID);Z.useCanvas&&"polygon"==d.media&&(b=Z.Utils.polygonDimensions(d.polygonPts,b),d.iW=b.x,d.iH=b.y);var n=!Z.Utils.isStrVal(d.media);b=!Z.Utils.isStrVal(d.caption)&&

!Z.Utils.isStrVal(d.captionHTML)&&"measure"!=d.mediaType;var v=null===d.iW||null===d.iH,c="polygon"!=d.media;if(!(n&&b&&v&&c)){v=a.currentZ/("polygon"!=d.media?d.z/100:1);"polygon"!=d.media&&(v=v>a.constrainedScaleMax?a.constrainedScaleMax:v<a.constrainedScaleMin?a.constrainedScaleMin:v);var n=d.xScale/100*v*d.iW,v=d.yScale/100*v*d.iH,e;"placeholder"!=d.media&&d.image&&(e=d.image,e.align="top",e.width=n,e.height=v);var O=Math.round(d.x*a.currentZ-n/2-a.displayOffsetL+a.imageOffsetL),m=Math.round(d.y*

a.currentZ-v/2-a.displayOffsetT+a.imageOffsetT),g=c=null;b||(Z.captionBoxes||"measure"==d.mediaType?c=Lc(d,a):(g=Lc(d,a,!0,!0),c=Lc(d,a,!0,!1)));a=Z.Utils.createContainerElement("div","hCloak","inline-block","absolute","visible");b=Z.Utils.createContainerElement("div","hot"+d.internalID.toString(),"inline-block","absolute","visible",n+"px",v+"px",O+"px",m+"px","none","0px","transparent none","0px","0px","normal");b.title=Z.Utils.isStrVal(d.tooltip)?d.tooltip:"";if(Z.Utils.isStrVal(d.clickURL))if(null===

Z.editMode){if(e){var f=document.createElement("a");f.setAttribute("href",d.clickURL);f.setAttribute("target",d.urlTarget);f.setAttribute("outline","none");f.appendChild(e);e.style.cursor="help";e.style.border="none"}if(c){var h=document.createElement("a");h.setAttribute("href",d.clickURL);h.setAttribute("target",d.urlTarget);h.setAttribute("outline","none");g&&(h.appendChild(g),g.style.cursor="help");h.appendChild(c);c.style.cursor="help"}a.style.border="none";if(Z.clickZoom||Z.clickPan)Z.mobileDevice?

Z.Utils.addEventListener(a,"touchstart",ie):Z.Utils.addEventListener(a,"mousedown",je)}else Z.mobileDevice?Z.Utils.addEventListener(a,"touchstart",ke):Z.Utils.addEventListener(a,"mousedown",Qe);Z.Utils.isStrVal(d.clickURL)&&null===Z.editMode?(f&&a.appendChild(f),h&&a.appendChild(h)):(e&&a.appendChild(e),g&&a.appendChild(g),c&&a.appendChild(c));b.appendChild(a);la.appendChild(b);b.zIndex=d.zIndex;d.rollover&&(a.rollover=d.rollover);b.internalID=d.internalID;l.setHotspotVisibility(b,!d.rollover&&d.visibility);

g&&le(d,g,n,v,!0);le(d,c,n,v);d.rollover&&(Z.Utils.addEventListener(b,"mouseover",ld),Z.Utils.addEventListener(b,"mouseout",Re));Z.mobileDevice?(Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(b,"touchend",Z.Utils.preventDefault),Z.Utils.addEventListener(b,"touchcancel",Z.Utils.preventDefault)):(Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault))}}function Ka(){this.box=Ta();this.currentZ=

l.getZoom();this.constrainedScale=this.currentZ<me?me:this.currentZ>ne?ne:this.currentZ;this.constrainedScaleMax=ne;this.constrainedScaleMin=me;this.displayOffsetL=(Z.imageW*this.currentZ-la.width)/2;this.displayOffsetT=(Z.imageH*this.currentZ-la.height)/2;this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ;this.imageOffsetT=(Z.imageH/2-Z.imageY)*this.currentZ}function va(d){if("undefined"===typeof d||null===d)d=document.getElementById("progressTextBox");var a=null;-1!=d.id.indexOf("hot")&&-1==

d.id.indexOf("hotspotDisplay")?a=d:d.parentNode&&-1!=d.parentNode.id.indexOf("hot")&&-1==d.parentNode.id.indexOf("hotspotDisplay")?a=d.parentNode:d.parentNode.parentNode&&-1!=d.parentNode.parentNode.id.indexOf("hot")&&-1==d.parentNode.parentNode.id.indexOf("hotspotDisplay")?a=d.parentNode.parentNode:d.parentNode.parentNode.parentNode&&-1!=d.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==d.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(a=d.parentNode.parentNode.parentNode);

return a}function Xa(d,a,b){hotID=a.id.substring(3,a.id.length);var n=Z.Utils.arrayIndexOfObjectValue(t,"internalID",hotID);if(-1!=n&&(n=t[n],"mouseup"==d.type||"mousemove"==d.type&&"polygon"==n.media)){var c=b.x-=a.mouseXOffset-parseFloat(a.style.width)/2;a=b.y-=a.mouseYOffset-parseFloat(a.style.height)/2;a=new Z.Utils.Point(c,a);d=l.getClickCoordsInImage(d,l.getZoom(),a);"polygon"==n.media&&(Qb(n,d),xc());n.x=d.x;n.y=d.y}}function Qb(d,a){for(var b=a.x-d.x,n=a.y-d.y,c=d.polygonPts.slice(0),e=0,

g=c.length;e<g;e++)c[e].x+=b,c[e].y+=n;d.polygonPts=c.slice(0)}function Lc(d,a,b,n){var c=a.currentZ/(d.z/100),c=c>a.constrainedScaleMax?a.constrainedScaleMax:c<a.constrainedScaleMin?a.constrainedScaleMin:c;a=Math.round(wg*c);a=a<Wf?Wf:a>Xf?Xf:a;var c=xg*c,c=c<Yf?Yf:c>Zf?Zf:c,e,g;"undefined"!==typeof b&&null!==b&&b?(e="0px",g="transparent-none"):(e="1px",g=d.backColor);b=d.textColor;"undefined"!==typeof n&&null!==n&&n&&(b=d.backColor);n=Z.Utils.createContainerElement("div","captionTextBox","inline-block",

"absolute","hidden","auto","auto","1px","1px","solid",e,g,"0px",c+"px","nowrap");"undefined"!==typeof d.captionHTML&&Z.Utils.isStrVal(d.captionHTML)?(n.innerHTML=d.captionHTML,Z.Utils.setHTMLTextDefaultCaptionStyle(n,d.captionHTML,b,"verdana",a+"px","none","normal","normal","normal","normal","1em","center","none")):"undefined"!==typeof d.caption&&Z.Utils.isStrVal(d.caption)?(d=document.createTextNode(d.caption),n.appendChild(d),Z.Utils.setTextNodeStyle(d,b,"verdana",a+"px","none","normal","normal",

"normal","normal","1em","center","none"),Z.Utils.disableTextInteraction(d)):"measure"==d.mediaType&&(a=new Z.Utils.Point(d.x,d.y),md(d,a));Z.Utils.addEventListener(n,"contextmenu",Z.Utils.preventDefault);return n}function le(d,a,b,n,c){if(a){var e,g=d.captionPosition;e=Z.imageR;var O=w==d.internalID&&"polygon"==d.media,m,f;d=a.style;m=l.getZoom();var O=O?40:0,h=parseFloat(d.padding);f=e;g=parseInt(g,10);0>f&&(f+=360);switch(g){case 1:g=0==f?g:90==f?7:180==f?9:270==f?3:5;break;case 2:g=0==f?g:90==

f?4:180==f?8:270==f?6:5;break;case 3:g=0==f?g:90==f?1:180==f?7:270==f?9:5;break;case 4:g=0==f?g:90==f?8:180==f?6:270==f?2:5;break;case 6:g=0==f?g:90==f?2:180==f?4:270==f?8:5;break;case 7:g=0==f?g:90==f?9:180==f?3:270==f?1:5;break;case 8:g=0==f?g:90==f?6:180==f?2:270==f?4:5;break;case 9:g=0==f?g:90==f?3:180==f?1:270==f?7:5}g=g.toString();g=parseInt(g,10);0>e&&(e+=360);var k=parseFloat(Z.Utils.getElementStyleProperty(a,"width"));isNaN(k)&&(f=parseFloat(Z.Utils.getResource("z115")),f=parseFloat(d.fontSize)/

f,k=Math.round(parseFloat(a.firstChild.length*f)));var G=20*m;m=(b-k)/2-h;f=(n-G)/2-h;Z.Utils.rotateElement(d,-e);n=n/2+G+h+O;b=b/2+k/2+h+O;if(90==e||270==e)e=b,b=n,n=e;switch(g){case 1:m-=b;f-=n;break;case 2:f-=n;break;case 3:m+=b;f-=n;break;case 4:m-=b;break;case 6:m+=b;break;case 7:m-=b;f+=n;break;case 8:f+=n;break;case 9:m+=b,f+=n}if(e=new Z.Utils.Point(m,f))c=c?1:0,a.style.left=e.x+c+"px",a.style.top=e.y+c+"px"}}function md(d,a){var b=d.polyClosed,n=d.polygonPts.slice(0),c=n.length,e="",f=0,

g="",m="pixels"==Z.units?1:5,l="um"!=Z.units?Z.units:"\u03bcm";b?(e=yg,f=Z.Utils.polygonPerimeter(n,b,a,m),g=zg,captionText="<CAPTION>"+e+f.toString()+"  "+l,e=Ag,f=Z.Utils.polygonArea(n,b,a,m),captionText+="<br/>"+e+f.toString()+"  "+l+g+"</CAPTION>",d.captionHTML=captionText):0<c?(e=Bg,f=Z.Utils.polygonPerimeter(n,b,a,m),captionText=e+f.toString()+"  "+l,d.caption=captionText):0==c&&(e=Cg,f=Z.Utils.polygonPerimeter(n,b,a,m),captionText=e+f.toString()+"  "+l,d.caption=captionText)}function nf(d,

a,b){var n="0"==d?"hidden":"visible",c=parseInt(Z.Utils.getResource("z133"),10),e=uc(d,c,ub,fb);"undefined"===typeof ka||null===ka?(ff=ka=new Z.Utils.createSelectElement("hotspotList",a,b,c,e.x,e.y,null,n,Se),hf=ff.style,"0"!=d&&Z.ViewerDisplay.appendChild(ka),Z.tourPath&&(Yc=0),d=Z.Utils.isStrVal(Z.hotspotListTitle)&&"none"!=Z.hotspotListTitle?1:0,ka.selectedIndex=d):Z.Utils.arrayClear(b)}function Xc(d){d=document.getElementById("hot"+d);null!==d&&d.parentNode.removeChild(d)}function uc(d,a,b,n){switch(d){case "0":n=

d=0;break;case "1":n=d=25;break;case "2":d=b-a-25;n=20;break;case "3":d=b-a-25;n=null!=toolbar?n-50:n-37.5;break;case "4":d=25;n=null!=toolbar?n-50:n-37.5;break;default:d=b-a,n=25}return new Z.Utils.Point(d,n)}function Zc(d){var a=d.getAttribute("MEDIATYPE"),b=d.getAttribute("MEDIA");if("symbol"==a){switch(b){case "circle":b=Z.annotationFolder+"/circle.png";break;case "square":b=Z.annotationFolder+"/square.png";break;case "triangle":b=Z.annotationFolder+"/triangle.png";break;case "arrowDown":b=Z.annotationFolder+

"/arrowDown.png";break;case "arrowDownLeft":b=Z.annotationFolder+"/arrowDownLeft.png";break;case "arrowLeft":b=Z.annotationFolder+"/arrowLeft.png";break;case "arrowUpLeft":b=Z.annotationFolder+"/arrowUpLeft.png";break;case "arrowUp":b=Z.annotationFolder+"/arrowUp.png";break;case "arrowUpRight":b=Z.annotationFolder+"/arrowUpRight.png";break;case "arrowRight":b=Z.annotationFolder+"/arrowRight.png";break;case "arrowDownRight":b=Z.annotationFolder+"/arrowDownRight.png";break;case "lineHorizontal":b=Z.annotationFolder+

"/lineHorizontal.png";break;case "lineVertical":b=Z.annotationFolder+"/lineVertical.png";break;default:b=Z.annotationFolder+"/noSubstitutePlaceholder.png"}d.setAttribute("MEDIATYPE","icon");d.setAttribute("MEDIA",b);oe=!0}return d}function Mc(){return Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>")}function ja(d,a){var b;switch(a){case "root":b=d.getElementsByTagName("ZAS")[0];break;case "setup":b=d.createElement("SETUP");b.setAttribute("PANELPOSITION","2");b.setAttribute("INITIALVISIBILITY","1");b.setAttribute("POIVISIBILITY",

"1");b.setAttribute("LABELVISIBILITY","1");b.setAttribute("NOTEVISIBILITY","1");b.setAttribute("MINSCALE","0.02");b.setAttribute("MAXSCALE","2");break;case "poi":b=d.createElement("POI");b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("z43"));b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","-1");b.setAttribute("USER",Z.Utils.getResource("z44"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());break;case "label":b=d.createElement("LABEL");

b.setAttribute("ID","0");b.setAttribute("NAME",Z.Utils.getResource("z37"));b.setAttribute("MEDIATYPE","text");b.setAttribute("MEDIA","");b.setAttribute("X","center");b.setAttribute("Y","center");b.setAttribute("ZOOM","100");b.setAttribute("XSCALE","100");b.setAttribute("YSCALE","100");b.setAttribute("CLICKURL","");b.setAttribute("URLTARGET","");b.setAttribute("ROLLOVER","0");b.setAttribute("TOOLTIP","");b.setAttribute("USER",Z.Utils.getResource("z39"));b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString());

b.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25"));b.setAttribute("BACKCOLOR",Z.Utils.getResource("z22"));b.setAttribute("LINECOLOR",Z.Utils.getResource("z48"));b.setAttribute("FILLCOLOR",Z.Utils.getResource("z46"));b.setAttribute("TEXTVISIBLE",Z.Utils.getResource("z26"));b.setAttribute("BACKVISIBLE",Z.Utils.getResource("z23"));b.setAttribute("LINEVISIBLE",Z.Utils.getResource("z49"));b.setAttribute("FILLVISIBLE",Z.Utils.getResource("z47"));b.setAttribute("CAPTIONPOSITION",Z.Utils.getResource("z24"));

b.setAttribute("CATEGORY","");break;case "polygon":b=d.createElement("POLYGON");break;case "point":b=d.createElement("POINT");b.setAttribute("X","0");b.setAttribute("Y","0");break;case "note":b=d.createElement("NOTE"),b.setAttribute("ID","0"),b.setAttribute("NAME",Z.Utils.getResource("z40")),b.setAttribute("TEXT",Z.Utils.getResource("z41")),b.setAttribute("USER",Z.Utils.getResource("z42")),b.setAttribute("DATE",Z.Utils.getCurrentUTCDateAsString())}return b}function Fd(d,a,b,n,c,e){d=Z.Utils.arrayToArrayOfStrings([d,

a,b,n,c,e]);d=Z.Utils.xmlConvertTextToDoc('<POI ID="'+d[0]+'" NAME="'+d[1]+'" X="'+d[2]+'" Y="'+d[3]+'" ZOOM="'+d[4]+'" INTERNALID="'+d[5]+'" ></POI>').getElementsByTagName("POI")[0];pe(d,!0)}function pe(d,a){l.saveEditsPOI(!0);a&&(d=lc(d,"poi"));var b=Z.Utils.arrayIndexOfObjectValue(X,"value",d.getAttribute("INTERNALID"));-1==b&&(b=X.length);X[b]={text:unescape(d.getAttribute("NAME")),value:d.getAttribute("INTERNALID"),id:d.getAttribute("ID"),x:d.getAttribute("X"),y:d.getAttribute("Y"),z:d.getAttribute("ZOOM"),

user:d.getAttribute("USER"),date:d.getAttribute("DATE")}}function mc(d,a){l.saveEditsNote(!0);a&&(d=lc(d,"note"));var b=Z.Utils.arrayIndexOfObjectValue(pa,"value",d.getAttribute("INTERNALID"));-1==b&&(b=pa.length);pa[b]={text:unescape(d.getAttribute("NAME")),value:d.getAttribute("INTERNALID"),noteText:unescape(d.getAttribute("TEXT")),poiID:d.getAttribute("POIID"),id:d.getAttribute("ID"),user:d.getAttribute("USER"),date:d.getAttribute("DATE")}}function lc(d,a){var b;switch(a){case "hotspot":b=ka?Pa("hotspot"):

Pa("label");Z.Utils.isStrVal(d.getAttribute("ID"))||d.setAttribute("ID",b);var n=ka?Z.Utils.getResource("z34"):Z.Utils.getResource("z37");Z.Utils.isStrVal(d.getAttribute("NAME"))||d.setAttribute("NAME",n+b);n=ka?Z.Utils.getResource("z33"):Z.Utils.getResource("z35");Z.Utils.isStrVal(d.getAttribute("CAPTION"))||"freehand"==Z.editMode||Z.tourPath||Z.Utils.isStrVal(d.getAttribute("MEDIA"))||Z.Utils.isStrVal(d.getAttribute("MEDIA")&&"polygon"==d.getAttribute("MEDIA"))||d.setAttribute("CAPTION",n+b);Z.Utils.isStrVal(d.getAttribute("X"))||

d.setAttribute("X",Z.imageX.toString());Z.Utils.isStrVal(d.getAttribute("Y"))||d.setAttribute("Y",Z.imageY.toString());Z.Utils.isStrVal(d.getAttribute("ZOOM"))||d.setAttribute("ZOOM",(100*Z.imageZ).toString());!Z.Utils.isStrVal(d.getAttribute("CLICKURL"))&&Z.Utils.isStrVal(d.getAttribute("URL"))&&d.setAttribute("CLICKURL",d.getAttribute("URL"));isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b);n=d.getAttribute("MEDIATYPE");!Z.captionBoxes&&"measure"!=n||Z.Utils.isStrVal(d.getAttribute("TEXTCOLOR"))&&

Z.Utils.isStrVal(d.getAttribute("BACKCOLOR"))||(d.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),d.setAttribute("BACKCOLOR",Z.Utils.getResource("z22")));break;case "poi":b=Pa("poi");Z.Utils.isStrVal(d.getAttribute("ID"))||d.setAttribute("ID",b);Z.Utils.isStrVal(d.getAttribute("NAME"))||d.setAttribute("NAME",Z.Utils.getResource("z43")+b);Z.Utils.isStrVal(d.getAttribute("X"))||d.setAttribute("X",Z.imageX.toString());Z.Utils.isStrVal(d.getAttribute("Y"))||d.setAttribute("Y",Z.imageY.toString());

Z.Utils.isStrVal(d.getAttribute("ZOOM"))||d.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b);break;case "label":b=Pa("label");Z.Utils.isStrVal(d.getAttribute("ID"))||d.setAttribute("ID",b);Z.Utils.isStrVal(d.getAttribute("NAME"))||d.setAttribute("NAME",Z.Utils.getResource("z37")+b);var n=d.getAttribute("MEDIATYPE"),c=d.getAttribute("MEDIA");Z.Utils.isStrVal(c)||"text"==n||(d.setAttribute("MEDIA",Z.annotationFolder+"/"+

Z.Utils.getResource("z57")),d.setAttribute("MEDIATYPE",Z.Utils.getResource("z57TYPE")));Z.Utils.isStrVal(d.getAttribute("CAPTION"))||d.setAttribute("CAPTION",Z.Utils.getResource("z35")+b);!Z.Utils.isStrVal(d.getAttribute("CLICKURL"))&&Z.Utils.isStrVal(d.getAttribute("URL"))&&d.setAttribute("CLICKURL",d.getAttribute("URL"));Z.Utils.isStrVal(d.getAttribute("X"))||d.setAttribute("X",Z.imageX.toString());Z.Utils.isStrVal(d.getAttribute("Y"))||d.setAttribute("Y",Z.imageY.toString());Z.Utils.isStrVal(d.getAttribute("ZOOM"))||

d.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(d.getAttribute("INTERNALID"),10))&&d.setAttribute("INTERNALID",b);isNaN(parseInt(d.getAttribute("POIID"),10))&&d.setAttribute("POIID",V.options[V.selectedIndex].value);break;case "note":b=Pa("note"),Z.Utils.isStrVal(d.getAttribute("ID"))||d.setAttribute("ID",b),Z.Utils.isStrVal(d.getAttribute("NAME"))||d.setAttribute("NAME",Z.Utils.getResource("z40")+b),Z.Utils.isStrVal(d.getAttribute("TEXT"))||d.setAttribute("TEXT",""),isNaN(parseInt(d.getAttribute("INTERNALID"),

10))&&d.setAttribute("INTERNALID",b),isNaN(parseInt(d.getAttribute("POIID"),10))&&d.setAttribute("POIID",V.options[V.selectedIndex].value)}return d}function ib(d,a){var b=0,n="",c="";if("none"!=Z.annotationSort){switch(Z.annotationSort){case "id":n=d.value.toLowerCase();c=a.value.toLowerCase();break;case "name":n=d.text.toLowerCase(),c=a.text.toLowerCase()}n<c?b=-1:n>c&&(b=1)}return b}function $c(){if(Z.ToolbarDisplay&&Z.Toolbar.z542()){var d=Z.Toolbar.getSkinArray(),a=Z.Toolbar.getSkinSizes(),b=

parseInt(Z.Utils.getResource("z63"),10);if("markup"!=Z.editMode)var n=parseFloat(Z.Utils.getResource("z86")/1.5),c=Z.Utils.getResource("z83"),e=Z.Utils.getResource("z83NOALPHA");if("markup"!=Z.editMode){var f=Z.Utils.createContainerElement("div","buttonContainerPOI","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(f);Z.mobileDevice||Z.Utils.addEventListener(f,"mouseover",Z.Toolbar.backgroundEventsHandler);

var g=Z.Utils.createTextElement("poiNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(g.firstChild,"focus",nc);Z.Utils.addEventListener(g.firstChild,"blur",Yb);Z.AnnotationPanelDisplay.appendChild(g);if(g=document.getElementById("textBoxFor-poiNameTextElement"))g.style.visibility="hidden";g=new Z.Utils.Button("buttonPOIAdd",null,Z.skinPath,d[147],d[148],d[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,

"z373");f.appendChild(g.elmt);g=new Z.Utils.Button("buttonPOIEdit",null,Z.skinPath,d[150],d[151],d[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z376");f.appendChild(g.elmt);g=new Z.Utils.Button("buttonPOIDelete",null,Z.skinPath,d[141],d[142],d[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z375");f.appendChild(g.elmt);g=new Z.Utils.Button("buttonPOICancel",null,Z.skinPath,d[153],d[154],d[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z374");f.appendChild(g.elmt);Z.saveHandlerProvided&&

(g=new Z.Utils.Button("buttonPOISave",null,Z.skinPath,d[144],d[145],d[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z377"),f.appendChild(g.elmt));var m=yc?"blue":c,f=Z.Utils.createContainerElement("div","overlayPOIDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0);Z.Utils.setOpacity(f,n,e);Z.AnnotationPanelDisplay.appendChild(f)}null!==Z.editMode&&(f=Z.Utils.createTextElement("labelNameTextElement","","1px","1px","1px","1px","0px",

"solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off"),Z.Utils.addEventListener(f.firstChild,"focus",nc),Z.Utils.addEventListener(f.firstChild,"blur",Yb),Z.AnnotationPanelDisplay.appendChild(f),"markup"!=Z.editMode&&(f=document.getElementById("textBoxFor-labelNameTextElement")))&&(f.style.visibility="hidden");"markup"!=Z.editMode&&(f=Z.Utils.createContainerElement("div","buttonBorderLabel","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none",

"0px","0px","normal","default",!0),Z.AnnotationPanelDisplay.appendChild(f));g=Z.Utils.createContainerElement("div","buttonContainerLabel","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(g);f=Z.Utils.createContainerElement("div","buttonContainerLabel2","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(f);

Z.mobileDevice||(Z.Utils.addEventListener(g,"mouseover",Z.Toolbar.backgroundEventsHandler),Z.Utils.addEventListener(f,"mouseover",Z.Toolbar.backgroundEventsHandler));c=Z.Utils.createContainerElement("div","buttonBorderLg","inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);c.style.borderColor=Z.Utils.getResource("z87");g.appendChild(c);bblG=c;bblgS=bblG.style;c=new Z.Utils.Button("buttonViewMode",null,Z.skinPath,d[101],d[102],d[103],

"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z397");g.appendChild(c.elmt);"markup"!=Z.editMode&&(c=new Z.Utils.Button("buttonEditColorPicker",null,Z.skinPath,d[104],d[105],d[106],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z334"),g.appendChild(c.elmt));c=new Z.Utils.Graphic("editModeDivider",Z.skinPath,d[107],"1px","1px","1px","1px");g.appendChild(c.elmt);Z.freehandVisible&&(c=new Z.Utils.Button("buttonEditModeFreehand",null,Z.skinPath,d[108],d[109],d[110],"1px","1px","1px","1px","mouseover",

Z.Toolbar.z457,"z335"),g.appendChild(c.elmt));Z.textVisible&&(c=new Z.Utils.Button("buttonEditModeText",null,Z.skinPath,d[111],d[112],d[113],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z340"),g.appendChild(c.elmt));Z.iconVisible&&(c=new Z.Utils.Button("buttonEditModeIcon",null,Z.skinPath,d[114],d[115],d[116],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z336"),g.appendChild(c.elmt));Z.rectangleVisible&&(c=new Z.Utils.Button("buttonEditModeRectangle",null,Z.skinPath,d[117],d[118],d[119],

"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z339"),g.appendChild(c.elmt));Z.polygonVisible&&(c=new Z.Utils.Button("buttonEditModePolygon",null,Z.skinPath,d[120],d[121],d[122],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z338"),g.appendChild(c.elmt));Z.measureVisible&&(c=new Z.Utils.Button("buttonEditModeMeasure",null,Z.skinPath,d[46],d[47],d[48],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z337"),g.appendChild(c.elmt));var c=Z.Utils.createContainerElement("div","labelCaptionTextBox",

"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),l=document.createTextNode(Z.Utils.getResource("z407"));c.appendChild(l);l=Z.Utils.getResource("z35");l=Z.Utils.createTextElement("captionTextElement",l,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(l.firstChild,"focus",nc);Z.Utils.addEventListener(l.firstChild,"blur",Yb);Z.AnnotationPanelDisplay.appendChild(c);

Z.AnnotationPanelDisplay.appendChild(l);if("markup"!=Z.editMode){c=Z.Utils.createContainerElement("div","labelTooltipTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);l=document.createTextNode(Z.Utils.getResource("z413"));c.appendChild(l);l=Z.Utils.getResource("z38");l=Z.Utils.createTextElement("tooltipTextElement",l,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");

Z.Utils.addEventListener(l.firstChild,"focus",nc);Z.Utils.addEventListener(l.firstChild,"blur",Yb);Z.AnnotationPanelDisplay.appendChild(c);Z.AnnotationPanelDisplay.appendChild(l);c=Z.Utils.createContainerElement("div","labelClickURLTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);l=document.createTextNode(Z.Utils.getResource("z414"));c.appendChild(l);l=Z.Utils.getResource("z36");l=Z.Utils.createTextElement("clickURLTextElement",

l,"1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(l.firstChild,"focus",nc);Z.Utils.addEventListener(l.firstChild,"blur",Yb);Z.AnnotationPanelDisplay.appendChild(c);Z.AnnotationPanelDisplay.appendChild(l);for(var c=Z.Utils.getResource("z401").split(","),l=Z.Utils.getResource("z402").split(","),m=0,h=c.length;m<h;m++)labelCaptionPositionListDP[labelCaptionPositionListDP.length]={text:c[m],value:l[m]};c=new Z.Utils.createSelectElement("labelCaptionPositionList",

"",labelCaptionPositionListDP,1,1,0,b,"hidden",qe);Z.AnnotationPanelDisplay.appendChild(c);c=Z.Utils.getResource("z405").split(",");l=Z.Utils.getResource("z406").split(",");m=0;for(h=c.length;m<h;m++)labelTargetListDP[labelTargetListDP.length]={text:c[m],value:l[m]};c=new Z.Utils.createSelectElement("labelTargetList","",labelTargetListDP,1,1,0,b,"hidden",Te);Z.AnnotationPanelDisplay.appendChild(c);c=Z.Utils.createContainerElement("div","labelScaleTextBox","inline-block","absolute","hidden","1px",

"1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);l=document.createTextNode(Z.Utils.getResource("z412"));c.appendChild(l);Z.AnnotationPanelDisplay.appendChild(c);c=new Z.Utils.Button("buttonLabelScaleDown",null,Z.skinPath,d[27],d[28],d[29],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z358");Z.AnnotationPanelDisplay.appendChild(c.elmt);c=new Z.Utils.Button("buttonLabelScaleUp",null,Z.skinPath,d[24],d[25],d[26],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,

"z359");Z.AnnotationPanelDisplay.appendChild(c.elmt);c=Z.Utils.createContainerElement("div","labelRolloverTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);l=document.createTextNode(Z.Utils.getResource("z411"));c.appendChild(l);l=new Z.Utils.Checkbox("checkboxRollover","test","1px","1px","1px","1px","click",re,"z379");Z.AnnotationPanelDisplay.appendChild(c);Z.AnnotationPanelDisplay.appendChild(l)}l=Z.Utils.createContainerElement("div",

"buttonContainerLabelColors","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);g.appendChild(l);"markup"!=Z.editMode&&(c=Z.Utils.getResource("z83"),c=Z.Utils.createContainerElement("div","buttonContainerLabelColorsBackground","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",c,"0px","0px","normal",null,!0),l.appendChild(c),l.style.display="none");c=Z.Utils.createContainerElement("div","buttonBorderSm",

"inline-block","absolute","hidden","1px","1px","1px","1px","solid","2px","transparent none","0px","0px","normal",null,!0);c.style.borderColor=Z.Utils.getResource("z87");l.appendChild(c);bbsM=c;bbsmS=bbsM.style;c=new Z.Utils.Button("buttonColor0",null,Z.skinPath,d[123],d[124],d[125],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z324");l.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor1",null,Z.skinPath,d[126],d[127],d[128],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z325");l.appendChild(c.elmt);

c=new Z.Utils.Button("buttonColor2",null,Z.skinPath,d[129],d[130],d[131],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z326");l.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor3",null,Z.skinPath,d[132],d[133],d[134],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z327");l.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor4",null,Z.skinPath,d[135],d[136],d[137],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z328");l.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor5",null,

Z.skinPath,d[138],d[139],d[140],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z329");l.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor6",null,Z.skinPath,d[141],d[142],d[143],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z330");l.appendChild(c.elmt);c=new Z.Utils.Button("buttonColor7",null,Z.skinPath,d[144],d[145],d[146],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z331");l.appendChild(c.elmt);"edit"==Z.editMode&&(c=new Z.Utils.Button("buttonLabelAdd",null,Z.skinPath,d[153],

d[154],d[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z353"),f.appendChild(c.elmt),c=new Z.Utils.Button("buttonLabelEdit",null,Z.skinPath,d[156],d[157],d[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z356"),f.appendChild(c.elmt),c=new Z.Utils.Button("buttonLabelCancel",null,Z.skinPath,d[159],d[160],d[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z354"),f.appendChild(c.elmt));c=new Z.Utils.Button("buttonLabelDelete",null,Z.skinPath,d[147],d[148],d[149],"1px","1px",

"1px","1px","mouseover",Z.Toolbar.z457,"z355");f.appendChild(c.elmt);Z.saveHandlerProvided&&(c=new Z.Utils.Button("buttonLabelSave",null,Z.skinPath,d[150],d[151],d[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z357"),f.appendChild(c.elmt));var k=Z.Utils.createContainerElement("div","buttonContainerLabelIcons","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!1);Z.AnnotationPanelDisplay.appendChild(k);c=Z.Utils.getResource("z83");

m=Z.Utils.createContainerElement("div","buttonContainerLabelIconsBackground","inline-block","absolute","visible","1px","1px","0px","0px","solid","1px",c,"0px","0px","normal",null,!0);k.appendChild(m);k.style.display="none";for(var G=Z.Utils.getResource("z403").split(","),q=Z.Utils.getResource("z404").split(","),m=0,h=G.length;m<h;m++)se[se.length]={text:G[m],value:q[m]};b=new Z.Utils.createSelectElement("labelIconList","",se,1,1,0,b,"visible",Ue);k.appendChild(b);if("markup"!=Z.editMode){var m=yc?

"green":c,h=Z.Utils.createContainerElement("div","overlayLabelDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0),m=yc?"red":c,b=Z.Utils.createContainerElement("div","overlayLabelDetailDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0),m=yc?"yellow":c,G=Z.Utils.createContainerElement("div","overlayLabelDetailEditableDisable","none","absolute","visible","1px","1px","0px","0px","none",

"0px",m,"0px","0px","normal","default",!0),q=Z.Utils.createTextElement("overlayMessageBox","","1px","1px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null),m=yc?"pink":c,N=Z.Utils.createContainerElement("div","overlayLabelNameEditableDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0),m=yc?"brown":c,m=Z.Utils.createContainerElement("div","overlayLabelCaptionPositionDisable","none","absolute","visible","1px",

"1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0);Z.Utils.setOpacity(h,n,e);Z.Utils.setOpacity(b,n,e);Z.Utils.setOpacity(G,n,e);Z.Utils.setOpacity(N,n,e);Z.Utils.setOpacity(m,n,e);Z.AnnotationPanelDisplay.appendChild(h);Z.AnnotationPanelDisplay.appendChild(b);Z.AnnotationPanelDisplay.appendChild(G);Z.AnnotationPanelDisplay.appendChild(q);Z.AnnotationPanelDisplay.appendChild(N);Z.AnnotationPanelDisplay.appendChild(m);Z.overlayMessage=document.getElementById("overlayMessageBox");m=

document.getElementById("textBoxFor-overlayMessageBox");Z.overlayMessage&&m&&(Z.overlayMessage.value=Z.Utils.getResource("z4SHORT"),Z.Utils.setHTMLTextStyle(Z.overlayMessage,"#666666","verdana","12px","none","normal","normal","normal","normal","1em","center","none"),m.style.display="none");m=parseInt(Z.Utils.getResource("z230"),10);l.style.zIndex=(m+5).toString();m=parseInt(Z.Utils.getResource("z230"),10);g.style.zIndex=(m+6).toString();k.style.zIndex=(m+7).toString();b.style.zIndex=(m+8).toString()}if("markup"!=

Z.editMode){var s=Z.Utils.createTextElement("noteNameTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.Utils.addEventListener(s.firstChild,"focus",nc);Z.Utils.addEventListener(s.firstChild,"blur",Yb);Z.AnnotationPanelDisplay.appendChild(s);if(s=document.getElementById("textBoxFor-noteNameTextElement"))s.style.visibility="hidden";s=Z.Utils.createContainerElement("div","buttonContainerNote","inline-block","absolute","visible","1px",

"1px","0px","0px","none","0px","transparent none","0px","0px","normal","default",!0);Z.AnnotationPanelDisplay.appendChild(s);Z.mobileDevice||Z.Utils.addEventListener(s,"mouseover",Z.Toolbar.backgroundEventsHandler);b=new Z.Utils.Button("buttonNoteAdd",null,Z.skinPath,d[153],d[154],d[155],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z364");s.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteEdit",null,Z.skinPath,d[156],d[157],d[158],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z367");

s.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteDelete",null,Z.skinPath,d[147],d[148],d[149],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z366");s.appendChild(b.elmt);b=new Z.Utils.Button("buttonNoteCancel",null,Z.skinPath,d[159],d[160],d[161],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z365");s.appendChild(b.elmt);Z.saveHandlerProvided&&(b=new Z.Utils.Button("buttonNoteSave",null,Z.skinPath,d[150],d[151],d[152],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z368"),s.appendChild(b.elmt));

m=yc?"pink":c;b=Z.Utils.createContainerElement("div","overlayNoteDetailDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0);Z.Utils.setOpacity(b,n,e);m=yc?"purple":c;g=Z.Utils.createContainerElement("div","overlayNoteDisable","none","absolute","visible","1px","1px","0px","0px","none","0px",m,"0px","0px","normal","default",!0);Z.Utils.setOpacity(g,n,e);Z.AnnotationPanelDisplay.appendChild(b);Z.AnnotationPanelDisplay.appendChild(g)}if(1==Z.helpVisible||

2==Z.helpVisible)"markup"==Z.editMode?(d=new Z.Utils.Button("buttonHelpMarkup",null,Z.skinPath,d[43],d[44],d[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342MARKUP"),f.appendChild(d.elmt)):"edit"==Z.editMode&&(d=new Z.Utils.Button("buttonHelpAnnotation",null,Z.skinPath,d[43],d[44],d[45],"1px","1px","1px","1px","mouseover",Z.Toolbar.z457,"z342ANNOTATION"),s.appendChild(d.elmt));Gd(a);nd();Z.Viewer.initializePageExitEventHandler()}else window.setTimeout($c,100)}function Gd(d){var a=new l.calculateAnnotationPanelDimensions(yd,

Fb,zd),b=l.calculateAnnotationPanelCoords(Ke,a.w,a.h,ub,fb);l.sizeAndPositionAnnotationPanel(ee,a.w,a.h,b.x,b.y);ee.display=!Z.annotationPanelVisible||"0"==Ke||Z.measureVisible&&null===Z.editMode?"none":"inline-block";var c=parseInt(Z.Utils.getResource("z53"),10),e=parseInt(Z.Utils.getResource("z51"),10),Za=parseInt(Z.Utils.getResource("z55"),10),f=parseInt(Z.Utils.getResource("z54"),10),g=parseInt(Z.Utils.getResource("z56"),10),m=parseInt(Z.Utils.getResource("z62"),10);parseInt(Z.Utils.getResource("z63"),

10);var h=parseInt(Z.Utils.getResource("z64"),10),k=parseInt(Z.Utils.getResource("z72SMALL"),10),G=parseInt(Z.Utils.getResource("z72"),10),q=parseFloat(Z.Utils.getResource("z82")),N=Z.Utils.getResource("z83"),s=Z.Utils.getResource("z83LIGHT"),p=Z.Utils.getResource("z83NOALPHA"),ba=parseInt(Z.Utils.getResource("z59"),10),r=9,t=Za-24,Oa=0,w=Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.SAFARI?-2:0,Va=0,C=0,D=0,F=0,y=0,J=0,u=0,Gb=0;if("edit"==Z.editMode)var E=0,I=0,M=0,K=0,U=0,db=0,W=0,H=0,Q=0,

R=0,T=0,S=0;var B=0;if(null===Z.editMode)yd&&(E=g+4,B=E+17),Fb&&(Va=B+4+1,B=Va+17),zd&&(Q=B+4+1,R=Q+17+4);else{var x=d[6],A=d[7],L=d[8],Cd=d[4],Y=d[5];15<x&&(x=15);15<A&&(A=15);22<L&&(L=22);1<Cd&&(Cd=1);18<Y&&(Y=18);var kc=.75*x,X=.75*A,$=2*kc,fa=g+3,da=1.5*A,ia=2*A+1.5*X,Ne=x/2,ka=(Y-A)/2,ea=.5*A,aa=1.75*g,la=a.w-2*g-2,fe=7*A+46.5,P=0,na=a.w-3*g,ma=40.5,ca=a.w-g-x-5,ga=ca-L,pa=ga-L;if("markup"==Z.editMode){if(r=0,aa=g+4,Za=a.w-2*g,t=Za-24,fa=0,C=2,D=ea,F=D+A+8.5-1,y=C+2*A-1,rIconList=11.5,Va=C+ia+

8.5-4-2,J=Va+15+8,u=J+15+5,Gb=ea-5,1==Z.helpVisible||2==Z.helpVisible)Oa=L}else if("edit"==Z.editMode){yd&&(E=g+4,I=E+17-1,M=ea,B=I+da+4);Fb&&(Va=B+g,C=Va+17+4+1,D=ea+1,K=D+A+ea,F=5,y=C+2*A-1,rIconList=12.75,J=C+da+8.5+4,U=J+A+8.5,db=U+A+8.5,W=db+A+8.5,H=W+A+8.5,u=H+A+8.5+5,Gb=ea-5,B=u+da+4-5);zd&&(Q=B+g,R=Q+17+4+1,T=R+ba+2,S=ea);var ta=8.5*$+1,xa=1.8*X}}var ua=document.getElementById("annotationPanelBackground");if(ua){var Ed=ua.style;Ed.width=a.w+"px";Ed.height=a.h+"px";Ed.backgroundColor=N;Z.Utils.setOpacity(annotationPanelBackground,

q,p)}if(yd){var sa=document.getElementById("labelPOITextBox");if(sa&&V){var qa=sa.style;qa.width=c+"px";qa.height="15px";qa.left=g+"px";qa.top=E+3+"px";qa.visibility="visible";Z.Utils.setTextNodeStyle(sa,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none");var ha=V.style;ha.width=Za+"px";ha.left=c+"px";ha.top=E+w+"px";ha.visibility="visible";if(null!==Z.editMode){var ya=document.getElementById("textBoxFor-poiNameTextElement");if(ya){var Dd=ya.style;Dd.width=t+"px";

Dd.height="15px";Dd.left=c+"px";Dd.top=E+"px";Z.Utils.setTextAreaStyle(ya,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none",k+"px")}var Ca=document.getElementById("buttonContainerPOI");if(Ca){var za=Ca.style;za.width=a.w+"px";za.height=da+"px";za.left="0px";za.top=I+"px"}var Ba=document.getElementById("buttonPOIEdit");if(Ba){Z.Utils.buttonSize(Ba,x,A);var Ha=Ba.style;Ha.left=ca+"px";Ha.top=M+"px"}var Da=document.getElementById("buttonPOIAdd");if(Da){Z.Utils.buttonSize(Da,

x,A);var Ia=Da.style;Ia.left=ga+"px";Ia.top=M+"px"}var va=document.getElementById("buttonPOISave");if(va){Z.Utils.buttonSize(va,x,A);var Ea=va.style;Ea.left=ca+"px";Ea.top=M+"px";Ea.display="none"}var Aa=document.getElementById("buttonPOICancel");if(Aa){Z.Utils.buttonSize(Aa,x,A);var Ga=Aa.style;Ga.left=va?ga+"px":ca+"px";Ga.top=M+"px";Ga.display="none"}var Ja=document.getElementById("buttonPOIDelete");if(Ja){Z.Utils.buttonSize(Ja,x,A);var Ka=Ja.style;Ka.left=va&&Aa?pa+"px":va?ga+"px":ca+"px";Ka.top=

M+"px";Ka.display="none"}var Qa=document.getElementById("overlayPOIDisable");if(Qa){var Fa=Qa.style;Fa.width=a.w+"px";Fa.height=g+15+A+17+4+"px";Fa.left="0px";Fa.top="0px"}}}}if(Fb){var Ma=document.getElementById("labelLabelTextBox");if(Ma){var oa=Ma.style;oa.width=c+"px";oa.height="15px";oa.left=g+"px";oa.top=Va+3+"px";oa.visibility="visible";Z.Utils.setTextNodeStyle(Ma,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none")}}if(("markup"==Z.editMode||Fb)&&ra){var La=

ra.style;La.width=Za+"px";La.left="markup"==Z.editMode?g+"px":c+"px";La.top=Va+w+"px";La.visibility="visible"}if("edit"==Z.editMode&&Fb||"markup"==Z.editMode){var Ra=document.getElementById("textBoxFor-labelNameTextElement");if(Ra){var Pa=Ra.style;Pa.width=t+"px";Pa.height="15px";Pa.left="markup"==Z.editMode?g+"px":c+"px";Pa.top=Va+"px";Z.Utils.setTextAreaStyle(Ra,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none",k+"px")}var Xa=document.getElementById("buttonBorderLabel");

if(Xa){var ja=Xa.style;ja.width=la+"px";ja.height=fe+"px";ja.left=g+"px";ja.top=C+"px"}var ab=document.getElementById("buttonContainerLabel");if(ab){var Sa=ab.style;Sa.width=a.w-2+"px";Sa.height="markup"==Z.editMode?ia+"px":.7*ia+"px";Sa.left="0px";Sa.top=C+"px"}var Ta=document.getElementById("buttonViewMode");if(Ta){P+=aa+1;Z.Utils.buttonSize(Ta,x,A);var Ua=Ta.style;Ua.left=P+"px";Ua.top=D+"px"}var Ya=document.getElementById("buttonEditColorPicker");if(Ya){P+=L;Z.Utils.buttonSize(Ya,x,A);var eb=

Ya.style;eb.left=P+"px";eb.top=D+"px"}var bb=document.getElementById("editModeDivider");if(bb){P+=L+1;"markup"==Z.editMode&&(P+=Ne-1);Z.Utils.graphicSize(bb,Cd,Y);var hb=bb.style;hb.left=P+"px";hb.top=D-ka+"px"}var Wa=document.getElementById("buttonEditModeFreehand");if(Wa){P+=L-x+4;"markup"==Z.editMode&&(P+=Ne-4);Z.Utils.buttonSize(Wa,x,A);var $a=Wa.style;$a.left=P+"px";$a.top=D+"px"}var gb=document.getElementById("buttonEditModeText");if(gb){P+=L;Z.Utils.buttonSize(gb,x,A);var cb=gb.style;cb.left=

P+"px";cb.top=D+"px"}var ib=document.getElementById("buttonEditModeIcon");if(ib){P+=L;Z.Utils.buttonSize(ib,x,A);var sb=ib.style;sb.left=P+"px";sb.top=D+"px"}var jb=document.getElementById("buttonEditModeRectangle");if(jb){P+=L;Z.Utils.buttonSize(jb,x,A);var lb=jb.style;lb.left=P+"px";lb.top=D+"px"}var mb=document.getElementById("buttonEditModePolygon");if(mb){P+=L;Z.Utils.buttonSize(mb,x,A);var nb=mb.style;nb.left=P+"px";nb.top=D+"px"}var ob=document.getElementById("buttonEditModeMeasure");if(ob){P+=

L;Z.Utils.buttonSize(ob,x,A);var pb=ob.style;pb.left=P+"px";pb.top=D+"px"}if("markup"!=Z.editMode){var wb=document.getElementById("buttonContainerLabelColorsBackground");if(wb){var rb=wb.style;rb.width=ta+"px";rb.height=xa+"px";rb.left="0px";rb.top="0px"}}var yb=document.getElementById("buttonContainerLabelColors");if(yb){var zb=yb.style;zb.left=fa+"px";zb.top=K+"px"}var tb=document.getElementById("buttonColor0");if(tb){P=g+4+1;Z.Utils.buttonSize(tb,kc,X);var qb=tb.style;qb.left=P+"px";qb.top=F+"px"}var vb=

document.getElementById("buttonColor1");if(vb){P+=$;Z.Utils.buttonSize(vb,kc,X);var Eb=vb.style;Eb.left=P+"px";Eb.top=F+"px"}var xb=document.getElementById("buttonColor2");if(xb){P+=$;Z.Utils.buttonSize(xb,kc,X);var Ib=xb.style;Ib.left=P+"px";Ib.top=F+"px"}var Ab=document.getElementById("buttonColor3");if(Ab){P+=$;Z.Utils.buttonSize(Ab,kc,X);var Kb=Ab.style;Kb.left=P+"px";Kb.top=F+"px"}var Bb=document.getElementById("buttonColor4");if(Bb){P+=$;Z.Utils.buttonSize(Bb,kc,X);var Mb=Bb.style;Mb.left=P+

"px";Mb.top=F+"px"}var Cb=document.getElementById("buttonColor5");if(Cb){P+=$;Z.Utils.buttonSize(Cb,kc,X);var Ob=Cb.style;Ob.left=P+"px";Ob.top=F+"px"}var Hb=document.getElementById("buttonColor6");if(Hb){P+=$;Z.Utils.buttonSize(Hb,kc,X);var Rb=Hb.style;Rb.left=P+"px";Rb.top=F+"px"}var Nb=document.getElementById("buttonColor7");if(Nb){P+=$;Z.Utils.buttonSize(Nb,kc,X);var Ub=Nb.style;Ub.left=P+"px";Ub.top=F+"px"}var Vb=document.getElementById("buttonBorderLg");if(Vb){var Na=Vb.style;Na.width=x+"px";

Na.height=A+"px";Ta?(Na.left=parseFloat(Ua.left)-2+"px",Na.top=parseFloat(Ua.top)-2+"px"):Wa?(Na.left=parseFloat($a.left)-2+"px",Na.top=parseFloat($a.top)-2+"px"):jb?(Na.left=parseFloat(lb.left)-2+"px",Na.top=parseFloat(lb.top)-2+"px"):mb?(Na.left=parseFloat(nb.left)-2+"px",Na.top=parseFloat(nb.top)-2+"px"):ob&&(Na.left=parseFloat(pb.left)-2+"px",Na.top=parseFloat(pb.top)-2+"px")}var ac=document.getElementById("buttonBorderSm");if(ac&&qb){var Jb=ac.style;Jb.width=kc+"px";Jb.height=X+"px";Jb.left=

parseFloat(qb.left)-2+"px";Jb.top=parseFloat(qb.top)-2+"px"}}if("markup"==Z.editMode||"edit"==Z.editMode&&Fb){var Sb=document.getElementById("labelCaptionTextBox"),Tb=document.getElementById("textBoxFor-captionTextElement");if(Sb&&Tb){var Db=Sb.style;Db.width=c+"px";Db.height="15px";Db.left=aa+"px";Db.top=J+3+"px";Db.visibility="markup"==Z.editMode?"hidden":"visible";Z.Utils.setTextNodeStyle(Sb,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none");var Qb=Tb.style;

Qb.width="markup"==Z.editMode?a.w-2*g-4+1+"px":e+r+"px";Qb.height="15px";Qb.left="markup"==Z.editMode?g+"px":aa+c+"px";Qb.top=J+"px";Z.Utils.setTextAreaStyle(Tb,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none",k+"px")}}if("edit"==Z.editMode&&Fb){var Zb=document.getElementById("labelTooltipTextBox"),bc=document.getElementById("textBoxFor-tooltipTextElement");if(Zb&&bc){var Lb=Zb.style;Lb.width=c+"px";Lb.height="15px";Lb.left=aa+"px";Lb.top=U+3+"px";Lb.visibility=

"visible";Z.Utils.setTextNodeStyle(Zb,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none");var kb=bc.style;kb.width=e+r+"px";kb.height="15px";kb.left=aa+c+"px";kb.top=U+"px";Z.Utils.setTextAreaStyle(bc,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none",k+"px")}var cc=document.getElementById("labelClickURLTextBox"),dc=document.getElementById("textBoxFor-clickURLTextElement");if(cc&&dc){var Pb=cc.style;Pb.width=c+"px";Pb.height=

"15px";Pb.left=aa+"px";Pb.top=db+3+"px";Pb.visibility="visible";Z.Utils.setTextNodeStyle(cc,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none");kb=dc.style;kb.width=e+r+"px";kb.height="15px";kb.left=aa+c+"px";kb.top=db+"px";Z.Utils.setTextAreaStyle(dc,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none",k+"px")}var jc=document.getElementById("labelCaptionPositionList");if(jc){var wd=jc.style;wd.width=f+"px";wd.left=aa+"px";wd.top=

W+"px";wd.visibility="visible"}var nc=document.getElementById("labelTargetList");if(nc){var Yb=nc.style;Yb.width=f+"px";Yb.left=aa+f+L-x+"px";Yb.top=W+"px";Yb.visibility="visible"}var ec=document.getElementById("labelScaleTextBox"),gc=document.getElementById("buttonLabelScaleDown"),ic=document.getElementById("buttonLabelScaleUp");if(ec&&gc&&ic){var P=aa+12,Wb=ec.style;Wb.width=c+"px";Wb.height="15px";Wb.left=P+"px";Wb.top=H+3+"px";Wb.visibility="visible";Z.Utils.setTextNodeStyle(ec,"black","verdana",

m+"px","none","normal","normal","normal","normal","1em","left","none");P+=c-10;Z.Utils.buttonSize(gc,x,A);var uc=gc.style;uc.left=P+"px";uc.top=H+"px";P+=L;Z.Utils.buttonSize(ic,x,A);var wc=ic.style;wc.left=P+"px";wc.top=H+"px";P+=L+3}var oc=document.getElementById("labelRolloverTextBox"),zc=document.getElementById("containerFor-checkboxRollover"),pc=document.getElementById("checkboxRollover");if(oc&&zc&&pc){var $b=oc.style;$b.width=c+"px";$b.height="15px";$b.left=P+"px";$b.top=H+3+"px";$b.visibility=

"visible";Z.Utils.setTextNodeStyle(oc,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none");var P=P+(c-1),fc=zc.style;fc.width=1.5*x+"px";fc.height=1.5*A+"px";fc.left=P+3+"px";fc.top=H-3+"px";pc.width=x;pc.height=A}}if("edit"==Z.editMode&&Fb||"markup"==Z.editMode){var Ec=document.getElementById("buttonContainerLabel2");if(Ec){var hc=Ec.style;hc.width=a.w+"px";hc.height=da+"px";hc.left="0px";hc.top=u+"px"}}if("edit"==Z.editMode&&Fb){var Bd=document.getElementById("buttonLabelEdit");

if(Bd){Z.Utils.buttonSize(Bd,x,A);var Hc=Bd.style;Hc.left=ca+"px";Hc.top=Gb+"px"}var sc=document.getElementById("buttonLabelAdd");if(sc){Z.Utils.buttonSize(sc,x,A);var Jc=sc.style;Jc.left=ga+"px";Jc.top=Gb+"px"}}if("edit"==Z.editMode&&Fb||"markup"==Z.editMode){var Xb=document.getElementById("buttonLabelSave");if(Xb){Z.Utils.buttonSize(Xb,x,A);var vc=Xb.style;vc.left=ca-Oa+"px";vc.top=Gb+"px";"markup"!=Z.editMode&&(vc.display="none")}}if("edit"==Z.editMode&&Fb){var mc=document.getElementById("buttonLabelCancel");

if(mc){Z.Utils.buttonSize(mc,x,A);var Ac=mc.style;Ac.left=Xb?ga+"px":ca+"px";Ac.top=Gb+"px";"markup"!=Z.editMode&&(Ac.display="none")}}if("edit"==Z.editMode&&Fb||"markup"==Z.editMode){var Bc=document.getElementById("buttonLabelDelete");if(Bc){Z.Utils.buttonSize(Bc,x,A);var Cc=Bc.style;Cc.left=Xb&&mc?pa-Oa+"px":Xb?ga-Oa+"px":ca-Oa+"px";Cc.top=Gb+"px";"markup"!=Z.editMode&&(Cc.display="none")}}if("markup"==Z.editMode){var Fc=document.getElementById("buttonHelpMarkup");if(Fc){Z.Utils.buttonSize(Fc,x,

A);var Pc=Fc.style;Pc.left=ca+"px";Pc.top=Gb+"px"}}if("edit"==Z.editMode&&Fb||"markup"==Z.editMode){var Sc=document.getElementById("buttonContainerLabelIcons");if(Sc){var Tc=Sc.style;Tc.left=g/2+"px";Tc.top=y+"px"}var Vc=document.getElementById("buttonContainerLabelIconsBackground");if(Vc){var Ad=Vc.style;Ad.width=na+2*g-1+"px";Ad.height=ma+"px";Ad.left="0px";Ad.top="0px"}var Wc=document.getElementById("labelIconList");if(Wc){var Kc=Wc.style;Kc.width=na+"px";Kc.left=g+"px";Kc.top=rIconList+"px"}}if("edit"==

Z.editMode&&Fb){var Xc=document.getElementById("overlayLabelDisable");if(Xc){var xc=Xc.style;xc.width=a.w+"px";xc.height=fe+2*ea+2*A+8+"px";xc.left="0px";xc.top=Va+"px"}var Yc=document.getElementById("overlayLabelDetailDisable");if(Yc&&ja){var lc=Yc.style;lc.width=parseFloat(ja.width)+2+"px";lc.height=parseFloat(ja.height)+2+"px";lc.left=parseFloat(ja.left)+"px";lc.top=parseFloat(ja.top)+"px";lc.display="inline-block"}var $c=document.getElementById("overlayLabelDetailEditableDisable");if($c){var yc=

$c.style;yc.width=parseFloat(ja.width)+"px";yc.height=parseFloat(ja.height)+"px";yc.left=parseFloat(ja.left)+1+"px";yc.top=parseFloat(ja.top)+1+"px"}var bd=document.getElementById("overlayMessageBox"),cd=document.getElementById("textBoxFor-overlayMessageBox");if(bd&&cd){var qc=cd.style;qc.width=la-50+"px";qc.height="25px";qc.left=parseFloat(ja.left)+21+"px";qc.top=parseFloat(ja.top)+45+"px";qc.backgroundColor=s;bd.style.backgroundColor=s}var dd=document.getElementById("overlayLabelNameEditableDisable");

if(dd){var Dc=dd.style;Dc.width=a.w+"px";Dc.height="25px";Dc.left="0px";Dc.top=Va-4+"px"}var gd=document.getElementById("overlayLabelCaptionPositionDisable");if(gd){var Gc=gd.style;Gc.width=a.w/2-12+"px";Gc.height="24.5px";Gc.left=g+1+"px";Gc.top=parseFloat(wd.top)-4+"px"}}if(zd){var Qc=document.getElementById("labelNoteTextBox"),Rc=document.getElementById("textBoxFor-noteTextElement");if(Qc&&wa&&Rc){var tc=Qc.style;tc.width=c+"px";tc.height="15px";tc.left=g+"px";tc.top=Q+3+"px";tc.visibility="visible";

Z.Utils.setTextNodeStyle(Qc,"black","verdana",m+"px","none","normal","normal","normal","normal","1em","left","none");var Lc=wa.style;Lc.width=Za+"px";Lc.left=c+"px";Lc.top=Q+w+"px";Lc.visibility="visible";var ld=a.w-2*g-2,td=Rc.style;td.width=ld+"px";td.height=ba+"px";td.left=g+"px";td.top=R+"px";td.visibility="visible";Z.Utils.setTextAreaStyle(Rc,"black","verdana",h+"px","none","normal","normal","normal","normal","1.5em","left","none","0px");var md=document.getElementById("noteTextElement"),g=ld*

(1-.98);md.style.marginLeft=g+"px";md.style.width="98%";if(null!==Z.editMode){var Zc=document.getElementById("textBoxFor-noteNameTextElement");if(Zc){var Mc=Zc.style;Mc.width=t+"px";Mc.height="15px";Mc.left=c+"px";Mc.top=Q+"px";Z.Utils.setTextAreaStyle(Zc,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none",k+"px")}var nd=document.getElementById("buttonContainerNote");if(nd){var Nc=nd.style;Nc.width=a.w+"px";Nc.height=ia+"px";Nc.left="0px";Nc.top=T+"px"}var ad=document.getElementById("buttonNoteEdit");

if(ad){Z.Utils.buttonSize(ad,x,A);var od=ad.style;od.left=ca+"px";od.top=S+"px"}var ed=document.getElementById("buttonNoteAdd");if(ed){Z.Utils.buttonSize(ed,x,A);var pd=ed.style;pd.left=ga+"px";pd.top=S+"px"}var rc=document.getElementById("buttonNoteSave");if(rc){Z.Utils.buttonSize(rc,x,A);var fd=rc.style;fd.left=ca+"px";fd.top=S+"px";fd.display="none"}var Oc=document.getElementById("buttonNoteCancel");if(Oc){Z.Utils.buttonSize(Oc,x,A);var hd=Oc.style;hd.left=rc?ga+"px":ca+"px";hd.top=S+"px";hd.display=

"none"}var jd=document.getElementById("buttonNoteDelete");if(jd){Z.Utils.buttonSize(jd,x,A);var kd=jd.style;kd.left=rc&&Oc?pa+"px":rc?ga+"px":ca+"px";kd.top=S+"px";kd.display="none"}if("edit"==Z.editMode){var vd=document.getElementById("buttonHelpAnnotation");if(vd){Z.Utils.buttonSize(vd,x,A);var qd=vd.style;qd.left=aa+"px";qd.top=S+"px"}}var rd=document.getElementById("overlayNoteDetailDisable");if(rd){var Ic=rd.style;Ic.width=parseFloat(td.width)+2+"px";Ic.height=parseFloat(td.height)+2+"px";Ic.left=

parseFloat(td.left)+"px";Ic.top=parseFloat(td.top)+"px";Ic.display="inline-block"}var sd=document.getElementById("overlayNoteDisable");if(sd){var Uc=sd.style;Uc.width=a.w+"px";Uc.height=23.5+ba+G+8.5+A+4+"px";Uc.left="0px";Uc.top=Q+"px"}}}}}function nd(){ec("0");oc=!0;if(document.getElementById("buttonLabelSave")&&null!==Z.onAnnotationReady)Z.onAnnotationReady()}function Pa(d){var a=0,b=[];switch(d){case "slide":d=0;for(var c=tb.length;d<c;d++)b[b.length]=parseInt(tb[d].internalID,10);break;case "hotspot":d=

0;for(c=t.length;d<c;d++)b[b.length]=parseInt(t[d].internalID,10);break;case "poi":d=0;for(c=X.length;d<c;d++)b[b.length]=parseInt(X[d].value,10);break;case "label":d=0;for(c=da.length;d<c;d++)b[b.length]=parseInt(da[d].value,10);break;case "labelExternal":d=0;for(c=t.length;d<c;d++)b[b.length]=parseInt(t[d].id,10);break;case "note":for(d=0,c=pa.length;d<c;d++)b[b.length]=parseInt(pa[d].value,10)}b=Z.Utils.arraySortNumericAscending(b);0<b.length&&(a=b[b.length-1]+1);return a.toString()}function ld(d){if(d=

Z.Utils.event(d)){var a=Z.Utils.target(d);d=Z.Utils.relatedTarget(d);var b=va(a);null===b||null===d||"captionTextBox"==d.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=d.id.indexOf("hot")&&-1==d.id.indexOf("hotspotDisplay")||l.setHotspotVisibility(b,!0)}}function je(d){if(d=Z.Utils.event(d))Z.clickZoomAndPanBlock=!0}function Re(d){if(d=Z.Utils.event(d)){var a=Z.Utils.target(d);d=Z.Utils.relatedTarget(d);var b=va(a);null===b||null===d||"captionTextBox"==

d.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||"captionTextBox"==a.id&&-1!=d.id.indexOf("hot")&&-1==d.id.indexOf("hotspotDisplay")||l.setHotspotVisibility(b,!1)}}function ie(d){if(d=Z.Utils.event(d))Z.clickZoomAndPanBlock=!0}function Qe(d){(d=Z.Utils.event(d))&&!d.altKey&&(d=Z.Utils.target(d),d=va(d),d=d.id.substring(3,d.id.length),Z.Utils.arrayIndexOfObjectValue(t,"internalID",d),d=Z.Utils.getResource("z3"),Z.Utils.showMessage(d,!0,null,"center",!0))}function ke(d){(d=Z.Utils.event(d))&&

!d.altKey&&(d=Z.Utils.target(d),d=va(d),d=d.id.substring(3,d.id.length),Z.Utils.arrayIndexOfObjectValue(t,"internalID",d),d=Z.Utils.getResource("z3"),Z.Utils.showMessage(d,!0,null,"center",!0))}function Se(d){var a="0";if(d=Z.Utils.event(d))Z.tourPlaying&&l.tourStop(),d=Z.Utils.target(d),a=d.options[d.selectedIndex].value;isNaN(parseInt(a),10)||(d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a),-1!=d&&(Z.Utils.playAudio(te,t[d].audio),l.zoomAndPanToView(t[d].x,t[d].y,t[d].z/100,t[d].rotation)))}

function ec(d,a,b){X.sort(ib);Z.Utils.updateSelectElement(V,X,d);if("undefined"===typeof d||null===d)0==V.options.length&&(d=Z.Utils.getResource("z27"),Fd("0",d,"center","center","-1","0"),Hd="0"),d="0";else{var c=Z.Utils.arrayIndexOfObjectValue(X,"value",d);-1!=c&&(d=X[c].value)}var c=Z.Utils.arrayIndexOfObjectValue(X,"value",d),e=document.getElementById("poiNameTextElement");e&&-1!=c&&(e.value=X[c].text);Zb(d,a);"markup"!=Z.editMode&&Nc(d,b)}function Zb(d,a){da.sort(ib);Ba="markup"==Z.editMode?

Z.Utils.arrayClone("labels",da,Ba):ad(da,d);Z.Utils.updateSelectElement(ra,Ba,a);if("undefined"===typeof a||null===a)a=0<ra.options.length?ra.options[0].value:null;Id(a)}function Id(d){w=d;xa=ue=null;Ea=!0;var a=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w);I=-1!=a?t[a]:null;if(null!==Z.editMode){if(d=document.getElementById("labelNameTextElement"))d.value=null!==I?I.name:"";if(d=document.getElementById("captionTextElement"))if(d.value="",null!==I){var b=I.captionHTML;"undefined"!==typeof b&&

Z.Utils.isStrVal(b)?d.value=b:d.value=I.caption}if("markup"!=Z.editMode){var c=document.getElementById("labelIconList"),e=document.getElementById("tooltipTextElement"),g=document.getElementById("clickURLTextElement"),f=document.getElementById("labelCaptionPositionList");d=document.getElementById("labelTargetList");b=document.getElementById("checkboxRollover");if(c&&e&&g&&f&&d&&b&&(c.selectedIndex=0,e.value="",g.value="",f.selectedIndex=0,d.selectedIndex=0,b.checked=!1,null!==I)){if("icon"==I.mediaType){var a=

I.media,O=a.lastIndexOf("/")+1,m=a.lastIndexOf(".");-1!=O&&-1!=m&&(a=a.substring(O,m).toLowerCase(),a=Z.Utils.arrayIndexOfObjectValueSubstring(c,"value",a,null,!0),-1!=a&&(c.selectedIndex=a),l.toggleLabelIconPicker(!1))}c=I.captionPosition;Z.Utils.isStrVal(c)&&(a=Z.Utils.arrayIndexOfObjectValue(f,"value",c),-1!=a&&(f.selectedIndex=a));f=I.tooltipHTML;"undefined"!==typeof f&&Z.Utils.isStrVal(f)?e.value=f:e.value=I.tooltip;e=I.clickURL;Z.Utils.isStrVal(e)&&(g.value=e);g=I.urlTarget;Z.Utils.isStrVal(g)&&

(a=Z.Utils.arrayIndexOfObjectValue(d,"value",g),-1!=a&&(d.selectedIndex=a));b.checked=!0==I.rollover}}}null!==I&&(w=I.internalID);K?xc():Wa()}function Nc(d,a){pa.sort(ib);nb=ad(pa,d);Z.Utils.updateSelectElement(wa,nb,a);if("undefined"===typeof a||null===a)a=0<wa.options.length?wa.options[0].value:null;Jd(a)}function Jd(d){d=Z.Utils.arrayIndexOfObjectValue(nb,"value",d);if(null!==Z.editMode){var a=document.getElementById("noteNameTextElement");a&&(a.value=-1!=d?nb[d].text:"")}if(a=document.getElementById("noteTextElement"))a.value=

-1!=d?nb[d].noteText:""}function Ve(d){if(d=Z.Utils.event(d))if(d=Z.Utils.target(d),(d=d.options[d.selectedIndex].value)&&!isNaN(parseInt(d),10)&&(l.saveEditsPOI(!0),ec(d),d=Z.Utils.arrayIndexOfObjectValue(X,"value",d),-1!=d)){var a=Z.imageW/2,b=Z.imageH/2,c;c=X[d].x;a="center"==c?a:parseFloat(c);c=X[d].y;b="center"==c?b:parseFloat(c);c=X[d].z;d="-1"==c?Z.fitZ:parseFloat(c);l.z542AnnotationPanel()?l.zoomAndPanToView(a,b,d/100):l.setView(a,b,d/100)}}function ve(d){var a;if(d=Z.Utils.event(d))a=Z.Utils.target(d),

a=a.options[a.selectedIndex].value;a&&!isNaN(parseInt(a,10))&&(l.saveEditsLabel(!0),Id(a),w=a,Ea=!0,a=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w),I=-1!=a?t[a]:null,"view"!=Z.labelMode&&l.setEditModeLabel(I.mediaType,!0,I.media,!0),d&&l.goToLabelByID(null,I))}function Ue(d){l.toggleLabelIconPicker(!1);d=Z.Utils.event(d);d=Z.Utils.target(d);d=d[d.selectedIndex].value;"External Graphics File"!=d&&"markup"!=Z.editMode&&"editLabel"==Z.editing&&"shim"!=d&&(d=Z.annotationFolder+"/"+d,l.modifyHotspot(w,

"mediaType","icon",!0,!0),l.modifyHotspot(w,"media",d,!1,!0))}function qe(d){d=Z.Utils.event(d);d=Z.Utils.target(d);d=labelCaptionPositionListDP[d.selectedIndex].value;"shim"!==d&&l.modifyHotspot(w,"captionPosition",d,!1,!0)}function Te(d){d=Z.Utils.event(d);d=Z.Utils.target(d);d=labelTargetListDP[d.selectedIndex].value;"shim"!==d&&l.modifyHotspot(w,"urlTarget",d,!1,!0)}function re(d){if(d=Z.Utils.event(d))d=Z.Utils.target(d),l.modifyHotspot(w,"rollover",d.checked,!1,!0)}function we(d){var a;if(d=

Z.Utils.event(d))d=Z.Utils.target(d),a=d.options[d.selectedIndex].value;a&&!isNaN(parseInt(a,10))&&(l.saveEditsNote(!0),Jd(a))}function nc(d){if(d=Z.Utils.event(d))if(d=Z.Utils.target(d))Kd(d.id),Z.Utils.removeEventListener(document,"keydown",Bb),Z.Utils.removeEventListener(document,"keyup",Bb),Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}function Yb(d){if(d=Z.Utils.event(d)){if(d=Z.Utils.target(d)){if(0==

ra.options.length&&("labelNameTextElement"==d.id||"captionTextElement"==d.id||"tooltipTextElement"==d.id||"clickURLTextElement"==d.id)){d=parseInt(Z.Utils.getResource("z6"),10);Z.Utils.showMessage(Z.Utils.getResource("z4"),!0,d,"center",!0);return}var a=null;switch(d.id){case "poiNameTextElement":var b=V.selectedIndex,c=V[b].value;X[b].text=d.value;X.sort(ib);Z.Utils.updateSelectElement(V,X,c);break;case "labelNameTextElement":b=ra.selectedIndex;c=ra[b].value;da[b].text=d.value;Ba[b].text=d.value;

da.sort(ib);Ba.sort(ib);Z.Utils.updateSelectElement(ra,Ba,c);b=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w);-1!=b&&(t[b].name=d.value);break;case "captionTextElement":b=d.value;a=-1!=b.indexOf("<CAPTION>")?"captionHTML":"caption";break;case "tooltipTextElement":a=b&&-1!=b.indexOf("<TOOLTIP>")?"tooltipHTML":"tooltip";break;case "clickURLTextElement":a="clickURL";break;case "noteNameTextElement":b=wa.selectedIndex;c=wa[b].value;pa[b].text=d.value;nb[b].text=d.value;pa.sort(ib);nb.sort(ib);Z.Utils.updateSelectElement(wa,

nb,c);break;case "noteTextElement":pa[wa.selectedIndex].noteText=d.value,nb[wa.selectedIndex].noteText=d.value}null!==a&&l.modifyHotspot(w,a,d.value,!1,!0)}Z.Utils.addEventListener(document,"keydown",Bb);Z.Utils.addEventListener(document,"keyup",Bb);Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault);Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)}}function Kd(d){if("markup"==Z.editMode){var a=document.getElementById("labelNameTextElement"),b=document.getElementById("captionTextElement");

if(a&&b)switch(d){case "labelNameTextElement":labelNameTextElement.tabIndex=1;captionTextElement.tabIndex=2;break;case "captionTextElement":labelNameTextElement.tabIndex=2,captionTextElement.tabIndex=1}}else if(null!==Z.editMode){var c=document.getElementById("poiNameTextElement"),a=document.getElementById("labelNameTextElement"),b=document.getElementById("captionTextElement"),e=document.getElementById("tooltipTextElement"),g=document.getElementById("clickURLTextElement"),f=document.getElementById("noteNameTextElement"),

l=document.getElementById("noteTextElement");c&&a&&b&&e&&g&&f&&l&&(c.tabIndex="",a.tabIndex="",b.tabIndex="",e.tabIndex="",g.tabIndex="",f.tabIndex="",l.tabIndex="");switch(d){case "poi":poiNameTextElement.tabIndex=1;break;case "label":labelNameTextElement.tabIndex=1;captionTextElement.tabIndex=2;tooltipTextElement.tabIndex=3;clickURLTextElement.tabIndex=4;break;case "note":noteNameTextElement.tabIndex=1;noteTextElement.tabIndex=2;break;case "noteNameTextElement":noteNameTextElement.tabIndex=1;noteTextElement.tabIndex=

2;break;case "noteTextElement":noteNameTextElement.tabIndex=2;noteTextElement.tabIndex=1;break;case "clickURLTextElement":labelNameTextElement.tabIndex=2;captionTextElement.tabIndex=3;tooltipTextElement.tabIndex=4;clickURLTextElement.tabIndex=1;break;default:labelNameTextElement.tabIndex=1,captionTextElement.tabIndex=2,tooltipTextElement.tabIndex=3,clickURLTextElement.tabIndex=4}}}function ad(d,a){for(var b=[],c=0,e=d.length;c<e;c++)d[c].poiID==a&&(b[b.length]=d[c]);return b}function Kc(d,a,b,c){if(Z.useCanvas&&

"polygon"==d.media){if(d.visibility||d.rollover||c){a=d.internalID;if("undefined"!==typeof d.polygonPts&&null!==d.polygonPts&&0<d.polygonPts.length){targetCtx="view"==Z.labelMode||a!==w?Le:ta;targetCtx.save();targetCtx.translate((d.x-Z.imageX)*Z.imageZ,(d.y-Z.imageY)*Z.imageZ);var e=ia/kb;c=l.getZoom();var g=d.xScale/100/e*c,e=d.yScale/100/e*c;1!=g&&1!=e&&targetCtx.scale(g,e);"freehand"==d.mediaType?targetCtx.lineWidth=$f/c:(targetCtx.lineWidth=ag/c,targetCtx.fillStyle=d.fillColor);targetCtx.strokeStyle=

d.lineColor;var g=d.polygonPts.slice(0),e=d.x,f=d.y;"measure"!=Z.labelMode||d.polyClosed||Ea||"undefined"===typeof b||null===b||(g[g.length]={x:b.x,y:b.y});targetCtx.beginPath();var h=g[0].x-e,m=g[0].y-f;targetCtx.moveTo(h,m);for(var k=1,G=g.length;k<G;k++){var q=g[k].x-e,N=g[k].y-f;targetCtx.lineTo(q,N)}"freehand"!=d.mediaType&&(d.polyClosed||sb&&0==xa)&&(d.polyClosed&&(targetCtx.lineTo(h,m),targetCtx.closePath()),d.fillVisible&&(d.polyClosed||a!=w)&&(targetCtx.globalAlpha=Dg,targetCtx.fill()),targetCtx.globalAlpha=

1);targetCtx.stroke();if((null===Z.editMode&&"measure"==Z.labelMode||"addLabel"==Z.editing||"editLabel"==Z.editing)&&("rectangle"==Z.labelMode&&4==g.length||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&d.internalID==w&&"undefined"!==typeof d&&null!==d&&"freehand"!=d.mediaType)for(d=1/c,k=0,G=g.length;k<G;k++)q=g[k].x-e,N=g[k].y-f,Ld(q,N,!Ea&&0==k,d);targetCtx.restore()}null===a||"undefined"===typeof b||K||zc(a,b)}}else bg||(Z.Utils.showMessage(Z.Utils.getResource("z9")),bg=!0)}function Ld(d,a,

b,c){var e=We*c;ta.lineWidth=Eg*c;ta.strokeStyle=of;ta.fillStyle=b?Fg:Gg;ta.beginPath();ta.arc(d,a,e,0,2*Math.PI,!1);ta.closePath();ta.globalAlpha=.5;ta.fill();ta.globalAlpha=1;ta.stroke()}function Md(d,a,b){Z.Utils.clearDisplay(ya);var c=new Ka,e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w);if(-1!=e){e=t[e];Kc(e,c);var c=l.getZoom(),g=e.polygonPts,f=g[g.length-1],g=(f.x-Z.imageX)*c,c=(f.y-Z.imageY)*c;e.polyClosed||(ta.lineWidth=ag,ta.strokeStyle=lineStrokeColor,ta.beginPath(),ta.moveTo(g,c),

ta.lineTo(d,a),ta.closePath(),ta.stroke());"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===w||zc(w,b,!0)}}function xc(d){Sa&&Z.Utils.clearDisplay(Sa);ya&&Z.Utils.clearDisplay(ya);if("inline-block"==Wb.display)for(var a=new Ka,b=0,c=t.length;b<c;b++){var e=t[b];if("polygon"==e.media&&e.visibility&&(d||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof w||null===w||w!==b)){var g=e.x,f=e.y;(!Z.hotspotsDrawOnlyInView||g+Wc>a.box.l&&g-Wc<a.box.r&&f+Wc>

a.box.t&&f-Wc<a.box.b)&&Kc(e,a,null,d)}}}function Nd(d,a,b,c,e){ta.lineWidth=$f;ta.strokeStyle=lineStrokeColor;ta.beginPath();ta.moveTo(d,a);ta.lineTo(b,c);ta.closePath();ta.stroke();ta.strokeStyle=of;2<Z.Utils.calculatePointsDistance(d,a,b,c)&&Ya(w,!1,e);zc(w,e)}function xe(d,a,b){bd=!0;Z.Utils.clearDisplay(ya);var c=new Ka;d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",d);if(-1!=d){d=t[d];d.polygonPts[a]=b;var e=d.polygonPts.length;"rectangle"==Z.labelMode&&4==e&&(d.polygonPts=Ac(d.polygonPts,

a));Kc(d,c,b)}}function Ac(d,a){var b=d[a].x,c=d[a].y,e=a-1;0>e&&(e+=4);var g=a+1;3<g&&(g-=4);1==e||3==e?(d[e].x=b,d[g].y=c):(d[g].x=b,d[e].y=c);return d}function Od(d,a){d=Z.Utils.event(d);if("undefined"===typeof w||null===w)Ya(null,!0,a);else{var b=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w);-1!=b&&(b=t[b],ue=b.polygonPts,b=b.polyClosed,null===ue?(Ya(w,!0,a),zc(w,a)):(xa=Pd(d,a),b?null===xa&&Ya(null,!0,a):null===xa?d.altKey?(Ya(w,!1,a),pc(w,!1)):Ya(w,!1,a):0==xa&&2<ue.length&&!Ea&&pc(w,!0)))}(!d.altKey||

"measure"==Z.labelMode&&null!==w)&&zc(w,a)}function Ya(d,a,b){var c,e=!1,g=!1;"undefined"===typeof d||null===d||"addLabel"==Z.editing&&Ea&&("polygon"==Z.labelMode||"measure"==Z.labelMode)?(null===Z.editMode&&"measure"==Z.labelMode&&0<t.length&&l.deleteAllMeasureHotspots(),c="freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode?Z.labelMode:null,e=[],e[0]={x:b.x,y:b.y},g="undefined"!==typeof V&&0<V.options.length?g=V.options[V.selectedIndex].value:1,d=(100*

l.getZoom()).toString(),l.createHotspotFromParameters(null,null,c,"polygon",null,b.x.toString(),b.y.toString(),d,null,null,null,null,null,null,null,cd,null,lineStrokeColor,null,null,null,null,null,"8","0",null,g,null,null,"0",e),c=t[t.length-1],w=c.internalID,e=c,g=c.poiID,Z.measureVisible&&null===Z.editMode||(d=Z.Utils.arrayIndexOfObjectValue(da,"value",w),-1!=d?(da[d]={text:e.name,value:w,poiID:g},d=Z.Utils.arrayIndexOfObjectValue(Ba,"value",w),-1!=d&&(Ba[d]={text:e.name,value:w,poiID:g},$b||Z.Utils.updateSelectElement(ra,

Ba))):(da[da.length]={text:e.name,value:w,poiID:g},Ba[Ba.length]={text:e.name,value:w,poiID:g}),!$b&&ra&&(e=da[da.length-1],Zb(e.poiID,e.value))),e=g=!0):(d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",d),-1!=d&&(c=t[d],d=c.polygonPts?c.polygonPts:[],d[d.length]={x:b.x,y:b.y},c.polyClosed=!1,c.polygonPts=d,c.saved=!1));"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof c||null===c||"freehand"==c.mediaType||(c=l.getZoom(),Ld((b.x-Z.imageX)*c,(b.y-Z.imageY)*

c,e,1));"rectangle"!=Z.labelMode&&"freehand"!=Z.labelMode&&(Ea=!1);g?Wa():a&&xc()}function Pd(d,a){for(var b=null,c=(We+1)/Z.imageZ,e=0,g=t.length;e<g;e++)if("polygon"==t[e].media&&t[e].internalID==w){var f=t[e].polygonPts;if("undefined"!==typeof f&&null!==f)for(var l=0,m=f.length;l<m;l++)Z.Utils.calculatePointsDistance(a.x,a.y,f[l].x,f[l].y)<c&&(b=l)}return b}function pc(d,a){Z.Utils.clearDisplay(ya);var b=Z.Utils.arrayIndexOfObjectValue(t,"internalID",d);t[b].polyClosed=a;Ea=!0;if(-1!=b){var b=

t[b],c=Z.Utils.polygonCenter(b.polygonPts,b.polyClosed);b.x=c.x;b.y=c.y;"freehand"!=Z.labelMode&&""==b.caption&&"undefined"===typeof b.captionHTML&&(c=Z.Utils.getResource("z45"),b.caption=c+d.toString());c=new Ka;wc(b,c)}}function zc(d,a){var b=Z.Utils.arrayIndexOfObjectValue(t,"internalID",d);if(-1!=b){b=t[b];if("measure"==Z.labelMode&&"measure"==b.mediaType)md(b,a);else if("freehand"!=Z.labelMode&&""==b.caption&&"undefined"===typeof b.captionHTML){var c=Z.Utils.getResource("z45");b.caption=c+d.toString()}var e=

b.polyClosed,c=b.polygonPts?b.polygonPts.slice(0):[],e=Z.Utils.polygonCenter(c,e,a),c=Z.Utils.polygonDimensions(c,a);b.x=e.x;b.y=e.y;b.iW=c.x;b.iH=c.y;c=new Ka;if("freehand"!=b.mediaType||sb)if(K){var g=e=null;(e=document.getElementById("hot"+b.id))&&(g=Z.Utils.getChildElementByID(e,"captionTextBox"));e=g;g=Z.Utils.polygonDimensions(b.polygonPts);c=c.currentZ/("polygon"!=b.media?b.z/100:1);le(b,e,b.xScale/100*c*g.x,b.yScale/100*c*g.y)}else Pe(b,c,a);else Wa()}}function La(d,a){Z.editing=a;var b=null!==

a?"none":"inline-block",c=null!==a||"markup"==Z.editMode?"inline-block":"none";switch(d){case "poi":var e=document.getElementById("buttonPOIAdd"),g=document.getElementById("buttonPOIEdit"),f=document.getElementById("buttonPOIDelete"),l=document.getElementById("buttonPOICancel"),m=document.getElementById("buttonPOISave");break;case "labelPartial":e=document.getElementById("buttonLabelAdd");g=document.getElementById("buttonLabelEdit");f=document.getElementById("buttonLabelDelete");l=document.getElementById("buttonLabelCancel");

m=document.getElementById("buttonLabelSave");break;case "label":e=document.getElementById("buttonLabelAdd");g=document.getElementById("buttonLabelEdit");f=document.getElementById("buttonLabelDelete");l=document.getElementById("buttonLabelCancel");m=document.getElementById("buttonLabelSave");break;case "note":e=document.getElementById("buttonNoteAdd"),g=document.getElementById("buttonNoteEdit"),f=document.getElementById("buttonNoteDelete"),l=document.getElementById("buttonNoteCancel"),m=document.getElementById("buttonNoteSave")}e&&

(Z.Utils.setButtonDefaults(e),e.style.display=b);g&&(Z.Utils.setButtonDefaults(g),g.style.display=b);f&&(Z.Utils.setButtonDefaults(f),f.style.display=c);l&&(Z.Utils.setButtonDefaults(l),l.style.display=c);m&&(Z.Utils.setButtonDefaults(m),m.style.display=c);var b=document.getElementById("overlayPOIDisable"),c=document.getElementById("overlayLabelDisable"),e=document.getElementById("overlayLabelDetailDisable"),g=document.getElementById("overlayLabelDetailEditableDisable"),f=parseFloat(Z.Utils.getResource("z82")),

l=Z.Utils.getResource("z83NOALPHA"),m=document.getElementById("textBoxFor-overlayMessageBox"),h=document.getElementById("overlayLabelNameEditableDisable"),k=document.getElementById("overlayLabelCaptionPositionDisable"),G=document.getElementById("overlayNoteDisable"),q=document.getElementById("overlayNoteDetailDisable"),N=document.getElementById("textBoxFor-poiNameTextElement"),s=document.getElementById("textBoxFor-labelNameTextElement"),p=document.getElementById("textBoxFor-noteNameTextElement"),

ba=document.getElementById("noteTextElement");if(b&&c&&e&&g&&h&&k&&q&&N&&s&&p&&ba)if(null===a)Z.Utils.addEventListener(document,"keydown",Bb),Z.Utils.addEventListener(document,"keyup",Bb),b.style.display="none",c.style.display="none",e.style.display="inline-block",g.style.display="none",Z.Utils.setOpacity(g,f,l),m&&(m.style.display="none"),h.style.display="none",k.style.display="none",G.style.display="none",q.style.display="inline-block",N.style.visibility="hidden",s.style.visibility="hidden",p.style.visibility=

"hidden",ba.readOnly=!0;else{switch(d){case "poi":N.style.visibility="visible";c.style.display="inline-block";e.style.display="none";G.style.display="inline-block";q.style.display="none";break;case "labelPartial":e.style.display="none";g.style.display="inline-block";Z.Utils.setOpacity(g,f,l);m&&(m.style.display="inline-block");h.style.display="inline-block";k.style.display="text"==Z.labelMode?"inline-block":"none";s.style.visibility="visible";b.style.display="inline-block";G.style.display="inline-block";

q.style.display="none";break;case "label":e.style.display="none";g.style.display="none";Z.Utils.setOpacity(g,f,l);m&&(m.style.display="none");h.style.display="none";k.style.display="text"==Z.labelMode?"inline-block":"none";s.style.visibility="visible";b.style.display="inline-block";G.style.display="inline-block";q.style.display="none";break;case "note":b.style.display="inline-block",c.style.display="inline-block",e.style.display="none",q.style.display="none",p.style.visibility="visible",ba.readOnly=

!1}Kd(d)}}function eb(d,a){switch(a){case "pois":"save"==d?pf=Z.Utils.arrayClone("pois",X,pf):X=Z.Utils.arrayClone("pois",pf,X);break;case "labels":var b=Z.Utils.arrayIndexOfObjectValue(t,"internalID",od);if("save"==d)I&&I.polygonPts&&(Xe=Z.Utils.arrayClone("polygon",I.polygonPts,Xe)),qf=Z.Utils.arrayClone("labels",da,qf),rf=Z.Utils.arrayClone("hotspots",t,rf),I=-1!=b?t[b]:null;else if(da=Z.Utils.arrayClone("labels",qf,da),t=Z.Utils.arrayClone("hotspots",rf,t),I=-1!=b?t[b]:null)0<Xe.length?I.polygonPts=

Z.Utils.arrayClone("polygon",Xe,I.polygonPts):"polygon"!=I.media&&Z.Utils.arrayClear(I.polygonPts);break;case "notes":"save"==d?sf=Z.Utils.arrayClone("notes",pa,sf):pa=Z.Utils.arrayClone("notes",sf,pa)}}function qc(d){var a=Mc(),b=ja(a,"root"),c=ja(a,"setup");d=d.getElementsByTagName("SETUP")[0];var e;e=d.getAttribute("PANELPOSITION");Z.Utils.isStrVal(e)&&c.setAttribute("PANELPOSITION",e);e=d.getAttribute("INITIALVISIBILITY");Z.Utils.isStrVal(e)&&c.setAttribute("INITIALVISIBILITY",e);e=d.getAttribute("POIVISIBILITY");

Z.Utils.isStrVal(e)&&c.setAttribute("POIVISIBILITY",e);e=d.getAttribute("LABELVISIBILITY");Z.Utils.isStrVal(e)&&c.setAttribute("LABELVISIBILITY",e);e=d.getAttribute("NOTEVISIBILITY");Z.Utils.isStrVal(e)&&c.setAttribute("NOTEVISIBILITY",e);e=d.getAttribute("MINSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&c.setAttribute("MINSCALE",e);e=d.getAttribute("MAXSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&c.setAttribute("MAXSCALE",e);b.appendChild(c);d=0;for(c=

X.length;d<c;d++){e=ja(a,"poi");var g=X[d],f=Z.Utils.stringReadable(escape(g.text));Z.Utils.isStrVal(f)&&e.setAttribute("NAME",f);f=g.value;Z.Utils.isStrVal(f)&&e.setAttribute("INTERNALID",f);var f=g.id;Z.Utils.isStrVal(f)&&e.setAttribute("ID",f);f=g.x;Z.Utils.isStrVal(f)&&!isNaN(parseFloat(f))&&e.setAttribute("X","center"==f?imageCenterX.toString():f);f=g.y;Z.Utils.isStrVal(f)&&!isNaN(parseFloat(f))&&e.setAttribute("Y","center"==f?imageCenterY.toString():f);f=g.z;Z.Utils.isStrVal(f)&&!isNaN(parseFloat(f))&&

e.setAttribute("ZOOM",f);f=g.user;Z.Utils.isStrVal(f)&&e.setAttribute("USER",f);f=g.date;Z.Utils.isStrVal(f)&&e.setAttribute("DATE",f);b.appendChild(e);labelListTempDP=ad(da,X[d].value);if(0<labelListTempDP.length){g=a.createElement("LABELS");e.appendChild(g);for(var f=0,h=labelListTempDP.length;f<h;f++){var m=ja(a,"label"),k=Z.Utils.arrayIndexOfObjectValue(t,"internalID",labelListTempDP[f].value);-1!=k&&(m=l.convertLabelToXML(t[k]));g.appendChild(m)}}noteListTempDP=ad(pa,X[d].value);if(0<noteListTempDP.length)for(g=

a.createElement("NOTES"),e.appendChild(g),e=0,f=noteListTempDP.length;e<f;e++)h=ja(a,"note"),m=noteListTempDP[e],k=Z.Utils.stringReadable(escape(m.text)),Z.Utils.isStrVal(k)&&h.setAttribute("NAME",k),k=m.value,Z.Utils.isStrVal(k)&&h.setAttribute("INTERNALID",k),k=Z.Utils.stringReadable(escape(m.noteText)),Z.Utils.isStrVal(k)&&h.setAttribute("TEXT",k),k=m.poiID,Z.Utils.isStrVal(k)&&h.setAttribute("POIID",k),k=m.id,Z.Utils.isStrVal(k)&&h.setAttribute("ID",k),k=m.user,Z.Utils.isStrVal(k)&&h.setAttribute("USER",

k),k=m.date,Z.Utils.isStrVal(k)&&h.setAttribute("DATE",k),g.appendChild(h)}return a}function ye(d){var a;this.id=d.getAttribute("ID");this.name=d.getAttribute("NAME");this.internalID=d.getAttribute("INTERNALID");isNaN(parseInt(this.internalID,10))&&(this.internalID=Pa("slide"));this.media=d.getAttribute("MEDIA");this.audio=d.getAttribute("AUDIO");Z.Utils.isStrVal(this.audio)&&(Z.audioContent=!0);this.initialX=d.getAttribute("INITIALX");this.initialY=d.getAttribute("INITIALY");this.initialZoom=d.getAttribute("INITIALZOOM");

this.minZoom=d.getAttribute("MINZOOM");this.maxZoom=d.getAttribute("MAXZOOM");a=parseFloat(d.getAttribute("SHOWFOR"));this.showFor=isNaN(a)?0:a;this.transition=d.getAttribute("TRANSITION");a=parseFloat(d.getAttribute("CHANGEFOR"));this.changeFor=isNaN(a)?0:a}function ze(d){if(d=Z.Utils.event(d))if(Z.slideshowPlaying&&l.slideshowStop(),d=Z.Utils.target(d),"null"!=d.options[d.selectedIndex].value){var a=Z.Utils.isStrVal(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0;l.goToSlide(d.selectedIndex-a)}}

function Qd(d){if("undefined"!==typeof lb&&null!==lb&&0<lb.length){var a=Z.slideshowPlaying?tb[Bc].showFor:0;Z.Utils.isStrVal(tb[Bc].audio)&&(a+=500);var b=dd(Bc,d,tb.length-1);null!==b?Z.Utils.functionCallWithDelay(function(){l.goToSlide(b)},a):l.slideshowStop()}}function dd(d,a,b){for(var c=cg||dg,e="Skip";"Skip"==e;)"next"==a?(d+=1,d>b&&(d=c?0:null)):(d-=1,0>d&&(d=c?b:null)),e=t?null!==d?t[d].transition:null:tb?null!==d?tb[d].transition:null:null;return d}function Rd(d){Z.preventDupCall||(Z.priorX=

Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof d&&null!==d}function Gc(d,a,b,c,e){l.zoomAndPanAllStop();if("undefined"===typeof d||null===d)d=Z.imageW/2;if("undefined"===typeof a||null===a)a=Z.imageH/2;"undefined"===typeof b||null===b?b=Z.fitZ:1<b&&(b/=100);if("undefined"===typeof c||null===c)c=Z.imageR;b=ba(b);c=N(c);d=Oa(d,a,b,c,"image");Z.imageX=d.x;Z.imageY=d.y;Z.imageZ=b;c!=Z.imageR&&Z.Utils.rotateElement(T,c);Z.imageR=c;l.updateView(!0);

"function"===typeof e&&e()}function Sd(){if(Cc&&(0!=Hb||0!=Rb||0!=Ib)){var d=Hb,a=Rb,b=Ib,c=!1,e=!1,g=l.getZoom();0!=b&&(g=x(na,ia*(1+b)),g=ba(g),g!=Z.imageZ&&(c=e=Dc(g)));if(0!=d||0!=a)d=parseFloat(T.left)+d,a=parseFloat(T.top)+a,a=Oa(d,a,g,Z.imageR,"container"),T.left=Math.round(a.x)+"px",T.top=Math.round(a.y)+"px",e=!0;0==eg%2&&(Oe(),Wa(),c&&(G(),Gb()),e&&Va());Cc=window.setTimeout(Sd,tf)}}function Td(d,a,b,c,e,g,f){Ae++;var h=e/g,m=Ae*h,k=Z.Utils.easing(Z.imageX,d,m,e),q=Z.Utils.easing(Z.imageY,

a,m,e),N=Z.Utils.easing(Z.imageZ,b,m,e),m=Z.Utils.easing(Z.imageR,c,m,e),q=db(k,q,N),k=q.x,q=q.y,s=!1,p=!1;if(parseFloat(T.left)!=k||parseFloat(T.top)!=q)T.left=k+"px",T.top=q+"px",p=!0;N!=Z.imageZ&&(Dc(N),s=p=!0);m!=Z.imageR&&(Z.Utils.rotateElement(T,m),Z.imageR=m,p=!0);Wa();0==Ae%2&&(s&&(G(),Gb()),p&&Va());Ae<g+1?ed=window.setTimeout(function(){Td(d,a,b,c,e,g,f)},h):(Z.interactivityOff=!1,ed&&(window.clearTimeout(ed),ed=null),l.updateView(),l.toggleWatermarks(!0),"function"===typeof f&&f())}function Ud(){eg=

Ib=Rb=Hb=0;Cc&&(window.clearTimeout(Cc),Cc=null)}function Dc(d){var a=!1,b=g(na,d);if(b!=ia){ia=b;var a=b/kb,c=Ha*a,e=Da*a,f=(Ha-c)/2,l=(Da-e)/2;b<kb&&(b=Oa(parseFloat(T.left),parseFloat(T.top),d,Z.imageR,"container"),T.left=b.x+"px",T.top=b.y+"px");Z.useCanvas?(Ia.width=c+"px",Ia.height=e+"px",Ia.left=f+"px",Ia.top=l+"px",Sa&&(dc.width=c+"px",dc.height=e+"px",dc.left=f+"px",dc.top=l+"px"),ya&&(Pb.width=c+"px",Pb.height=e+"px",Pb.left=f+"px",Pb.top=l+"px"),Tb?(Lb=d=g(za,d),b=d/tierBackfillScalePrior,

d=fc*b,b*=Ec,a=ac+(fc-d)/2,c=Jb+(Ec-b)/2,fa.width=d+"px",fa.height=b+"px",fa.left=a+"px",fa.top=c+"px"):(c=fc*a,e=Ec*a,f=ac+Z.imageX*(1-a)*Z.imageZ,l=Jb+Z.imageY*(1-a)*Z.imageZ,fa.width=c+"px",fa.height=e+"px",fa.left=f+"px",fa.top=l+"px")):(C(ga,na,ob,"centerOut",!1,"Scaling: non-canvas zoom"),Tb?(d=fg,fc=Ha*d,Ec=Da*d,ac=-(Ha/d),Jb=-(Da/d),uf=Vb*d,vf=Na*d,aa.width=fc,aa.height=Ec,fa.width=aa.width+"px",fa.height=aa.height+"px"):(b=Nb[za],aa.width=vb[za],aa.height=b,b=Z.imageY*d,ac=Vb-Z.imageX*d,

Jb=Na-b),fa.left=ac+"px",fa.top=Jb+"px",C(aa,za,Rc,"simple",!1,"Scaling: non-canvas zoom - backfill"));a=!0}return a}function Vd(){if(pd&&0!=bc){var d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w);if(-1!=d){var d=t[d],a=d.yScale*(1+bc);l.modifyHotspot(w,"xScale",d.xScale*(1+bc),!0,!0);l.modifyHotspot(w,"yScale",a,!1,!0);pd=window.setTimeout(Vd,gg)}}}function Be(){l.toggleFullViewMode(!1)}function Tc(d,a,b){"undefined"!==typeof Ye&&null===Ye&&"undefined"!==typeof Ze&&null===Ze?(Z.Utils.showMessage(Z.Utils.getResource("z11"),

!1,null,"center"),Ye=window.setTimeout(function(){Wd(ga,d,a,b);Z.Utils.hideMessage();Ye=null;Z.Utils.showMessage(Z.Utils.getResource("z10"),!1,null,"center");Ze=window.setTimeout(function(){Wd(aa,d,a,b);Z.Utils.hideMessage();Ze=null},1)},1)):void 0!==typeof Ce&&(null!==Ce&&(window.clearTimeout(Ce),Ce=null),Ce=window.setTimeout(function(){Tc(d,a)},200))}function Wd(d,a,b,c){c=(c?"viewportDisplay"==d.id?yb:mf:d.getContext("2d")).getImageData(0,0,d.width,d.height);a="undefined"!==typeof a&&null!==a?

Z.Utils.filterImage(c,a,b):Uc(c,a,b);d.getContext("2d").putImageData(a,0,0)}function Uc(d){for(var a=0,b=rb.length;a<b;a++){var c=rb[a].filter,e=rb[a].value;0!=e&&(d=Z.Utils.filterImage(d,c,e))}return d}function Xd(d){Z.imageFiltersVisible&&sd&&Db&&sc&&("frontfill"==d?(Z.Utils.clearDisplay(Db),Db.width=ga.width,Db.height=ga.height,Yd.width=Ia.width,Yd.height=Ia.height,yb.translate(Vb,Na),yb.scale(ia,ia)):(Z.Utils.clearDisplay(sc),sc.width=aa.width,sc.height=aa.height,wf.width=fa.width,wf.height=fa.height))}

function Bb(d){if(!Z.interactivityOff&&Z.keys&&(d=Z.Utils.event(d),d.altKey||l.zoomAndPanAllStop(!1,!0),d)){var a=d.type;d=d.keyCode;if("keydown"==a)switch(d){case 90:l.zoom("out");break;case 17:l.zoom("out");break;case 65:l.zoom("in");break;case 16:l.zoom("in");break;case 37:l.pan("left");break;case 38:l.pan("up");break;case 40:l.pan("down");break;case 39:l.pan("right");break;case 27:Z.fullView?l.toggleFullViewMode(!1):l.reset();break;case 190:Z.rotationVisible&&l.rotateClockwise();break;case 188:Z.rotationVisible&&

l.rotateCounterwise()}else"keyup"==a&&(90==d||17==d||65==d||16==d?l.zoom("stop"):37==d||39==d?l.pan("horizontalStop"):38!=d&&40!=d||l.pan("verticalStop"))}}function sa(d){d=Z.Utils.event(d);var a=d.type;if(d&&a&&!("mouseover"!=a&&"mouseout"!=a&&Z.interactivityOff||"mousedown"==a&&(Z.interactivityOff||Z.coordinatesVisible&&d.altKey)||Z.Utils.isRightMouseButton(d))){Z.mobileDevice&&"touchmove"!=a&&"gesturechange"!=a&&d.preventDefault();"mousedown"==a?window.setTimeout(function(){l.zoomAndPanAllStop(!1,

!0)},1):"touchstart"!=a&&"gesturestart"!=a||l.zoomAndPanAllStop(!1,!0);switch(a){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault));break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Utils.addEventListener(document,"keydown",Bb);Z.Utils.addEventListener(document,"keyup",Bb);Z.Utils.addEventListener(document,

"mousemove",sa);Z.Utils.addEventListener(ea,"mouseup",sa);Z.Utils.addEventListener(document,"mouseup",sa);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",sa);Z.Utils.removeEventListener(ea,"mouseup",sa);Z.Utils.removeEventListener(document,"mouseup",sa);break;case "mouseout":Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault)}$e(d);if("mousedown"==a||"mousemove"==a)return!1}}function $e(d){d=

Z.Utils.event(d);var a=d.type;if(d&&a){var b,c,e,g;"touchstart"==a||"touchmove"==a||"touchend"==a||"touchcancel"==a?(b=Z.Utils.getFirstTouch(d),"undefined"!==typeof b&&(c=b.target,g=new Z.Utils.Point(b.pageX,b.pageY))):(c=Z.Utils.target(d),e=Z.Utils.relatedTarget(d),g=Z.Utils.getMousePosition(d));"DOMMouseScroll"==a&&(a="mousewheel");var f=l.getZoom(),h=(100*f).toString(),m;"undefined"!==typeof g&&null!==g&&(m=l.getClickCoordsInImage(d,f,g));switch(a){case "mouseover":m=Z.Utils.nodeIsInViewer(c);

d=Z.Utils.nodeIsInViewer(e);m&&d||(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.RulerDisplay&&Z.rulerVisible&&Z.Ruler.setVisibility(!0),ka&&(ka.style.visibility="visible"),lb&&(lb.style.visibility="visible"),Z.Toolbar&&Z.Toolbar.z644(!0),zb=null);break;case "mousedown":sb=!0;Ua=new Z.Utils.Point(g.x,g.y);ea.mouseXPrior=g.x;ea.mouseYPrior=g.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&

null!==w||"rectangle"==Z.labelMode&&null===w)xa=Pd(d,m);d.altKey||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing?d.altKey&&("addLabel"==Z.editing||"editLabel"==Z.editing)&&(K=va(c))&&(d=D(d.clientX,d.clientY),g=new Z.Utils.Point(parseFloat(K.style.left),parseFloat(K.style.top)),m=d.x-g.x,d=d.y-g.y,K.mouseXPrior=Ua.x,K.mouseYPrior=Ua.y,K.mouseXOffset=m,K.mouseYOffset=d,K.style.zIndex=t.length+1,m=K.id.substring(3,K.id.length),w&&w!=m&&(eb("save","labels"),m=Z.Utils.arrayIndexOfObjectValue(t,

"internalID",m),-1!=m&&(m=t[m],ec(m.poiID,m.internalID)))):(l.toggleLabelIconPicker(!1),Z.Utils.hideMessage(),"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===xa)&&l.saveEditsLabel(!0),"freehand"==Z.labelMode&&sb?("editLabel"==Z.editing&&I&&Z.Utils.arrayClear(I.polygonPts),d="editLabel"==Z.editing?w:null,Ya(d,!1,m),Zd=(m.x-Z.imageX)*f,$d=(m.y-Z.imageY)*f,pc(w,!1)):"rectangle"==Z.labelMode&&null===xa&&(g=1,d=null,"editLabel"==Z.editing&&(d=w,I&&null===xa&&Z.Utils.arrayClear(I.polygonPts)),

Ya(d,!1,m),Ya(w,!1,new Z.Utils.Point(m.x+g,m.y)),Ya(w,!1,new Z.Utils.Point(m.x+g,m.y+g)),Ya(w,!1,new Z.Utils.Point(m.x,m.y+g)),pc(w,!0),xa=2));ka&&(Z.hotspotListTitle||Z.tourListTitle)&&(ka.selectedIndex=0);break;case "mousemove":Ja=new Z.Utils.Point(g.x,g.y);h=(m.x-Z.imageX)*f;f*=m.y-Z.imageY;d.altKey||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?K?(m=K.style,f=Ja.x-K.mouseXPrior,h=Ja.y-K.mouseYPrior,f=parseFloat(m.left)+f,h=parseFloat(m.top)+

h,m.left=f+"px",m.top=h+"px",K.mouseXPrior=Ja.x,K.mouseYPrior=Ja.y,Xa(d,K,Ja)):!d.altKey&&Z.mousePan&&(d=g.x-ea.mouseXPrior,m=g.y-ea.mouseYPrior,isNaN(d)||isNaN(m)||(d=parseFloat(T.left)+d,m=parseFloat(T.top)+m,m=Oa(d,m,Z.imageZ,Z.imageR,"container"),T.left=m.x+"px",T.top=m.y+"px",ea.mouseXPrior=g.x,ea.mouseYPrior=g.y,Z.Navigator&&(m=l.calculateCurrentCenterCoordinates(m,Z.imageZ,Z.imageR),Z.Navigator.z663(m)))):(d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w),d=-1!=d?t[d].polyClosed:!1,"freehand"==

Z.labelMode&&sb?(Nd(Zd,$d,h,f,m),Zd=h,$d=f):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===xa||!sb?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||d||sb&&(!sb||null===xa)||Md(h,f,m):xe(w,xa,m));break;case "mouseup":sb=!1;document.mousemove=null;document.mouseup=null;zb?(g=zb,m=l.getClickCoordsInImage(d,f,zb)):g=new Z.Utils.Point(g.x,g.y);f=Z.Utils.calculatePointsDistance(Ua.x,Ua.y,g.x,g.y);if(4>f||!d.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(!K&&

(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing)))"addLabel"!=Z.editing||d.altKey||!Ea||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||l.saveEditsLabel(!0),d.altKey&&Ea||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?d.altKey?d.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,

!1,!0)):(d="undefined"!==typeof V&&0<V.options.length?d=V.options[V.selectedIndex].value:0,g=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(l.createLabelFromParameters(null,null,"text",null,null,m.x.toString(),m.y.toString(),h,null,null,null,null,null,null,null,cd,null,null,null,null,null,null,null,"5","0",null,d),g=!0):I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0)):"icon"==Z.labelMode&&(f=document.getElementById("labelIconList"))&&(f=f[f.selectedIndex].value,f="shim"==f?"":

"External Graphics File"==f?f:Z.annotationFolder+"/"+f,"addLabel"==Z.editing?(l.createLabelFromParameters(null,null,"icon",f,null,m.x.toString(),m.y.toString(),h,null,null,null,null,null,null,null,cd,null,null,null,null,null,null,null,null,"0",null,d),g=!0):I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0))),g&&(m=da[da.length-1],Zb(m.poiID,m.value))):(Od(d,m),Ea||Z.Utils.addEventListener(document,"mousemove",sa)),La("label",Z.editing);else if(null!==K)K=null;else{if((null===Z.editing||

"view"==Z.labelMode)&&!K){var k=l.getClickZoomCoords3D(d,Ua,na,ia);Z.clickZoom?window.setTimeout(function(){l.zoomAndPanToView(k.x,k.y,k.z)},1):Z.clickPan&&l.zoomAndPanToView(k.x,k.y,Z.imageZ)}}else"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!bd&&(null!==xa||Ea)?K&&(m=K.style,f=g.x-K.mouseXPrior,h=g.y-K.mouseYPrior,f=parseFloat(m.left)+f,h=parseFloat(m.top)+h,m.left=f+"px",m.top=h+"px",Xa(d,K,g),K.style.zIndex=K.zIndex,K=null):(xa=null,bd=!1,d=Z.Utils.arrayIndexOfObjectValue(t,

"internalID",w),-1!=d&&(m=t[d],d=Z.Utils.polygonCenter(m.polygonPts,m.polyClosed),m.x=d.x,m.y=d.y,Z.Utils.clearDisplay(ya),d=new Ka,wc(m,d),Ea||Z.Utils.addEventListener(document,"mousemove",sa))),Ja=null,Z.mousePan&&l.updateView();zb&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1));break;case "mouseout":m=Z.Utils.nodeIsInViewer(c);d=Z.Utils.nodeIsInViewer(e);m&&d||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==

c||"[object HTMLSelectElement]"==e||"[object HTMLOptionElement]"==e||(sb?zb=new Z.Utils.Point(g.x,g.y):(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.RulerDisplay&&Z.rulerVisible&&Z.Ruler.setVisibility(!1),ka&&(ka.style.visibility="hidden"),lb&&(lb.style.visibility="hidden"),Z.Toolbar&&Z.Toolbar.z644(!1)));break;case "touchstart":if(b&&!Fc){sb=!0;De=!1;Ua=new Z.Utils.Point(g.x,g.y);ea.mouseXPrior=g.x;ea.mouseYPrior=

g.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==w||"rectangle"==Z.labelMode&&null===w)xa=Pd(d,m);d.altKey||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing?d.altKey&&("addLabel"==Z.editing||"editLabel"==Z.editing)&&(K=va(c))&&(d=D(d.clientX,d.clientY),g=new Z.Utils.Point(parseFloat(K.style.left),parseFloat(K.style.top)),m=d.x-g.x,d=d.y-g.y,K.mouseXPrior=Ua.x,K.mouseYPrior=Ua.y,K.mouseXOffset=m,K.mouseYOffset=d,K.style.zIndex=t.length+1,m=

K.id.substring(3,K.id.length),w&&w!=m&&(eb("save","labels"),m=Z.Utils.arrayIndexOfObjectValue(t,"internalID",m),-1!=m&&(m=t[m],ec(m.poiID,m.internalID)))):(l.toggleLabelIconPicker(!1),Z.Utils.hideMessage(),"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===xa)&&l.saveEditsLabel(!0),"freehand"==Z.labelMode&&sb?("editLabel"==Z.editing&&I&&Z.Utils.arrayClear(I.polygonPts),d="editLabel"==Z.editing?w:null,Ya(d,!1,m),Zd=(m.x-Z.imageX)*f,$d=(m.y-Z.imageY)*f,pc(w,!1)):"rectangle"==

Z.labelMode&&null===xa&&(g=1,d=null,"editLabel"==Z.editing&&(d=w,I&&null===xa&&Z.Utils.arrayClear(I.polygonPts)),Ya(d,!1,m),Ya(w,!1,new Z.Utils.Point(m.x+g,m.y)),Ya(w,!1,new Z.Utils.Point(m.x+g,m.y+g)),Ya(w,!1,new Z.Utils.Point(m.x,m.y+g)),pc(w,!0),xa=2));ka&&(Z.hotspotListTitle||Z.tourListTitle)&&(ka.selectedIndex=0)}break;case "touchmove":!b||Fc||De||((Ja=new Z.Utils.Point(g.x,g.y),h=(m.x-Z.imageX)*f,f*=m.y-Z.imageY,d.altKey||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=

Z.editing&&"editLabel"!=Z.editing))?K?(m=K.style,f=Ja.x-K.mouseXPrior,h=Ja.y-K.mouseYPrior,f=parseFloat(m.left)+f,h=parseFloat(m.top)+h,m.left=f+"px",m.top=h+"px",K.mouseXPrior=Ja.x,K.mouseYPrior=Ja.y,Xa(d,K,Ja)):!d.altKey&&Z.mousePan&&(d=g.x-ea.mouseXPrior,m=g.y-ea.mouseYPrior,isNaN(d)||isNaN(m)||(d=parseFloat(T.left)+d,m=parseFloat(T.top)+m,m=Oa(d,m,Z.imageZ,Z.imageR,"container"),T.left=m.x+"px",T.top=m.y+"px",ea.mouseXPrior=g.x,ea.mouseYPrior=g.y,Z.Navigator&&(m=l.calculateCurrentCenterCoordinates(m,

Z.imageZ,Z.imageR),Z.Navigator.z663(m)))):(d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w),d=-1!=d?t[d].polyClosed:!1,"freehand"==Z.labelMode&&sb?(Nd(Zd,$d,h,f,m),Zd=h,$d=f):"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===xa||!sb?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||d||sb&&(!sb||null===xa)||Md(h,f,m):xe(w,xa,m)));break;case "touchend":Fc||De||(sb=!1,document.mousemove=null,document.mouseup=null,zb?(g=zb,m=l.getClickCoordsInImage(d,f,zb)):g="undefined"!==

typeof g&&null!==g?new Z.Utils.Point(g.x,g.y):"undefined"!==typeof Ja&&null!==Ja?Ja:Ua,f=Z.Utils.calculatePointsDistance(Ua.x,Ua.y,g.x,g.y),4>f||!d.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?K||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==K?K=null:null!==Z.editing&&"view"!=Z.labelMode||K||(k=l.getClickZoomCoords3D(d,Ua,na,ia),Z.clickZoom?window.setTimeout(function(){l.zoomAndPanToView(k.x,k.y,k.z)},1):Z.clickPan&&

l.zoomAndPanToView(k.x,k.y,Z.imageZ)):(d.altKey&&Ea||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?d.altKey?d.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0)):(d="undefined"!==typeof V&&0<V.options.length?d=V.options[V.selectedIndex].value:0,g=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(l.createLabelFromParameters(null,null,"text",null,null,m.x.toString(),m.y.toString(),

h,null,null,null,null,null,null,null,cd,null,null,null,null,null,null,null,"5","0",null,d),g=!0):I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0)):"icon"==Z.labelMode&&(f=document.getElementById("labelIconList"))&&(f=f[f.selectedIndex].value,f="shim"==f?"":"External Graphics File"==f?f:Z.annotationFolder+"/"+f,"addLabel"==Z.editing?(l.createLabelFromParameters(null,null,"icon",f,null,m.x.toString(),m.y.toString(),h,null,null,null,null,null,null,null,cd,null,null,null,null,null,

null,null,null,"0",null,d),g=!0):I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0))),g&&(m=da[da.length-1],Zb(m.poiID,m.value))):(Od(d,m),Ea||Z.Utils.addEventListener(document,"mousemove",sa)),La("label",Z.editing)):("rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!bd&&(null!==xa||Ea)?K&&(m=K.style,f=g.x-K.mouseXPrior,h=g.y-K.mouseYPrior,f=parseFloat(m.left)+f,h=parseFloat(m.top)+h,m.left=f+"px",m.top=h+"px",Xa(d,K,g),K.style.zIndex=K.zIndex,K=null):(xa=

null,bd=!1,d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",w),-1!=d&&(m=t[d],d=Z.Utils.polygonCenter(m.polygonPts,m.polyClosed),m.x=d.x,m.y=d.y,Z.Utils.clearDisplay(ya),d=new Ka,wc(m,d),Ea||Z.Utils.addEventListener(document,"mousemove",sa))),Ja=null,Z.mousePan&&l.updateView()),zb&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "touchcancel":Fc||De||(sb=!1,document.mousemove=null,document.mouseup=null,

zb?(g=zb,m=l.getClickCoordsInImage(d,f,zb)):g=new Z.Utils.Point(g.x,g.y),f=Z.Utils.calculatePointsDistance(Ua.x,Ua.y,g.x,g.y),4>f||!d.altKey&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?K||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==K?K=null:null!==Z.editing&&"view"!=Z.labelMode||K||(k=l.getClickZoomCoords3D(d,Ua,na,ia),Z.clickZoom?window.setTimeout(function(){l.zoomAndPanToView(k.x,k.y,k.z)},1):Z.clickPan&&l.zoomAndPanToView(k.x,

k.y,Z.imageZ)):(d.altKey&&Ea||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode?d.altKey?d.altKey&&("text"==Z.labelMode||"icon"==Z.labelMode)&&I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0)):(d="undefined"!==typeof V&&0<V.options.length?d=V.options[V.selectedIndex].value:0,g=!1,"text"==Z.labelMode?"addLabel"==Z.editing?(l.createLabelFromParameters(null,null,"text",null,null,m.x.toString(),m.y.toString(),h,null,null,null,null,null,

null,null,cd,null,null,null,null,null,null,null,"5","0",null,d),g=!0):I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0)):"icon"==Z.labelMode&&(f=document.getElementById("labelIconList"))&&(f=f[f.selectedIndex].value,f="shim"==f?"":"External Graphics File"==f?f:Z.annotationFolder+"/"+f,"addLabel"==Z.editing?(l.createLabelFromParameters(null,null,"icon",f,null,m.x.toString(),m.y.toString(),h,null,null,null,null,null,null,null,cd,null,null,null,null,null,null,null,null,"0",null,d),

g=!0):I&&(l.modifyHotspot(w,"x",m.x,!0,!0),l.modifyHotspot(w,"y",m.y,!1,!0))),g&&(m=da[da.length-1],Zb(m.poiID,m.value))):(Od(d,m),Ea||Z.Utils.addEventListener(document,"mousemove",sa)),La("label",Z.editing)):("rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!bd&&(null!==xa||Ea)?K&&(m=K.style,f=g.x-K.mouseXPrior,h=g.y-K.mouseYPrior,f=parseFloat(m.left)+f,h=parseFloat(m.top)+h,m.left=f+"px",m.top=h+"px",Xa(d,K,g),K.style.zIndex=K.zIndex,K=null):(xa=null,bd=!1,d=Z.Utils.arrayIndexOfObjectValue(t,

"internalID",w),-1!=d&&(m=t[d],d=Z.Utils.polygonCenter(m.polygonPts,m.polyClosed),m.x=d.x,m.y=d.y,Z.Utils.clearDisplay(ya),d=new Ka,wc(m,d),Ea||Z.Utils.addEventListener(document,"mousemove",sa))),Ja=null,Z.mousePan&&l.updateView()),zb&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "gesturestart":Ee(d);Fc||(Fc=window.setInterval(Fe,Hg));break;case "gesturechange":xf=Math.round(100*d.scale)/100;break;

case "gestureend":Fc&&(window.clearInterval(Fc),De=!0,Fc=null);Z.mousePan&&l.updateView();break;case "mousewheel":g=m=!1,Ge||(Ge=window.setTimeout(He,Ig)),d=0<Math.max(-1,Math.min(1,d.wheelDelta||-d.detail))?ae:-ae,d=x(na,ia*(1+d)),constrainedZ=ba(d),constrainedZ!=Z.imageZ&&(m=g=Dc(constrainedZ)),Oe(),Wa(),m&&(G(),Gb()),g&&Va()}}}function Ee(d){d=Z.Utils.event(d);d.preventDefault();xf=Math.round(100*d.scale)/100}function Fe(d){if(Z.mousePan){d=x(na,kb*xf);var a=ba(d);d!=Z.imageZ&&l.z638(a)}}function He(d){Ge&&

(window.clearTimeout(Ge),Ge=null,l.updateView())}function ce(d){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),l.toggleFullViewMode(!1),l.toggleFullViewMode(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.Toolbar&&Z.Toolbar.z644(!0))}function Qa(d){if(d=Z.Utils.event(d)){var a;a=Z.Utils.event(d);

var b=l.getZoom(),c=l.getClickCoordsInImage(a,b);a=Math.round(c.x).toString();c=Math.round(c.y).toString();b=(Math.round(1E3*b)/10).toString();coordsString='X="'+a+'"   Y="'+c+'"   ZOOM="'+b+'"';"mousemove"==d.type?Z.Utils.showCoordinates(coordsString):"mousedown"==d.type&&d.altKey&&Z.Utils.saveCoordinates(coordsString)}}var l=this,jc=!1,oc=!1,jd=-1,kd=0,gc=0,hb=parseInt(Z.Utils.getResource("z90"),10),rd=8*hb,Ic=4*hb,hc=0,Aa=parseInt(Z.Utils.getResource("z221"),10),Fa=parseInt(Z.Utils.getResource("z219"),

10),Ab=parseFloat(Z.Utils.getResource("z218")),yf=Ab/2,Jc=parseInt(Z.Utils.getResource("z220"),10),rc=1==Z.toolbarVisible?Z.toolbarH:0,Kb,ea,T,fd,aa,fa,Sb,gd,ga,Ia,Ma,Oc,pb,Pc,Xb,hd,Db,Yd,yb,zf,sc,wf,mf,Af,Ga,qd,Bf,la,Wb,ff,hf,jf,ee,Cf,Sa,dc,Le,Df,ya,Pb,ta,Zd,$d;Kb=Z.Utils.createContainerElement("div","viewportContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Z.ViewerDisplay.appendChild(Kb);ea=Kb;T=ea.style;fd=Z.Utils.createContainerElement(Z.useCanvas?

"canvas":"div","viewportBackfillDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Kb.appendChild(fd);aa=fd;fa=aa.style;gd=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Kb.appendChild(gd);ga=gd;Ia=ga.style;Z.useCanvas&&(Oc=Z.Utils.createContainerElement("canvas","transitionCanvas","none",

"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Kb.appendChild(Oc),pb=Oc,Pc=pb.style,Z.imageFiltersVisible&&(zf=Z.Utils.createContainerElement("canvas","imageFilterBackfillCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Kb.appendChild(zf),sc=zf,wf=sc.style,hd=Z.Utils.createContainerElement("canvas","imageFilterCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px",

"transparent none","0px","0px","normal"),Kb.appendChild(hd),Db=hd,Yd=Db.style));Z.Utils.isStrVal(Z.watermarkPath)&&(Af=Z.Utils.createContainerElement("div","watermarkDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Kb.appendChild(Af),Ga=Af,qd=Ga.style);if(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations)(Z.annotations||Z.measureVisible)&&Z.useCanvas&&(Cf=Z.Utils.createContainerElement("canvas","drawingDisplay","inline-block",

"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Kb.appendChild(Cf),Sa=Cf,dc=Sa.style,null!==Z.editMode||Z.measureVisible)&&(Df=Z.Utils.createContainerElement("canvas","editingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Kb.appendChild(Df),ya=Df,Pb=ya.style),Bf=Z.Utils.createContainerElement("div","hotspotDisplay","inline-block","absolute","visible","1px","1px","0px","0px",

"none","0px","transparent none","0px","0px","normal"),Kb.appendChild(Bf),la=Bf,Wb=la.style;Z.useCanvas?(Sb=aa.getContext("2d"),Ma=ga.getContext("2d"),Xb=pb.getContext("2d"),Sa&&(Le=Sa.getContext("2d")),ya&&(ta=ya.getContext("2d")),Z.imageFiltersVisible&&(yb=Db.getContext("2d"),mf=sc.getContext("2d"))):(aa.innerHTML="",ga.innerHTML="");Ga&&(Ga.innerHTML="");la&&(la.innerHTML="");var qb=1,na=0,za=0,Tb=!1,kf=!1,ia,kb,Lb,Rc=[],$a=[],vb=[],Nb=[],gb=[],Ub=[],Ob=[],Cb=[],tc=[];tierTileOffsetsCount=[];tierTileOffsetChunks=

[];tierTileOffsetLast=[];var Sc=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var qa=[],ob=[],ab=[],Mf=[],cc=[],wb=[],Je=[],Ra=[],Ca=[],Hc=[],bb=[],Qc=0,ic=0,pg=new Z.NetConnector,Jg=parseInt(Z.Utils.getResource("z81"),10),Kg=parseInt(Z.Utils.getResource("z78"),10),Rf=parseInt(Z.Utils.getResource("z80"),10),Sf=parseInt(Z.Utils.getResource("z77"),10),Pf=parseInt(Z.Utils.getResource("z79"),10),Qf=parseInt(Z.Utils.getResource("z76"),10),Of=parseInt(Z.Utils.getResource("z75"),

10),Nf=parseFloat(Z.Utils.getResource("z173"),10),fg=parseFloat(Z.Utils.getResource("z74"),10),ub,fb,ef,de,Ha,Da,Vb,Na,Eb,xb,fc,Ec,uf,vf,ac,Jb;ub=Z.viewerW;fb=Z.viewerH;ef=de=0;fb-=rc;0==Z.toolbarPosition&&(de+=rc);var sb=!1,zb=null,Ua,Ja,Fc=null,xf=null,De=!1,Hg=parseInt(Z.Utils.getResource("z122"),10),ae=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(ae/=2);var af=Math.round(parseFloat(Z.Utils.getResource("z176"))*Z.panSpeed),Hb=0,Rb=0,Ib=0,Cc=null,eg=0,tf=parseInt(Z.Utils.getResource("z238"),

10),Ge,Ig=parseInt(Z.Utils.getResource("z165"),10),lf=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,Me=null,Lg=parseFloat(Z.Utils.getResource("z239")),Ef=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(Ef/=2);var ed=null,Ae=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var hg,ig,jg,kg,Ff,lg,be,Gf;if(Z.virtualPointerVisible)var Tf=Z.Utils.getResource("z232"),Y,vc;Z.crosshairsVisible&&Z.Utils.drawCrosshairs(Z.ViewerDisplay,ub,fb);if(Z.measureVisible||null!==Z.editMode){var Cg=Z.Utils.getResource("z431"),

Bg=Z.Utils.getResource("z431TOTAL"),yg=Z.Utils.getResource("z433"),Ag=Z.Utils.getResource("z430"),zg=Z.Utils.getResource("z434");parseInt(Z.Utils.getResource("z154"),10);parseInt(Z.Utils.getResource("z156"),10)}if(Z.imageFiltersVisible)var Ye=null,Ze=null,Ce=null,sd=!1,rb=[];if(Z.Utils.isStrVal(Z.watermarkPath))var Vc,Uf,Kf=[],Lf=[];if(Z.tour)var Yc,te,mg,cg;null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zSlidePath")&&(Z.slidePath=Z.imagePath.substring(11,Z.imagePath.length),Z.slideshow=!0);if(Z.slideshow){var tb=

[],bf=[],Bc,lb,ng,df,dg,og=parseFloat(Z.Utils.getResource("z211"))*Z.slideTransitionSpeed;Z.slideTransitionTimeout=null;Z.slideOpacity=0}if(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations){var $b=!1,oe=!1,t=[],mb=[],ge=[],he=[],I=null,w=null,K=null,Hd=null,od=null,Ie=null,ue=null,bg=!1,Ea=!0,xa=null,bd=!1,ug=new Z.NetConnector,ag=Z.Utils.getResource("z177"),Dg=parseFloat(Z.Utils.getResource("z179")),Wc=parseInt(Z.Utils.getResource("z180"),10),Eg=Z.Utils.getResource("z96"),of=Z.Utils.getResource("z98"),

Fg=Z.Utils.getResource("z113"),Gg=Z.Utils.getResource("z216"),We=parseInt(Z.Utils.getResource("z97"),10),$f=Z.Utils.getResource("z177FREEHAND"),cd=Z.Utils.getResource("z89"),wg=parseInt(Z.Utils.getResource("z129"),10),Wf=parseInt(Z.Utils.getResource("z160"),10),Xf=parseInt(Z.Utils.getResource("z151"),10),xg=parseInt(Z.Utils.getResource("z130"),10),Yf=parseInt(Z.Utils.getResource("z161"),10),Zf=parseInt(Z.Utils.getResource("z152"),10);Z.mobileDevice&&(We*=2);if(Z.tour||Z.hotspots)var ka,Hf,gf,If,me,

ne,Mb=[];else if(Z.measureVisible||Z.annotations){var jb,Ke,V,wa,ra,yd,Fb,zd,X=[],pa=[],nb=[],da=[],Ba=[],se=[];labelCaptionPositionListDP=[];labelTargetListDP=[];var rf=[],pf=[],qf=[],Xe=[],sf=[],bc=0,pd=null,cf=parseFloat(Z.Utils.getResource("z147")),gg=parseInt(Z.Utils.getResource("z148"),10);Z.mobileDevice&&(cf/=2)}}f(ub,fb,ef,de);if(null!==Z.imagePath&&"null"!=Z.imagePath){if(!0==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);return}if(!0==Z.localUse&&

"ZoomifyPFFFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z289"),!0);return}!0==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof l.z542()?b(Z.imageW,Z.imageH,Aa,Fa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality):

window.setTimeout(function(){b(Z.imageW,Z.imageH,Aa,Fa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var Mg=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);k(Mg)}else if(-1==Z.imagePath.indexOf("zSlidePath")){var Jf=new Z.NetConnector;h(Jf)}}null!==Z.slidePath&&(Jf=new Z.NetConnector,a(Jf));this.setSizeAndPosition=function(d,a,b,c){f(d,a,b,c)};this.loadImageProperties=function(d){h(d)};this.parseZIFHeader=function(d){e();if(73==d[0]&&73==d[1]&&

43==d[2]&&0==d[3]&&8==d[4]&&0==d[5]&&0==d[6]&&0==d[7]&&16==d[8]&&0==d[9]&&0==d[10]&&0==d[11]&&0==d[12]&&0==d[13]&&0==d[14]&&0==d[15]){for(var a=Z.Utils.longValue(d,8),g=Z.Utils.longValue(d,a),n=1,f=null,h=null,k=null,q=null,m=null,G=null,G=2;0!=a;){for(f=0;f<g;f++)switch(h=a+8+20*f,Z.Utils.shortValue(d,h)){case 256:vb[n-1]=Z.Utils.intValue(d,h+12);break;case 257:Nb[n-1]=Z.Utils.intValue(d,h+12);break;case 322:k=Z.Utils.intValue(d,h+12);break;case 323:q=Z.Utils.intValue(d,h+12);break;case 324:var N=

tierTileOffsetsCount[n-1]=Z.Utils.longValue(d,h+4);tc[n-1]=Z.Utils.longValue(d,h+12);m+=N;break;case 325:N=tierTileByteCountsCount[n-1]=Z.Utils.longValue(d,h+4),Sc[n-1]=1==N?Z.Utils.intValue(d,h+12):2==N?Z.Utils.intValue(d,h+12)+","+Z.Utils.intValue(d,h+16):Z.Utils.longValue(d,h+12)}a=Z.Utils.longValue(d,a+20*g+8);g=Z.Utils.longValue(d,a);n++}f=vb[0];h=Nb[0];qb=n-1;vb.reverse();Nb.reverse();tierTileOffsetsCount.reverse();tc.reverse();tierTileByteCountsCount.reverse();Sc.reverse();!isNaN(f)&&0<f&&

!isNaN(h)&&0<h&&!isNaN(k)&&0<k&&!isNaN(q)&&0<q&&0<m?l.z542()?c(f,h,k,q,m,G,null,null,null,null,null):b(f,h,k,q,m,G,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};this.parseZIFOffsetChunk=function(d,a){var b=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",a);-1!=b&&(tierTileOffsetChunks[b].chunk=d,S(a,"offset"))};this.parseZIFByteCountChunk=function(d,a){var b=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,

"chunkID",a);-1!=b&&(tierTileByteCountChunks[b].chunk=d,S(a,"byteCount"))};this.parseZIFTileImage=function(d,a,b){d="data:image/jpeg;base64,"+Z.Utils.encodeBase64(d);a=Z.Utils.createCallback(null,"image-display"==b?ha:ma,a);Z.Utils.createImageElementFromBytes(d,a)};this.parseZIFNavigatorImage=function(d,a,b){d="data:image/jpeg;base64,"+Z.Utils.encodeBase64(d);a=Z.Utils.createCallback(null,Z.Navigator.z560,a);Z.Utils.createImageElementFromBytes(d,a)};this.z607=function(d){k(d)};this.validateXYZDefaults=

function(d){d&&Z.Utils.resetParametersXYZ(Z.parameters);var a=parseFloat(Z.Utils.getResource("z143")),b=parseFloat(Z.Utils.getResource("z144")),c=parseFloat(Z.Utils.getResource("z145")),e=parseFloat(Z.Utils.getResource("z163"));d=parseFloat(Z.Utils.getResource("z153"));a=isNaN(a)?null:a;b=isNaN(b)?null:b;c=isNaN(c)?null:c;e=isNaN(e)?null:e;d=isNaN(d)?null:d;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=a),Z.parameters.zInitialY||(Z.initialY=b),Z.parameters.zInitialZoom||(Z.initialZ=c),Z.parameters.zMinZ||

(Z.minZ=e),Z.parameters.zMaxZ||(Z.maxZ=d)):(Z.initialX=a,Z.initialY=b,Z.initialZ=c,Z.minZ=e,Z.maxZ=d);null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=Z.imageW/Z.imageH>ub/fb?ub/Z.imageW:fb/Z.imageH;if(null===Z.initialZ||-1==Z.initialZ)Z.initialZ=Z.fitZ;if(null===Z.minZ||-1==Z.minZ)Z.minZ=Z.fitZ;if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=Z.fitZ;Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.z542=function(){return jc};this.getW=

function(){return Ha};this.getH=function(){return Da};this.getTierCount=function(){return qb};this.getTileW=function(){return Aa};this.getTileH=function(){return Fa};this.getTierCurrent=function(){return na};this.getTierBackfill=function(){return za};this.getTierBackfillDynamic=function(){return Tb};this.getTierScale=function(){return ia};this.getX=function(){var d=parseFloat(T.left)-Eb,a=l.getZoom();return Z.imageX-d/a};this.getY=function(){var d=parseFloat(T.top)-xb,a=l.getZoom();return Z.imageY-

d/a};this.getZoom=function(){return x(na,ia)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=function(){return Ab};this.getTiersScaleDownMax=function(){return yf};this.getTilesCacheMax=function(){return Jc};this.getTierWs=function(){return vb.join(",")};this.getTierHs=function(){return Nb.join(", ")};this.getTierTileCounts=function(){return Ob.join(", ")};this.getTilesLoadingNames=function(){return""==qa.join(", ")?"Current view loading complete":qa.join(", ")};this.setCoordinatesDisplayVisibility=

function(d){d?(Z.Utils.addEventListener(document,"mousemove",Qa),Z.Utils.addEventListener(document,"mousedown",Qa)):(Z.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",Qa),Z.Utils.removeEventListener(document,"mousedown",Qa))};this.setTourPath=function(d,a){l.setHotspotPath(d,a)};this.setHotspotPath=function(d,a){"undefined"===typeof d||Z.Utils.isStrVal(d)?(Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(d),Z.hotspotFolder=Z.hotspotPath,".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-

4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/"))),a||(l.deleteAllHotspots(),vd())):(Z.hotspotPath=null,Z.hotspotFolder=null,l.deleteAllHotspots())};this.setAnnotationPath=function(d,a){"undefined"===typeof d||Z.Utils.isStrVal(d)?(Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(d),Z.annotationFolder=Z.annotationPath,".json"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length)&&".xml"!=Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-

4,Z.annotationPath.length)&&(Z.annotationPath=Z.annotationPath+"/"+Z.Utils.getResource("z69")),".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/"))),Z.annotations=!0,a||(l.deleteAllAnnotations(),vd())):(Z.annotationPath=null,Z.annotationFolder=null,l.deleteAllAnnotations(),Z.annotations=!1)};this.getAnnotationsXML=function(){return jb=qc(jb)};this.testSetAnnotationPath=

function(){l.setAnnotationPath("Assets/Annotations/annotations2.xml")};this.updateView=function(d){if("undefined"!==typeof d&&!0===d||ia!=kb||Z.imageZ!=Z.priorZ||parseFloat(T.left)!=Eb||parseFloat(T.top)!=xb){var a=!1,b=!1;if(parseFloat(T.left)!=Eb||parseFloat(T.top)!=xb)a=!0;if(ia!=kb||Z.imageZ!=Z.priorZ)b=!0;Rd();var c=!1;if(d||parseFloat(Ia.width)!=ga.width)Z.useCanvas&&(Ia.width=ga.width+"px",Ia.height=ga.height+"px",Ia.left="0px",Ia.top="0px",Ma.restore(),Ma.save(),Ma.scale(ia,ia),Sa&&(dc.width=

Sa.width+"px",dc.height=Sa.height+"px",dc.left="0px",dc.top="0px"),ya&&(Pb.width=ya.width+"px",Pb.height=ya.height+"px",Pb.left="0px",Pb.top="0px"),aa&&(Tb?(fa.width=aa.width+"px",fa.height=aa.height+"px",fa.left=ac+"px",fa.top=Jb+"px",Sb.restore(),Sb.save(),Sb.scale(Lb,Lb)):(fa.width=fc+"px",fa.height=Ec+"px",fa.left=ac+"px",fa.top=Jb+"px"))),c=!0;if(d||parseFloat(T.left)!=Eb||parseFloat(T.top)!=xb){var c=parseFloat(T.left)-Eb,e=parseFloat(T.top)-xb;0!=Z.imageR&&(e=Z.Utils.rotatePoint(c,e,Z.imageR),

c=e.x,e=e.y);T.left=Eb+"px";T.top=xb+"px";Tb||(ac=parseFloat(fa.left)+c,Jb=parseFloat(fa.top)+e,fa.left=ac+"px",fa.top=Jb+"px");var f=l.getZoom();Z.imageX-=c/f;Z.imageY-=e/f;c=!0}c&&(C(ga,na,ob,"centerOut",!1,"1a. Updating view: resetting display positions"),Tb&&C(aa,za,Rc,"simple",!1,"1b. Updating view: resetting backfill positions"));c=!1;if("undefined"!==typeof d&&d||ia!=kb||Z.imageZ!=Z.priorZ||!jc){ia!=kb&&(Z.imageZ=l.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);f=Ab;for(e=qb;f/2>=Z.imageZ;)e--,

f/=2;e=0>e-1?0:e-1;f=g(e,Z.imageZ);if(e!=na||f!=ia)Z.useCanvas&&(Ma.restore(),Ma.save(),Ma.scale(f,f)),na!=e&&(kf=!0),na=e,ia=f;kb=ia;Tb=!1;na>Jg?(za=na-Kg,Tb=!0):za=na>Rf?Sf:na>Pf?Qf:Of;tierBackfillScalePrior=Lb=g(za,Z.imageZ);var e=vb[za],f=Nb[za],h=Z.imageX*Z.imageZ,k=Z.imageY*Z.imageZ;Tb?(e=fg,fc=Ha*e,Ec=Da*e,ac=-(Ha/e),Jb=-(Da/e),uf=Vb*e,vf=Na*e,aa.width=fc,aa.height=Ec,fa.width=aa.width+"px",fa.height=aa.height+"px",fa.left=ac+"px",fa.top=Jb+"px",Z.useCanvas&&(Sb.restore(),Sb.translate(uf,vf),

Sb.save(),Sb.scale(Lb,Lb))):(fc=e*Lb,Ec=f*Lb,ac=Vb-h,Jb=Na-k,aa.width=e,aa.height=f,Z.useCanvas&&(fa.width=fc+"px",fa.height=Ec+"px"),fa.left=ac+"px",fa.top=Jb+"px");Xd("backfill");C(aa,za,Rc,"simple",!1,"2. Updating view: changing tier - backfill");!d&&0<Jc&&(c=!0)}else 2==Z.debug&&Z.Utils.trace("2. Updating view: no change to tier.");Tb&&s(!0);s();Xd("frontfill");C(ga,na,ob,"centerOut",c,"3. Updating view: prior to loading of any new tiles");0<qa.length?W(qa,ha,"centerOut","image-display"):Z.imageFiltersVisible&&

sd&&Tc(null,null,!0);Oe();Wa();G();Gb(!0);Va();a&&Z.Utils.validateCallback("viewPanned");b&&Z.Utils.validateCallback("viewZoomed");(a||b)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){pb.width=ga.width;pb.height=ga.height;Pc.width=Ia.width;Pc.height=Ia.height;Pc.left=Ia.left;Pc.top=Ia.top;Xb.restore();Xb.save();Xb.translate(Vb,Na);Xb.scale(ia,ia)};this.formatTilePath=function(d,a,b,c){var e;if("ZoomifyImageFile"==Z.tileSource){var g="offsetLoading",f=e="loading",l;if(1==

tierTileOffsetsCount[d])e=tc[d];else{var m=new Q(d,a,b),h=m.chunkID+","+d+","+a+","+b+","+c+",offset";l=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",m.chunkID);-1==l?(-1==Z.Utils.arrayIndexOf(Ca,h)&&(Ca[Ca.length]=h),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:m.chunkID,chunk:"loading"},l=new Z.NetConnector,l.loadByteRange(Z.imagePath,m.chunkStart,m.chunkEnd,"offset",null,m.chunkID)):"loading"==tierTileOffsetChunks[l].chunk?-1==Z.Utils.arrayIndexOf(Ca,h)&&(Ca[Ca.length]=

h):"loading"!=tierTileOffsetChunks[l].chunk&&(l=tierTileOffsetChunks[l].chunk,e=Z.Utils.longValue(l,m.offsetStartInChunk))}1==tierTileByteCountsCount[d]?f=Sc[d]:(l=a+b*gb[d],2==tierTileByteCountsCount[d]?(d=Sc[d],f=0==l?d.substring(0,d.indexOf(",")):d.substring(d.indexOf(",")+1,d.length)):(m=new F(d,a,b),d=m.chunkID+","+d+","+a+","+b+","+c+",byteCount",l=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",m.chunkID),-1==l?(-1==Z.Utils.arrayIndexOf(Ca,d)&&(Ca[Ca.length]=d),tierTileByteCountChunks[tierTileByteCountChunks.length]=

{chunkID:m.chunkID,chunk:"loading"},l=new Z.NetConnector,l.loadByteRange(Z.imagePath,m.chunkStart,m.chunkEnd,"byteCount",null,m.chunkID)):"loading"==tierTileByteCountChunks[l].chunk?-1==Z.Utils.arrayIndexOf(Ca,d)&&(Ca[Ca.length]=d):"loading"!=tierTileByteCountChunks[l].chunk&&(l=tierTileByteCountChunks[l].chunk,f=Z.Utils.intValue(l,m.bcStartInChunk))));"loading"==e||isNaN(e)||"loading"==f||isNaN(f)||(g=Z.imagePath+"?"+e.toString()+","+f.toString());e=g}else if("ZoomifyImageFolder"==Z.tileSource){c=

b*gb[d]+a;for(g=0;g<d;g++)c+=Ob[g];d=Z.imagePath+"/TileGroup"+Math.floor(c/256)+"/"+d+"-"+a+"-"+b+"."+Z.tileType;e=d=Z.Utils.cacheProofPath(d)}else if("ZoomifyPFFFile"==Z.tileSource){f="offsetLoading";m=g=0;for(e=qb-1;e>d;e--)g+=Ob[e];g+=b*gb[d]+a;e=Math.floor(g/hb);m=-1==g-1?0:g-1;l=Math.floor(m/hb);void 0==wb[e]||"offsetLoading"==wb[e]||void 0==wb[l]||"offsetLoading"==wb[l]?(g=e+","+d+","+a+","+b+","+c,-1==Z.Utils.arrayIndexOf(Ca,g)&&(Ca[Ca.length]=g),2==Z.debug&&Z.Utils.trace("Tile recorded for load retry after load chunk: "+

e+","+d+","+a+","+b+","+c),void 0==wb[e]&&(wb[e]="offsetLoading",d=gc+hb*e*8,a=d+8*hb,R(d,a,e)),void 0==wb[l]&&(wb[l]="offsetLoading",d=gc+hb*l*8,a=d+8*hb,R(d,a,e))):(c=Math.floor(wb[e][0]),f=Math.floor(wb[l][0]),l=wb[l][1],e=wb[e][1],m=m%hb*9,l=Math.floor(parseFloat(l.substring(m,m+9))),m=g%hb*9,e=Math.floor(parseFloat(e.substring(m,m+9))),g=0==g?gc+8*hc:f+l,c+=e,f=0<c-g?Z.tileHandlerPathFull+"?file="+Z.imagePath+"&requestType=0&begin="+g.toString()+"&end="+c.toString()+"&vers="+jd.toString()+"&head="+

kd.toString():"z652:"+d+"-"+a+"-"+b);e=f}else"ImageServer"==Z.tileSource&&(d=-1!=Z.imagePath.toLowerCase().indexOf(".svs")?"svs":-1!=Z.imagePath.toLowerCase().indexOf(".ndpi")?"ndpi":null,a=100*Z.imageZ,40==Z.sourceMagnification?g=a<=2.5+Ab?32:a<=5+Ab?16:a<=10+Ab?8:a<=25+Ab?4:a<=50+Ab?2:1:20==Z.sourceMagnification&&(g=a<=5+Ab?16:a<=10+Ab?8:a<=20+Ab?4:a<=50+Ab?2:1),tilePath=Z.tileHandlerPathFull+"?FIF="+Z.imagePath+"&focal="+Z.focal+"&QLT="+Z.quality+"&DSTL="+Z.imageX*Z.imageZ+","+Z.imageY*Z.imageZ+

","+Aa+","+Fa+","+g+",1&type="+d,Z.Utils.trace(tilePath),e=tilePath="Assets/Skins/Default/standard/toolbarLogo.png");return e};this.parseOffsetChunk=function(d){var a=parseInt(d.documentElement.getAttribute("BEGIN"),10),b=d.documentElement.getAttribute("REPLYDATA");d=Je[a];a=Math.floor((a-gc)/8/hb);wb[a]=[];wb[a]=b.split(",",2);2==Z.debug&&Z.Utils.trace("In z641-chunk received: "+pffChunkOrZIFChunkNumber);a=0;for(b=Ca.length;a<b;a++){var c=Ca[a].split(",");c[0]==d&&(void 0!==c[4]&&"image-display"==

c[4]?Ra[Ra.length]=c[1]+"-"+c[2]+"-"+c[3]:"image-backfill"==c[4]&&(bb[bb.length]=c[1]+"-"+c[2]+"-"+c[3]),Ca=Z.Utils.arraySplice(Ca,a,1),a--,b--)}0<Ra.length&&(Ra.sort(),Ra=Z.Utils.arrayUnique(Ra),2==Z.debug&&Z.Utils.trace("Tiles being requested - offset chunk now loaded: "+Ra.join(", ")),q(Ra,ha,"simple","image-display"));0<bb.length&&(bb.sort(),bb=Z.Utils.arrayUnique(bb),q(bb,ma,"simple","image-backfill"))};this.updateViewValidate=function(a,b){if(0==a||0==b)Z.Utils.validateCallback("viewUpdateComplete"),

Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs");else{var c=Math.round(100-b/a*100);return Math.round(c/10)}};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var e=null;if(a){var g=a.type;if("undefined"===typeof c||null===c)"touchstart"==g||"touchend"==g||"touchcancel"==g?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,

touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=$(c.x,c.y),e=M(a.x,a.y,b))}return e};this.getClickZoomCoords3D=function(a,b,c,e){var g=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=$(b.x,b.y);b=M(b.x,b.y,Z.imageZ);var f=x(c,e);a.altKey?(e>1+g?f=x(c,1):0<c&&(f=x(c-1,1)),f-Z.fitZ<g&&(f=Z.fitZ)):e<1-g?f=x(c,1):c<qb-1&&(f=x(c+1,1));return new Z.Utils.Point3D(b.x,b.y,f)};this.calculateCurrentCenterCoordinates=

function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(T.left),parseFloat(T.top));if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);if("undefined"===typeof b||null===b)b=Z.imageZ;var e=(a.x-Eb)/b;a=(a.y-xb)/b;var g,f;switch(c){case 0:g=Z.imageX-e;f=Z.imageY-a;break;case 90:g=Z.imageX-a;f=Z.imageY+e;break;case 180:g=Z.imageX+e;f=Z.imageY+a;break;case 270:g=Z.imageX+a,f=Z.imageY-e}return new Z.Utils.Point(g,f)};this.syncViewportToNavigator=function(a){var b=Z.imageR;

0>b&&(b+=360);a=Oa(a.x,a.y,Z.imageZ,b,"image");var c=Z.imageY,e=a.y;a=dX=Z.imageX-a.x;c=dY=c-e;0!=b&&(90==b?(a=-dY,c=dX):180==b?(a=-dX,c=-dY):270==b&&(a=dY,c=-dX));b=c*Z.imageZ+xb;T.left=a*Z.imageZ+Eb+"px";T.top=b+"px"};var yc=!1;this.parseHotspotsXML=function(a){Z.Utils.arrayClear(Mb);Z.Utils.arrayClear(mb);oe=!1;$b=!0;var b=a.getElementsByTagName("SETUP")[0];"undefined"!==typeof b&&Z.Utils.isStrVal(b)||(b=a.getElementsByTagName("HOTSPOTSETUP")[0],"undefined"!==typeof b&&Z.Utils.isStrVal(b)||(b=

Z.Utils.xmlConvertTextToDoc("<HOTSPOTSETUP />").getElementsByTagName("HOTSPOTSETUP")[0]));var c=b.getAttribute("AUTOSTART");mg=Z.Utils.isStrVal(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z226");c=b.getAttribute("AUTOLOOP");cg=Z.Utils.isStrVal(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z225");c=b.getAttribute("CHOICELIST");gf=Z.Utils.isStrVal(c)?c:Z.Utils.getResource("z131");c=b.getAttribute("LISTSOURCE");Hf=Z.Utils.isStrVal(c)?c:Z.Utils.getResource("z132");b.getAttribute("LISTTITLE");var c="",c=Z.tourPath?

Z.Utils.isStrVal(Z.tourListTitle)?Z.tourListTitle:Z.Utils.getResource("z444"):Z.Utils.isStrVal(Z.hotspotListTitle)?Z.hotspotListTitle:Z.Utils.getResource("z424"),e=b.getAttribute("INITIALVISIBILITY");If=Z.Utils.isStrVal(e)?"1"==e||"true"==e:Z.Utils.getResource("z134");Wb.visibility=If?"visible":"hidden";e=parseFloat(b.getAttribute("MINSCALE"));b=parseFloat(b.getAttribute("MAXSCALE"));me=isNaN(e)||0>=e?1:e;ne=isNaN(b)||0>=b?1:b;nf(gf,c,Mb);a=a.getElementsByTagName("HOTSPOT");b=0;for(c=a.length;b<c;b++)e=

a[b],e=Zc(e),l.createHotspotFromXML(e,!0);2==Z.debug&&oe&&Z.Utils.trace(Z.Utils.getResource("z246"));$b=!1;Wa();Z.tourPath?(l.initializeAudioMuteButtons(),Z.Utils.validateCallback("tourLoaded"),mg&&Z.Utils.functionCallWithDelay(function(){l.tourStart()},750)):Z.Utils.validateCallback("hotspotsLoaded")};this.createHotspotFromParameters=function(a,b,c,e,g,f,h,k,m,q,G,N,s,p,ba,r,t,Oa,Va,D,w,C,F,A,J,Gb,y,u,x,E,M,H,I,U,db){c=Z.Utils.arrayToArrayOfStrings([a,b,c,e,g,f,h,k,m,q,G,N,s,p,ba,r,t,Oa,Va,D,w,C,

F,A,J,Gb,y,u,x,E,M,H,I,U,db]);a=Z.Utils.xmlConvertTextToDoc('<HOTSPOT ID="'+c[0]+'" NAME="'+c[1]+'" MEDIATYPE="'+c[2]+'" MEDIA="'+c[3]+'" AUDIO="'+c[4]+'" X="'+c[5]+'" Y="'+c[6]+'" ZOOM="'+c[7]+'" XSCALE="'+c[8]+'" YSCALE="'+c[9]+'" CLICKURL="'+c[10]+'" URLTARGET="'+c[11]+'" ROLLOVER="'+c[12]+'" CAPTION="'+c[13]+'" TOOLTIP="'+c[14]+'" TEXTCOLOR="'+c[15]+'" BACKCOLOR="'+c[16]+'" LINECOLOR="'+c[17]+'" FILLCOLOR="'+c[18]+'" TEXTVISIBLE="'+c[19]+'" BACKVISIBLE="'+c[20]+'" LINEVISIBLE="'+c[21]+'" FILLVISIBLE="'+

c[22]+'" CAPTIONPOSITION="'+c[23]+'" SAVED="'+c[24]+'" INTERNALID="'+c[25]+'" POIID="'+c[26]+'" SHOWFOR="'+c[31]+'" TRANSITION="'+c[32]+'" CHANGEFOR="'+c[33]+'" ROTATION="'+c[34]+'"></HOTSPOT>').getElementsByTagName("HOTSPOT")[0];null===a.getAttribute("INTERNALID")&&a.setAttribute("INTERNALID",Pa("hotspot"));b=Z.Utils.xmlConvertTextToDoc("<TEMP></TEMP>");Z.Utils.isStrVal(c[27])&&(u=Z.Utils.xmlConvertTextToDoc(u).getElementsByTagName("CAPTION")[0].innerHTML,e=b.createElement("CAPTION"),e.innerHTML=

u,a.appendChild(e));Z.Utils.isStrVal(c[28])&&(u=Z.Utils.xmlConvertTextToDoc(x).getElementsByTagName("TOOLTIP")[0].innerHTML,x=b.createElement("TOOLTIP"),x.innerHTML=u,a.appendChild(x));if(Z.Utils.isStrVal(c[30])){x=b.createElement("POLYGON");x.setAttribute("CLOSED",c[29]);u=0;for(c=M.length;u<c;u++)e=b.createElement("POINT"),e.setAttribute("X",M[u].x),e.setAttribute("Y",M[u].y),x.appendChild(e);a.appendChild(x)}l.createHotspotFromXML(a,!0)};this.createHotspotFromXML=function(a,b){b&&(a=lc(a,"hotspot"));

var c=new ca(a);if(Z.Utils.isStrVal(c.media)||Z.Utils.isStrVal(c.caption)||null!==Z.tourPath||Z.annotations){t[t.length]=c;var e="NAME"==Hf?c.name:"CAPTION"==Hf?c.caption:c.tooltip;if(ka){var g=c.internalID;if(null!=ka){var f=Z.Utils.arrayIndexOfObjectValue(Mb,"value",g);-1!=f?(ka.options[f+("none"!=Z.hotspotListTitle&&"none"!=Z.tourListTitle?1:0)]=new Option(e,g.toString()),Mb[f]={text:e,value:g}):(ka.options[ka.options.length]=new Option(e,g.toString()),Mb[Mb.length]={text:e,value:g})}}}e=new Ka;

Z.Utils.isStrVal(c.media)&&"text"!=c.mediaType&&"polygon"!=c.media?wd(c,!0):wc(c,e)};this.modifyHotspot=function(a,b,c,e,g){var f=-1,f=g?Z.Utils.arrayIndexOfObjectValue(t,"internalID",a):Z.Utils.arrayIndexOfObjectValue(t,"id",a.toString());-1!=f&&(a=t[f],"polygon"!=a.media||"x"!=b&&"y"!=b||(g=new Z.Utils.Point("x"==b?c:a.x,"y"==b?c:a.y),Qb(a,g)),a[b]=c,"rollover"==b&&!1==c&&(a.visibility=!0),"media"==b&&"icon"==a.mediaType&&wd(a,!1),"undefined"!==typeof e&&null!==e&&e||Wa())};this.deleteHotspot=function(a,

b,c){var e=-1;c?e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a):(e=Z.Utils.arrayIndexOfObjectValue(t,"id",a.toString()),a=t[e].internalID);-1!=e&&(t=Z.Utils.arraySplice(t,e,1),Xc(a),!b&&Z.hotspots&&null!=ka&&(a=Z.Utils.arrayIndexOfObjectValue(Mb,"value",a),-1!=a&&(Mb=Z.Utils.arraySplice(Mb,a,1),Z.Utils.updateSelectElement(ka,Mb),b=ka.length,0!=b&&(ka.selectedIndex=a>b-1?b-1:a))))};this.deleteAllHotspots=function(){t=[];la&&(la.innerHTML="");ka.options.length=0};this.deleteAllMeasureHotspots=function(){var a=

t.length;if(0<a&&la&&0<la.childNodes.length){for(var b=0;b<a;b++)"measure"==t[b].mediaType&&(t=Z.Utils.arraySplice(t,0,1));Wa()}};this.setLabelFilterByDisplayList=function(a,b){l.setHotspotFilterByDisplayList(a,b)};this.setHotspotFilterByDisplayList=function(a,b){la&&Z.Utils.clearDisplay(la);Sa&&Z.Utils.clearDisplay(Sa);ya&&Z.Utils.clearDisplay(ya);"undefined"!==typeof a&&null!==a&&0<a.length&&(b?he=a:ge=a);"inline-block"==Wb.display&&Vf()};this.clearLabelFilterByDisplayList=function(){l.clearHotspotFilterByDisplayList()};

this.clearHotspotFilterByDisplayList=function(){"undefined"!==typeof ge&&Z.Utils.arrayClear(ge);"undefined"!==typeof he&&Z.Utils.arrayClear(he);"inline-block"==Wb.display&&Wa()};this.getLabelIDsInCurrentView=function(a){for(var b=[],c=new Ka,e=0,g=t.length;e<g;e++){var f=t[e];f.x>c.box.l&&f.x<c.box.r&&f.y>c.box.t&&f.y<c.box.b&&(b[b.length]=a?f.internalID:f.id)}return b};this.getHotspotsVisibility=function(){return"inline-block"==Wb.display};this.setHotspotsVisibility=function(a){Wb.display=a?"inline-block":

"none";Wa()};this.setHotspotVisibility=function(a,b){var c=a.firstChild;if(c&&c.style){c.style.visibility="visible";var e=b?"visible":"hidden";c.style.backgroundColor=b?"":"#FFFFFF";Z.Utils.setOpacity(c,b?1:.01);(c=a.firstChild.childNodes[1])&&c.style&&(c.style.visibility=e);e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a.internalID);-1!=e&&(a=t[e],a.visibility=b)}};this.setHotspotsVisibilityByFilter=function(a,b,c){if(0<t.length)if(la&&0<la.childNodes.length)for(var e=0,g=t.length;e<g;e++){if(t[e][a]==

b){var f=document.getElementById("hot"+t[e].id);null!==f&&l.setHotspotVisibility(f,c)}}else window.setTimeout(function(){setHotspotsVisibilityByFilter(a,b,c)},100);return c};this.setHotspotVisibilityByID=function(a,b){if(0<t.length)if(la&&0<la.childNodes.length){var c=Z.Utils.arrayIndexOfObjectValue(t,"id",a);-1!=c&&(c=document.getElementById("hot"+t[c].id),null!=c&&l.setHotspotVisibility(c,b))}else window.setTimeout(function(){setHotspotVisibilityByID(a,b)},100)};this.parseAnnotationsXML=function(a){"undefined"!==

typeof X&&Z.Utils.arrayClear(X);"undefined"!==typeof mb&&Z.Utils.arrayClear(mb);"undefined"!==typeof da&&Z.Utils.arrayClear(da);"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba);"undefined"!==typeof se&&Z.Utils.arrayClear(se);"undefined"!==typeof labelCaptionPositionListDP&&Z.Utils.arrayClear(labelCaptionPositionListDP);"undefined"!==typeof labelTargetListDP&&Z.Utils.arrayClear(labelTargetListDP);"undefined"!==typeof pa&&Z.Utils.arrayClear(pa);"undefined"!==typeof nb&&Z.Utils.arrayClear(nb);oe=!1;$b=

!0;var b=Mc(),c=ja(b,"root"),e=ja(b,"setup"),g=a.getElementsByTagName("SETUP");0==g.length&&(g=a.getElementsByTagName("LABELSETUP"));if(0<g.length){g=g[0];temp=g.getAttribute("PANELPOSITION");Z.Utils.isStrVal(temp)&&e.setAttribute("PANELPOSITION",temp);var f=g.getAttribute("INITIALVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("z134")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("INITIALVISIBILITY",initVis));f=g.getAttribute("POIVISIBILITY");Z.Utils.isStrVal(f)&&

(initVis=Z.Utils.getResource("z66")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("POIVISIBILITY",initVis));f=g.getAttribute("LABELVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("z52")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("LABELVISIBILITY",initVis));f=g.getAttribute("NOTEVISIBILITY");Z.Utils.isStrVal(f)&&(initVis=Z.Utils.getResource("z60")?"0"!=f&&"hide"!=f?"1":"0":"1"!=f&&"show"!=f?"0":"1",e.setAttribute("NOTEVISIBILITY",initVis));

temp=g.getAttribute("MINSCALE");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&0<parseFloat(temp)&&e.setAttribute("MINSCALE",temp);temp=g.getAttribute("MAXSCALE");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&0<parseFloat(temp)&&e.setAttribute("MAXSCALE",temp)}c.appendChild(e);a=a.getElementsByTagName("POI");e=0;for(g=a.length;e<g;e++){var f=ja(b,"poi"),h=a[e];temp=h.getAttribute("ID");Z.Utils.isStrVal(temp)&&f.setAttribute("ID",temp);temp=h.getAttribute("NAME");Z.Utils.isStrVal(temp)&&f.setAttribute("NAME",

temp);temp=h.getAttribute("X");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&f.setAttribute("X","center"==temp?imageCenterX.toString():temp);temp=h.getAttribute("Y");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&f.setAttribute("Y","center"==temp?imageCenterY.toString():temp);temp=h.getAttribute("ZOOM");Z.Utils.isStrVal(temp)&&!isNaN(parseFloat(temp))&&f.setAttribute("ZOOM",temp);temp=h.getAttribute("USER");Z.Utils.isStrVal(temp)&&f.setAttribute("USER",temp);temp=h.getAttribute("DATE");Z.Utils.isStrVal(temp)&&

f.setAttribute("DATE",temp);c.appendChild(f);var k=a[e].getElementsByTagName("LABELS")[0];if("undefined"!==typeof k&&null!==k){h=b.createElement("LABELS");f.appendChild(h);for(var k=k.getElementsByTagName("LABEL"),m=0,q=k.length;m<q;m++){var G=ja(b,"label"),N=b,s=k[m],p=void 0,ba=void 0,p=s.getAttribute("ID");Z.Utils.isStrVal(p)&&G.setAttribute("ID",p);p=s.getAttribute("NAME");Z.Utils.isStrVal(p)&&G.setAttribute("NAME",p);p=s.getAttribute("MEDIATYPE");Z.Utils.isStrVal(p)&&(G.setAttribute("MEDIATYPE",

p),ba=s.getAttribute("MEDIA"),Z.Utils.isStrVal(ba)&&G.setAttribute("MEDIA",ba),"url"==p?G.setAttribute("MEDIATYPE","icon"):"symbol"==p&&Z.Utils.isStrVal(ba)&&"polygon"==ba?G.setAttribute("MEDIATYPE","polygon"):"symbol"==p&&Z.Utils.isStrVal(ba)&&"polygon"!=ba&&-1!=ba.indexOf(".")?G.setAttribute("MEDIATYPE","icon"):"text"==p&&G.setAttribute("MEDIA",""));p=s.getAttribute("X");Z.Utils.isStrVal(p)&&!isNaN(parseFloat(p))&&G.setAttribute("X","center"==p?imageCenterX.toString():p);p=s.getAttribute("Y");Z.Utils.isStrVal(p)&&

!isNaN(parseFloat(p))&&G.setAttribute("Y","center"==p?imageCenterY.toString():p);p=s.getAttribute("ZOOM");Z.Utils.isStrVal(p)&&!isNaN(parseFloat(p))&&G.setAttribute("ZOOM",p);p=s.getAttribute("XSCALE");Z.Utils.isStrVal(p)&&!isNaN(parseFloat(p))&&G.setAttribute("XSCALE",p);p=s.getAttribute("YSCALE");Z.Utils.isStrVal(p)&&!isNaN(parseFloat(p))&&G.setAttribute("YSCALE",p);p=s.getAttribute("CLICKURL");Z.Utils.isStrVal(p)?G.setAttribute("CLICKURL",p):(p=s.getAttribute("URL"),Z.Utils.isStrVal(p)&&G.setAttribute("CLICKURL",

p));p=s.getAttribute("URLTARGET");Z.Utils.isStrVal(p)&&G.setAttribute("URLTARGET",p);p=s.getAttribute("ROLLOVER");Z.Utils.isStrVal(p)&&G.setAttribute("ROLLOVER",p);p=s.getAttribute("CAPTION");Z.Utils.isStrVal(p)&&G.setAttribute("CAPTION",p);p=s.getAttribute("TOOLTIP");Z.Utils.isStrVal(p)&&G.setAttribute("TOOLTIP",p);p=s.getAttribute("USER");Z.Utils.isStrVal(p)&&G.setAttribute("USER",p);p=s.getAttribute("DATE");Z.Utils.isStrVal(p)&&G.setAttribute("DATE",p);p=s.getAttribute("TEXTCOLOR");Z.Utils.isStrVal(p)&&

G.setAttribute("TEXTCOLOR",Z.Utils.validateColorVal(p));p=s.getAttribute("BACKCOLOR");Z.Utils.isStrVal(p)&&G.setAttribute("BACKCOLOR",Z.Utils.validateColorVal(p));p=s.getAttribute("LINECOLOR");Z.Utils.isStrVal(p)&&G.setAttribute("LINECOLOR",Z.Utils.validateColorVal(p));p=s.getAttribute("FILLCOLOR");Z.Utils.isStrVal(p)&&G.setAttribute("FILLCOLOR",Z.Utils.validateColorVal(p));p=s.getAttribute("TEXTVISIBLE");Z.Utils.isStrVal(p)&&G.setAttribute("TEXTVISIBLE",p);p=s.getAttribute("BACKVISIBLE");Z.Utils.isStrVal(p)&&

G.setAttribute("BACKVISIBLE",p);p=s.getAttribute("LINEVISIBLE");Z.Utils.isStrVal(p)&&G.setAttribute("LINEVISIBLE",p);p=s.getAttribute("FILLVISIBLE");Z.Utils.isStrVal(p)&&G.setAttribute("FILLVISIBLE",p);p=s.getAttribute("CAPTIONPOSITION");Z.Utils.isStrVal(p)&&G.setAttribute("CAPTIONPOSITION",p);p=s.getAttribute("CATEGORY");Z.Utils.isStrVal(p)&&G.setAttribute("CATEGORY",p);tempNode=s.getElementsByTagName("CAPTION")[0];"undefined"!==typeof tempNode&&null!==tempNode&&G.appendChild(tempNode);tempNode=

s.getElementsByTagName("TOOLTIP")[0];"undefined"!==typeof tempNode&&null!==tempNode&&G.appendChild(tempNode);if(ba=s.getElementsByTagName("POLYGON")[0]){for(var r=ja(N,"polygon"),t=0,Oa=ba.getElementsByTagName("POINT").length;t<Oa;t++){var Va=ba.getElementsByTagName("POINT")[t],D=ja(N,"point"),p=Va.getAttribute("X");Z.Utils.isStrVal(p)&&D.setAttribute("X",p);p=Va.getAttribute("Y");Z.Utils.isStrVal(p)&&D.setAttribute("Y",p);r.appendChild(D)}p=s.getAttribute("CLOSED");Z.Utils.isStrVal(p)&&G.setAttribute("CLOSED",

p);G.appendChild(r)}h.appendChild(G)}}k=a[e].getElementsByTagName("NOTES")[0];if("undefined"!==typeof k&&null!==k)for(h=b.createElement("NOTES"),f.appendChild(h),f=k.getElementsByTagName("NOTE"),k=0,m=f.length;k<m;k++)q=ja(b,"note"),N=f[k],temp=N.getAttribute("ID"),Z.Utils.isStrVal(temp)&&q.setAttribute("ID",temp),temp=N.getAttribute("NAME"),Z.Utils.isStrVal(temp)&&q.setAttribute("NAME",temp),temp=N.getAttribute("TEXT"),Z.Utils.isStrVal(temp)&&q.setAttribute("TEXT",temp),temp=N.getAttribute("USER"),

Z.Utils.isStrVal(temp)&&q.setAttribute("USER",temp),temp=N.getAttribute("DATE"),Z.Utils.isStrVal(temp)&&q.setAttribute("DATE",temp),h.appendChild(q)}0==a.length&&(f=ja(b,"poi"),c.appendChild(f));jb=b;b=jb.getElementsByTagName("SETUP")[0];Ke=b.getAttribute("PANELPOSITION");c=Z.Utils.getResource("z134");a=b.getAttribute("INITIALVISIBILITY");If=c?"0"!=a&&"hide"!=a:"1"!=a&&"show"!=a;"markup"==Z.editMode?yd=Fb=zd=!1:(yd="0"!=b.getAttribute("POIVISIBILITY"),Fb="0"!=b.getAttribute("LABELVISIBILITY"),zd=

"0"!=b.getAttribute("NOTEVISIBILITY"));if("undefined"!==typeof Z.AnnotationPanelDisplay)if(null===Z.AnnotationPanelDisplay){Z.AnnotationPanelDisplay=Z.Utils.createContainerElement("div","AnnotationPanelDisplay","inline-block","absolute","hidden","1px","1px","1px","1px","solid","1px","transparent none","0px","0px","normal","default");jf=Z.AnnotationPanelDisplay;ee=jf.style;Z.ViewerDisplay.appendChild(Z.AnnotationPanelDisplay);c=parseInt(Z.Utils.getResource("z230"),10);ee.zIndex=(c+4).toString();c=

Z.Utils.createContainerElement("div","annotationPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal");Z.AnnotationPanelDisplay.appendChild(c);a=parseInt(Z.Utils.getResource("z63"),10);e=[{text:Z.Utils.getResource("z20"),value:"0"}];"undefined"===typeof V||null===V?(g=Z.Utils.createContainerElement("div","labelPOITextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px",

"nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z410")),g.appendChild(f),V=new Z.Utils.createSelectElement("poiList","",e,1,1,0,a,"hidden",Ve),Z.AnnotationPanelDisplay.appendChild(g),Z.AnnotationPanelDisplay.appendChild(V)):Z.Utils.arrayClear(X);"undefined"===typeof ra||null===ra?("markup"!=Z.editMode&&(g=Z.Utils.createContainerElement("div","labelLabelTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),

f=document.createTextNode(Z.Utils.getResource("z408")),g.appendChild(f),Z.AnnotationPanelDisplay.appendChild(g)),ra=new Z.Utils.createSelectElement("labelList","",e,1,1,0,a,"hidden",ve),Z.AnnotationPanelDisplay.appendChild(ra)):(Z.Utils.arrayClear(da),Z.Utils.arrayClear(Ba));if("undefined"===typeof wa||null===wa){if(g=Z.Utils.createContainerElement("div","labelNoteTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("z409")),

g.appendChild(f),wa=new Z.Utils.createSelectElement("noteList","",e,1,1,0,a,"hidden",we),a=Z.Utils.getResource("z21"),a=Z.Utils.createTextElement("noteTextElement",a,"1px","1px","1px","1px","0px","solid","1px",!0,"verdana","1px","none",null,1,"auto","auto",null),Z.Utils.addEventListener(a.firstChild,"focus",nc),Z.Utils.addEventListener(a.firstChild,"blur",Yb),Z.AnnotationPanelDisplay.appendChild(g),Z.AnnotationPanelDisplay.appendChild(wa),Z.AnnotationPanelDisplay.appendChild(a),a=document.getElementById("textBoxFor-noteTextElement"))a.style.visibility=

"hidden"}else Z.Utils.arrayClear(pa),Z.Utils.arrayClear(nb);null===Z.editMode?(Gd(),nd()):$c();Z.Utils.addEventListener(c,"mousedown",Z.Utils.preventDefault)}else $b||nd();c=parseFloat(b.getAttribute("MINSCALE"));b=parseFloat(b.getAttribute("MAXSCALE"));me=isNaN(c)||0>=c?1:c;ne=isNaN(b)||0>=b?1:b;b=jb.getElementsByTagName("POI");c=0;for(a=b.length;c<a;c++){e=Pa("poi");b[c].setAttribute("INTERNALID",e);pe(b[c]);if(g=b[c].getElementsByTagName("LABELS")[0])for(g=g.getElementsByTagName("LABEL"),f=0,h=

g.length;f<h;f++)k=Pa("label"),g[f].setAttribute("INTERNALID",k),g[f].setAttribute("POIID",e),g[f]=Zc(g[f]),l.z497(g[f]);if(g=b[c].getElementsByTagName("NOTES")[0])for(g=g.getElementsByTagName("NOTE"),f=0,h=g.length;f<h;f++)k=Pa("note"),g[f].setAttribute("INTERNALID",k),g[f].setAttribute("POIID",e),mc(g[f])}2==Z.debug&&oe&&Z.Utils.trace(Z.Utils.getResource("z246"));$b=!1;Z.Utils.validateCallback("annotationsLoaded");Z.Utils.updateSelectElement(V,X);nd();jb=qc(jb)};this.createLabelFromParameters=function(a,

b,c,e,g,f,h,k,m,p,G,s,q,N,ba,r,t,Oa,Va,D,w,C,F,u,A,J,Gb,y,x,E,M,H,I,U,db){a=Z.Utils.arrayToArrayOfStrings([a,b,c,e,g,f,h,k,m,p,G,s,q,N,ba,r,t,Oa,Va,D,w,C,F,u,A,J,Gb,y,x,E,M,H,I,U,db]);a=Z.Utils.xmlConvertTextToDoc('<LABEL ID="'+a[0]+'" NAME="'+a[1]+'" MEDIATYPE="'+a[2]+'" MEDIA="'+a[3]+'" AUDIO="'+a[4]+'" X="'+a[5]+'" Y="'+a[6]+'" ZOOM="'+a[7]+'" XSCALE="'+a[8]+'" YSCALE="'+a[9]+'" CLICKURL="'+a[10]+'" URLTARGET="'+a[11]+'" ROLLOVER="'+a[12]+'" CAPTION="'+a[13]+'" TOOLTIP="'+a[14]+'" TEXTCOLOR="'+

a[15]+'" BACKCOLOR="'+a[16]+'" LINECOLOR="'+a[17]+'" FILLCOLOR="'+a[18]+'" TEXTVISIBLE="'+a[19]+'" BACKVISIBLE="'+a[20]+'" LINEVISIBLE="'+a[21]+'" FILLVISIBLE="'+a[22]+'" CAPTIONPOSITION="'+a[23]+'" SAVED="'+a[24]+'" INTERNALID="'+a[25]+'" POIID="'+a[26]+'" POLYGONCLOSED="'+a[27]+'" SHOWFOR="'+a[28]+'" TRANSITION="'+a[29]+'" CHANGEFOR="'+a[30]+'" ROTATION="'+a[31]+'"></LABEL>');b=a.getElementsByTagName("LABEL")[0];Z.Utils.isStrVal(b.getAttribute("INTERNALID"))||b.setAttribute("INTERNALID",Pa("label"));

Z.Utils.isStrVal(y)&&(y=Z.Utils.xmlConvertTextToDoc(y).getElementsByTagName("CAPTION")[0].innerHTML,c=a.createElement("CAPTION"),c.innerHTML=y,b.appendChild(c));y=x;Z.Utils.isStrVal(y)&&(y=Z.Utils.xmlConvertTextToDoc(y).getElementsByTagName("TOOLTIP")[0].innerHTML,x=a.createElement("TOOLTIP"),x.innerHTML=y,b.appendChild(x));if(null!=M){x=a.createElement("POLYGON");y=0;for(c=M.length;y<c;y++)e=a.createElement("POINT"),e.setAttribute("X",M[y].x),e.setAttribute("Y",M[y].y),x.appendChild(e);b.appendChild(x)}l.z497(b,

!0)};this.createLabelFromJSON=function(a,b){var c=Z.Utils.jsonConvertObjectToXMLText(a),c=Z.Utils.xmlConvertTextToDoc(c).getElementsByTagName("LABEL")[0];l.z497(c,!0)};this.z497=function(a,b){b&&(a=lc(a,"label"));var c=a.getAttribute("INTERNALID"),e=unescape(a.getAttribute("NAME")),g=a.getAttribute("INTERNALID"),f=a.getAttribute("POIID"),c=Z.Utils.arrayIndexOfObjectValue(da,"value",c);-1==c&&(c=da.length);da[c]={text:e,value:g,poiID:f};Zb(f,a.internalID);l.createHotspotFromXML(a)};this.modifyLabel=

function(a,b,c,e,g){l.modifyHotspot(a.toString(),b,c,e,g)};this.calculateAnnotationPanelDimensions=function(a,b,c){var e=parseInt(Z.Utils.getResource("z65"),10),g=parseInt(Z.Utils.getResource("z61"),10);"markup"==Z.editMode?(e-=20,g+=105,a||(g-=24),b||(g-=24),c||(g-=115)):null!==Z.editMode?(g+=244,a||(g-=50),b||(g-=235),c||(g-=140)):(a||(g-=24),b||(g-=24),c||(g-=115));this.w=e;this.h=g};this.calculateAnnotationPanelCoords=function(a,b,c,e,g){if(Z.annotationPanelVisible)switch(a){case "0":c=a=-1E3;

break;case "1":c=a=15;break;case "2":a=e-b-15;c=15;break;case "3":a=e-b-15;c=null!=toolbar?g-c-15:g-15;break;case "4":a=15;c=null!=toolbar?g-c-15:g-15;break;default:a=e-b-15,c=15}else c=a=-1E3;return new Z.Utils.Point(a,c)};this.z542AnnotationPanel=function(){return oc};this.sizeAndPositionAnnotationPanel=function(a,b,c,e,g){"undefined"!==typeof b&&null!==b&&(a.width=b+"px");"undefined"!==typeof c&&null!==c&&(a.height=c+"px");"undefined"!==typeof e&&null!==e&&(a.left=e+"px");"undefined"!==typeof g&&

null!==g&&(a.top=g+"px")};this.goToLabelByID=function(a,b,c){"undefined"!==typeof b&&null!==b?I=b:"undefined"!==typeof a&&null!==a&&(b=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a),I=-1!=b?t[b]:null);if("undefined"!==typeof c&&null!==c&&!c)for(c=0,b=t.length;c<b&&t[c].id!=a;c++);I&&(c=Z.imageW/2,b=Z.imageH/2,a=I.x,c="center"==a?c:parseFloat(a),a=I.y,b="center"==a?b:parseFloat(a),a=I.z,a="-1"==a?Z.fitZ:parseFloat(a),l.zoomAndPanToView(c,b,a/100))};this.getCurrentLabel=function(){return I};this.getLabelXMLText=

function(a){var b=null,b=null;a=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a);-1!=a&&(b=l.convertLabelToXML(t[a]),b=Z.Utils.xmlConvertDocToText(b));return b};this.getLabelJSONObject=function(a,b){var c=null,e=b?Z.Utils.arrayIndexOfObjectValue(t,"internalID",a):Z.Utils.arrayIndexOfObjectValue(t,"id",a);-1!=e&&(c=l.convertLabelToJSON(t[e]));return c};this.setEditModeLabel=function(a,b,c,e){c=Z.labelMode;Z.labelMode=a;null==Z.editing&&"view"!=a?Z.editing="addLabel":null!=Z.editing&&"view"==a&&(Z.editing=

null);var g=parseInt(Z.Utils.getResource("z6"),10);Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOEDITMODE"+a.toUpperCase()),!1,g,"center",!0);Z.overlayMessage&&(Z.overlayMessage.parentNode.style.display="none");if("edit"==Z.editMode&&"editLabel"==Z.editing)if(l.modifyHotspot(w,"mediaType",a,!0,!0),"freehand"==a)"freehand"!=c&&l.modifyHotspot(w,"polygonPts",null,!0,!0),l.modifyHotspot(w,"image",null,!0,!0),l.modifyHotspot(w,"closed","false",!0,!0),l.modifyHotspot(w,"media","polygon",!1,!0);else if("text"==

a)l.modifyLabel(w,"image",null,!0,!0),l.modifyLabel(w,"captionPosition","5",!0,!0),l.modifyLabel(w,"media",null,!1,!0);else if("icon"==a)"icon"!=c&&0<labelIconList.selectedIndex&&(e=!0),c=labelIconList[labelIconList.selectedIndex].value,c="External Graphics File"!=c?Z.annotationFolder+"/"+c:"placeholder",l.modifyHotspot(w,"media",c,!1,!0);else if("rectangle"==a){if(I&&I.polygonPts&&4==I.polygonPts.length&&("polygon"==c||"measure"==c)?(c=Ac(I.polygonPts,0),l.modifyHotspot(w,"polygonPts",c,!0,!0),c=

Ac(I.polygonPts,1),l.modifyHotspot(w,"polygonPts",c,!0,!0),c=Ac(I.polygonPts,2),l.modifyHotspot(w,"polygonPts",c,!0,!0),c=Ac(I.polygonPts,3),l.modifyHotspot(w,"polygonPts",c,!0,!0)):l.modifyHotspot(w,"polygonPts",null,!0,!0),l.modifyHotspot(w,"image",null,!0,!0),l.modifyHotspot(w,"media","polygon",!1,!0),g=I&&I.polygonPts&&0<I.polygonPts.length)c=new Z.Utils.Point(I.polygonPts[0].x,I.polygonPts[0].y),zc(w,c)}else"polygon"==a?("rectangle"!=c&&"polygon"!=c&&"measure"!=c&&l.modifyHotspot(w,"polygonPts",

null,!0,!0),l.modifyHotspot(w,"image",null,!0,!0),l.modifyHotspot(w,"media","polygon",!1,!0)):"measure"==a&&((g=I&&I.polygonPts&&0<I.polygonPts.length)&&"rectangle"!=c&&"polygon"!=c&&"measure"!=c&&l.modifyHotspot(w,"polygonPts",null,!0,!0),l.modifyHotspot(w,"image",null,!0,!0),l.modifyHotspot(w,"media","polygon",!1,!0),g&&(c=new Z.Utils.Point(I.polygonPts[0].x,I.polygonPts[0].y),zc(w,c)));null!==Z.editMode?(c="view"==a?"buttonViewMode":"buttonEditMode"+Z.Utils.stringUpperCaseFirstLetter(a),Z.Toolbar.positionButtonBorder(c)):

Z.measureVisible&&(c=document.getElementById("buttonMeasure"),g=document.getElementById("buttonMeasureExit"),c&&g&&(c.style.display="measure"==Z.labelMode?"none":"inline-block",g.style.display="measure"==Z.labelMode?"inline-block":"none"));l.toggleLabelIconPicker("icon"==a&&!e);b&&"icon"==a&&"undefined"!==typeof iconMedia&&Z.Utils.isStrVal(iconMedia)&&(a=document.getElementById("labelIconList"))&&(b=iconMedia.lastIndexOf("/")+1,e=iconMedia.lastIndexOf("."),-1!=b&&-1!=e&&(b=iconMedia.substring(b,e).toLowerCase(),

b=Z.Utils.arrayIndexOfObjectValueSubstring(a,"value",b,null,!0),-1!=b&&(a.selectedIndex=b)));ue=xa=null;bd=!1;Ea=!0;K?xc():Wa()};this.toggleLabelColorPicker=function(a){var b=document.getElementById("buttonContainerLabelColors");if(b){var c="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":"none"}};this.setDrawingColor=function(a,b){"markup"!=Z.editMode&&l.toggleLabelColorPicker(!1);var c;switch(a){case "buttonColor0":c="#FFFFFF";break;case "buttonColor1":c=

"#FFFF00";break;case "buttonColor2":c="#00FFFF";break;case "buttonColor3":c="#800080";break;case "buttonColor4":c="#008000";break;case "buttonColor5":c="#FF0000";break;case "buttonColor6":c="#0000FF";break;case "buttonColor7":c="#000000"}cd=of=lineStrokeColor=c;var e="#FFFFFF"==c?"#000000":"#FFFFFF";b||null===w||!0!=Z.editMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing||(l.modifyHotspot(w,"textColor",c,!0,!0),l.modifyHotspot(w,"backColor",e,!0,!0),l.modifyHotspot(w,"lineColor",c,!1,!0))};this.toggleLabelIconPicker=

function(a){var b=document.getElementById("buttonContainerLabelIcons");if(b){var c="inline-block"==b.style.display;b.style.display=("undefined"!==typeof a&&null!==a?a:!c)?"inline-block":"none"}};this.addNewPOI=function(){Hd=0<V.options.length?V.options[V.selectedIndex].value:0;eb("save","pois");Fd();ec(X[X.length-1].value);La("poi","addPOI")};this.editCurrentPOI=function(){Hd=V.options[V.selectedIndex].value;eb("save","pois");La("poi","editPOI")};this.deleteCurrentPOI=function(){La("poi",null);if("undefined"!==

typeof V&&null!==V&&0<V.options.length){var a=-1!=V.selectedIndex?V.selectedIndex:0,b=V[V.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(X,"value",b);-1!=b&&(X=Z.Utils.arraySplice(X,b,1));0<X.length?(b=X.length-1,b=X[a<=b?a:b].value):b=null;ec(b);Hd=0<V.options.length?V.options[V.selectedIndex].value:0;eb("save","pois")}l.saveAnnotations()};this.cancelEditsPOI=function(){La("poi",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");eb("rollback","pois");ec(Hd)};this.saveEditsPOI=

function(a){var b=!$b&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||La("poi",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,750,"center"),Hd=V.options[V.selectedIndex].value,l.saveAnnotations(),eb("save","pois"),Z.Utils.validateCallback("poiSaved"))};this.addNewLabel=function(){od=0<ra.options.length?ra.options[ra.selectedIndex].value:0;eb("save","labels");parseInt(Z.Utils.getResource("z6SHORT"),10);w=null;La("labelPartial","addLabel")};this.editCurrentLabel=function(){od=w;eb("save",

"labels");La("label","editLabel");"view"!=Z.labelMode&&null!==Z.editing&&l.setEditModeLabel(I.mediaType,!0,I.media,!0);null!==I&&"polygon"==I.media&&xc()};this.deleteCurrentLabel=function(){l.toggleLabelIconPicker(!1);"markup"!=Z.editMode&&La("label",null);"undefined"!==typeof ra&&null!==ra&&0<ra.options.length&&l.deleteLabel(ra[ra.selectedIndex].value)};this.deleteLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var c=0,e=t.length;c<e;c++)if(t[c].id==a){a=t[c].internalID;break}"undefined"!==

typeof a&&null!==a&&"undefined"!==typeof da&&null!==da&&(c=Z.Utils.arrayIndexOfObjectValue(da,"value",a.toString()),-1!=c&&(da=Z.Utils.arraySplice(da,c,1)),c=Z.Utils.arrayIndexOfObjectValue(Ba,"value",a.toString()),-1!=c&&(Ba=Z.Utils.arraySplice(Ba,c,1)),l.deleteHotspot(a.toString(),null,!0),0<Ba.length&&"undefined"!==typeof ra&&null!==ra&&0<ra.options.length?(c=-1!=ra.selectedIndex?ra.selectedIndex:0,e=Ba.length-1,a=Ba[c<=e?c:e].value):a=null,Zb(V.options[V.selectedIndex].value,a),od=0<ra.options.length?

ra.options[ra.selectedIndex].value:"0",eb("save","labels"));l.saveAnnotations()};this.cancelEditsLabel=function(){l.toggleLabelIconPicker(!1);La("label",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");eb("rollback","labels");Ea=!0;Zb(V.options[V.selectedIndex].value,od);Wa()};this.saveEditsLabel=function(a){l.toggleLabelIconPicker(!1);var b=!$b&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||"markup"==Z.editMode||La("label",null);b&&(Z.Utils.showMessage(Z.Utils.getResource("z15"),

!1,750,"center"),od=ra.options[ra.selectedIndex].value,l.saveAnnotations(),eb("save","labels"),Ea=!0,Zb(V.options[V.selectedIndex].value,od),Z.Utils.validateCallback("labelSaved"),Z.Utils.validateCallback("labelSavedGetJSONObject"));Wa()};this.addNewNote=function(){Ie=0<wa.options.length?wa.options[wa.selectedIndex].value:0;eb("save","notes");var a=Z.Utils.arrayToArrayOfStrings([void 0,void 0,void 0,void 0,void 0]),a=Z.Utils.xmlConvertTextToDoc('<NOTE ID="'+a[0]+'" NAME="'+a[1]+'" TEXT="'+a[2]+'" INTERNALID="'+

a[3]+'" POIID="'+a[4]+'" ></NOTE>').getElementsByTagName("NOTE")[0];mc(a,!0);a=pa[pa.length-1];Nc(a.poiID,a.value);La("note","addNote")};this.editCurrentNote=function(){Ie=wa.options[wa.selectedIndex].value;eb("save","notes");La("note","editNote")};this.deleteCurrentNote=function(){La("note",null);if("undefined"!==typeof wa&&null!==wa&&0<wa.options.length){var a=-1!=wa.selectedIndex?wa.selectedIndex:0,b=wa[wa.selectedIndex].value,b=Z.Utils.arrayIndexOfObjectValue(pa,"value",b);-1!=b&&(pa=Z.Utils.arraySplice(pa,

b,1));0<pa.length?(b=pa.length-1,b=pa[a<=b?a:b].value):b=null;"markup"!=Z.editMode&&Nc(V.options[V.selectedIndex].value,b);Ie=0<wa.options.length?wa.options[wa.selectedIndex].value:0;eb("save","notes")}l.saveAnnotations()};this.cancelEditsNote=function(){La("note",null);Z.Utils.showMessage(Z.Utils.getResource("z2"),!1,750,"center");eb("rollback","notes");Nc(V.options[V.selectedIndex].value,Ie)};this.saveEditsNote=function(a){var b=!$b&&null!==Z.editing&&Z.Viewport.verifyEditsUnsaved();a||La("note",

null);b&&(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,750,"center"),Ie=wa.options[wa.selectedIndex].value,l.saveAnnotations(),eb("save","notes"),Z.Utils.validateCallback("noteSaved"))};this.deleteAllAnnotations=function(){var a=Z.Utils.xmlConvertTextToDoc("<ZAS></ZAS>"),b=a.getElementsByTagName("ZAS")[0],c=ja(a,"setup");b.appendChild(c);var b=jb.getElementsByTagName("SETUP")[0],e=b.getAttribute("PANELPOSITION");Z.Utils.isStrVal(e)&&c.setAttribute("PANELPOSITION",e);e=b.getAttribute("INITIALVISIBILITY");

Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("z134")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",c.setAttribute("INITIALVISIBILITY",e));e=b.getAttribute("POIVISIBILITY");Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("z66")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",c.setAttribute("POIVISIBILITY",e));e=b.getAttribute("LABELVISIBILITY");Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("z52"),c.setAttribute("LABELVISIBILITY",e?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1"));e=b.getAttribute("NOTEVISIBILITY");

Z.Utils.isStrVal(e)&&(e=Z.Utils.getResource("z60")?"0"!=e&&"hide"!=e?"1":"0":"1"!=e&&"show"!=e?"0":"1",c.setAttribute("NOTEVISIBILITY",e));e=b.getAttribute("MINSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&c.setAttribute("MINSCALE",e);e=b.getAttribute("MAXSCALE");Z.Utils.isStrVal(e)&&!isNaN(parseFloat(e))&&0<parseFloat(e)&&c.setAttribute("MAXSCALE",e);la&&("undefined"!==typeof t&&Z.Utils.arrayClear(t),"undefined"!==typeof mb&&Z.Utils.arrayClear(mb),null!=ka?"undefined"!==typeof Mb&&

Z.Utils.arrayClear(Mb):("undefined"!==typeof X&&Z.Utils.arrayClear(X),"undefined"!==typeof da&&Z.Utils.arrayClear(da),"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba),"undefined"!==typeof pa&&Z.Utils.arrayClear(pa),"undefined"!==typeof nb&&Z.Utils.arrayClear(nb)));Z.Viewport.parseAnnotationsXML(a);Wa()};this.saveLabel=function(a,b){if("undefined"!==typeof b&&null!==b&&!b)for(var c=0,e=t.length;c<e;c++)if(t[c].id==a){a=t[c].internalID;break}"undefined"!==typeof a&&null!==a&&(c=Z.Utils.arrayIndexOfObjectValue(t,

"internalID",a),c=-1!=c?t[c]:null)&&(e=jb,jb=l.convertLabelToXML(c),l.saveAnnotations(),jb=e)};this.convertLabelToXML=function(a){var b,c=Mc(),e=ja(c,"label");e.setAttribute("ID",a.id);e.setAttribute("NAME",Z.Utils.stringReadable(escape(a.name)));e.setAttribute("MEDIATYPE",a.mediaType);e.setAttribute("MEDIA",a.media);e.setAttribute("X",a.x);e.setAttribute("Y",a.y);e.setAttribute("ZOOM",a.z);e.setAttribute("XSCALE",a.xScale);e.setAttribute("YSCALE",a.yScale);e.setAttribute("CLICKURL",a.clickURL);e.setAttribute("URLTARGET",

a.urlTarget);b=!0==a.rollover?"1":"0";e.setAttribute("ROLLOVER",b);e.setAttribute("CAPTION",Z.Utils.stringReadable(escape(a.caption)));e.setAttribute("TOOLTIP",Z.Utils.stringReadable(escape(a.tooltip)));e.setAttribute("USER",a.user);e.setAttribute("DATE",a.date);e.setAttribute("TEXTCOLOR",a.textColor);e.setAttribute("BACKCOLOR",a.backColor);e.setAttribute("LINECOLOR",a.lineColor);e.setAttribute("FILLCOLOR",a.fillColor);b=!1!=a.textVisible?"1":"0";e.setAttribute("TEXTVISIBLE",b);b=!1!=a.backVisible?

"1":"0";e.setAttribute("BACKVISIBLE",b);b=!1!=a.lineVisible?"1":"0";e.setAttribute("LINEVISIBLE",b);b=!1!=a.fillVisible?"1":"0";e.setAttribute("FILLVISIBLE",b);e.setAttribute("CAPTIONPOSITION",a.captionPosition);e.setAttribute("INTERNALID",a.internalID.toString());e.setAttribute("POIID",a.poiID.toString());b=a.captionHTML;if(Z.Utils.isStrVal(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("CAPTION")[0])){b=b.innerHTML;var g=c.createElement("CAPTION");g.innerHTML=b;e.appendChild(g)}b=a.tooltipHTML;

Z.Utils.isStrVal(b)&&(b=Z.Utils.xmlConvertTextToDoc(b).getElementsByTagName("TOOLTIP")[0])&&(b=b.innerHTML,g=c.createElement("TOOLTIP"),g.innerHTML=b,e.appendChild(g));a=a.polygonPts;if(null!=a){b=c.createElement("POLYGON");for(var g=0,f=a.length;g<f;g++){var l=c.createElement("POINT");l.setAttribute("X",a[g].x);l.setAttribute("Y",a[g].y);b.appendChild(l)}e.appendChild(b)}return e};this.convertLabelToJSON=function(a){var b=null;a=l.convertLabelToXML(a);a=Z.Utils.jsonConvertXMLTextToJSONText(a);try{b=

JSON.parse(a)}catch(c){Z.Utils.showMessage(c.name+Z.Utils.getResource("z277")+c.message)}return b};this.saveAnnotations=function(a){jb=qc(jb);if(Z.noPostDefaults){a=Z.Utils.xmlConvertDocToText(jb);a=Z.Utils.xmlConvertTextToDoc(a);var b=a.getElementsByTagName("SETUP")[0];"2"==b.getAttribute("PANELPOSITION")&&b.removeAttribute("PANELPOSITION");"1"==b.getAttribute("INITIALVISIBILITY")&&b.removeAttribute("INITIALVISIBILITY");"1"==b.getAttribute("POIVISIBILITY")&&b.removeAttribute("POIVISIBILITY");"1"==

b.getAttribute("LABELVISIBILITY")&&b.removeAttribute("LABELVISIBILITY");"1"==b.getAttribute("NOTEVISIBILITY")&&b.removeAttribute("NOTEVISIBILITY");.2==parseFloat(b.getAttribute("MINSCALE"))&&b.removeAttribute("MINSCALE");2==parseFloat(b.getAttribute("MAXSCALE"))&&b.removeAttribute("MAXSCALE");for(var b=a.getElementsByTagName("POI"),c=0,e=b.length;c<e;c++){var g=b[c];g.getAttribute("NAME")==Z.Utils.getResource("z43")&&g.removeAttribute("NAME");"center"==g.getAttribute("X")&&g.removeAttribute("X");

"center"==g.getAttribute("Y")&&g.removeAttribute("Y");"-1"==g.getAttribute("ZOOM")&&g.removeAttribute("ZOOM");g.getAttribute("USER")==Z.Utils.getResource("z44")&&g.removeAttribute("USER");g.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&g.removeAttribute("DATE");g.hasAttribute("INTERNALID")&&g.removeAttribute("INTERNALID");if(g=b[c].getElementsByTagName("LABELS")[0])for(var g=g.getElementsByTagName("LABEL"),f=0,l=g.length;f<l;f++){var h=g[f];h.getAttribute("NAME")==Z.Utils.getResource("z37")&&

h.removeAttribute("NAME");"center"==h.getAttribute("X")&&h.removeAttribute("X");"center"==h.getAttribute("Y")&&h.removeAttribute("Y");"100"==h.getAttribute("ZOOM")&&h.removeAttribute("ZOOM");"100"==h.getAttribute("XSCALE")&&h.removeAttribute("XSCALE");"100"==h.getAttribute("YSCALE")&&h.removeAttribute("YSCALE");""==h.getAttribute("CLICKURL")&&h.removeAttribute("CLICKURL");"_blank"==h.getAttribute("URLTARGET")&&h.removeAttribute("URLTARGET");"0"==h.getAttribute("ROLLOVER")&&h.removeAttribute("ROLLOVER");

""==h.getAttribute("CAPTION")&&h.removeAttribute("CAPTION");""==h.getAttribute("TOOLTIP")&&h.removeAttribute("TOOLTIP");h.getAttribute("USER")==Z.Utils.getResource("z39")&&h.removeAttribute("USER");h.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&h.removeAttribute("DATE");h.getAttribute("TEXTCOLOR")==Z.Utils.getResource("z25")&&h.removeAttribute("TEXTCOLOR");h.getAttribute("BACKCOLOR")==Z.Utils.getResource("z22")&&h.removeAttribute("BACKCOLOR");h.getAttribute("LINECOLOR")==Z.Utils.getResource("z48")&&

h.removeAttribute("LINECOLOR");h.getAttribute("FILLCOLOR")==Z.Utils.getResource("z46")&&h.removeAttribute("FILLCOLOR");h.getAttribute("TEXTVISIBLE")==Z.Utils.getResource("z26")&&h.removeAttribute("TEXTVISIBLE");h.getAttribute("BACKVISIBLE")==Z.Utils.getResource("z23")&&h.removeAttribute("BACKVISIBLE");h.getAttribute("LINEVISIBLE")==Z.Utils.getResource("z49")&&h.removeAttribute("LINEVISIBLE");h.getAttribute("FILLVISIBLE")==Z.Utils.getResource("z47")&&h.removeAttribute("FILLVISIBLE");h.getAttribute("CAPTIONPOSITION")==

Z.Utils.getResource("z24")&&h.removeAttribute("CAPTIONPOSITION");h.hasAttribute("INTERNALID")&&h.removeAttribute("INTERNALID")}if(g=b[c].getElementsByTagName("NOTES")[0])for(g=g.getElementsByTagName("NOTE"),f=0,l=g.length;f<l;f++)h=g[f],h.getAttribute("NAME")==Z.Utils.getResource("z40")&&h.removeAttribute("NAME"),h.getAttribute("TEXT")==Z.Utils.getResource("z41")&&h.removeAttribute("TEXT"),h.getAttribute("USER")==Z.Utils.getResource("z42")&&h.removeAttribute("USER"),h.getAttribute("DATE")==Z.Utils.getCurrentUTCDateAsString()&&

h.removeAttribute("DATE"),h.hasAttribute("INTERNALID")&&h.removeAttribute("INTERNALID")}}else a=jb;annotationsXMLOut=a;null===Z.editMode||Z.noPost||(Z.Utils.isStrVal(Z.saveHandlerPath)?-1!=Z.saveHandlerPath.indexOf(Z.Utils.getResource("z13"))?Z.Utils.showMessage(Z.Utils.getResource("z14"),!1,2E3,"center"):(Z.Utils.showMessage(Z.Utils.getResource("z15"),!1,2E3,"center"),(new Z.NetConnector).postXML(Z.saveHandlerPath,annotationsXMLOut)):Z.Utils.showMessage(Z.Utils.getResource("z297"),!0,null,"center"))};

this.setAllHotspotsSaved=function(){for(var a=0,b=t.length;a<b;a++)t[a].saved=!0};this.verifyEditsUnsaved=function(a){a=qc(jb);return Z.Utils.xmlConvertDocToText(jb)!=Z.Utils.xmlConvertDocToText(a)};this.tourStart=function(){l.tourStop();Z.tourPlaying=!0;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="inline-block",b.style.display="none");Z.Utils.playAudio(te,t[Yc].audio);var c=dd(Yc,"next",t.length-1);null!==c&&Z.Utils.functionCallWithDelay(function(){l.goToDestination(c)},

1500)};this.tourStop=function(){Z.tourPlaying=!1;Z.delayedFunctionCallTimer&&(window.clearTimeout(Z.delayedFunctionCallTimer),Z.delayedFunctionCallTimer=null);var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorDestination=function(a){Z.tourPlaying&&a&&l.tourStop();destinationChange("prior")};this.nextDestination=function(a){Z.tourPlaying&&a&&l.tourStop();destinationChange("next")};destinationChange=

function(a){if("undefined"!==typeof ka&&null!==ka&&0<ka.length){Z.Utils.playAudio(te,t[Yc].audio);var b=Z.tourPlaying?t[Yc].showFor:0;Z.Utils.isStrVal(t[Yc].audio)&&(b+=500);var c=dd(Yc,a,t.length-1);null!==c?(Z.Utils.loadAudio(t[c].audio),Z.Utils.functionCallWithDelay(function(){l.goToDestination(c)},b)):l.tourStop()}};this.goToDestination=function(a){Yc=a;a=t[a];var b=Z.tourPlaying?l.nextDestination:null;switch(t.transition){case "ZoomAndPanToView":l.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation,

a.changeFor,null,b);break;case "SetView":l.setView(a.x,a.y,a.z/100,a.rotation,b);break;default:l.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation,a.changeFor,null,b)}a=Z.Utils.arrayIndexOfObjectValue(ka.options,"value",a.internalID.toString());-1!=a&&(ka.selectedIndex=a)};this.parseSlidesXML=function(a){Z.Utils.arrayClear(tb);Z.Utils.arrayClear(bf);var b=a.getElementsByTagName("SETUP")[0],c=b.getAttribute("AUTOSTART");df=Z.Utils.isStrVal(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z208");c=b.getAttribute("AUTOLOOP");

dg=Z.Utils.isStrVal(c)?"0"!=c&&"false"!=c:Z.Utils.getResource("z207");c=b.getAttribute("CHOICELIST");ng=Z.Utils.isStrVal(c)?c:Z.Utils.getResource("z202");c=b.getAttribute("LISTSOURCE");Z.Utils.isStrVal(c)||Z.Utils.getResource("z203");b.getAttribute("LISTTITLE");Z.slideListTitle=Z.Utils.isStrVal(Z.slideListTitle)?Z.slideListTitle:Z.Utils.getResource("z443");a=a.getElementsByTagName("SLIDE");b=0;for(c=a.length;b<c;b++){var e=new ye(a[b]);tb[tb.length]=e;bf[bf.length]={text:e.name,value:e.internalID}}var g=

ng;a=Z.slideListTitle;var b=bf,c="0"==g?"hidden":"visible",e=parseInt(Z.Utils.getResource("z204"),10),f;switch(g){case "0":f=g=0;break;case "1":f=g=25;break;case "2":g=ub-e-25;f=20;break;case "3":g=ub-e-25;f=null!=toolbar?fb-50:fb-37.5;break;case "4":g=25;f=null!=toolbar?fb-50:fb-37.5;break;default:g=ub-e,f=25}g=new Z.Utils.Point(g,f);"undefined"===typeof lb||null===lb?(lb=new Z.Utils.createSelectElement("slideList",a,b,e,g.x,g.y,null,c,ze),Z.ViewerDisplay.appendChild(lb),Bc=0,a=Z.Utils.isStrVal(Z.slideListTitle)&&

"none"!=Z.slideListTitle?1:0,lb.selectedIndex=a):Z.Utils.arrayClear(b);l.initializeAudioMuteButtons();null===Z.imagePath||"null"==Z.imagePath||-1!=Z.imagePath.indexOf("zSlidePath")?l.goToSlide(0,!0):df&&l.slideshowStart()};this.slideshowStart=function(a){l.slideshowStop();Z.slideshowPlaying=!0;var b=document.getElementById("buttonSlideshowStop"),c=document.getElementById("buttonSlideshowStart");b&&c&&(b.style.display="inline-block",c.style.display="none");Z.Utils.playAudio(te,tb[Bc].audio);var b=

Z.slideshowPlaying?tb[Bc].showFor:0,e=a?0:dd(Bc,"next",tb.length-1);null!==e&&(Z.Utils.loadAudio(tb[e].audio),Z.Utils.functionCallWithDelay(function(){l.goToSlide(e)},b))};this.slideshowStop=function(){Z.slideshowPlaying=!1;Z.delayedFunctionCallTimer&&(window.clearTimeout(Z.delayedFunctionCallTimer),Z.delayedFunctionCallTimer=null);var a=document.getElementById("buttonSlideshowStop"),b=document.getElementById("buttonSlideshowStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorSlide=

function(a){Z.slideshowPlaying&&a&&l.slideshowStop();Qd("prior")};this.nextSlide=function(a){Z.slideshowPlaying&&a&&l.slideshowStop();Qd("next")};this.goToSlide=function(a,b){Bc=a;var c=tb[a],e=Z.Utils.parametersToDelimitedString(Z.parameters,"&"),g;temp=c.initialX;var f=Z.Utils.isStrVal(temp)?"center"==temp?"zInitialX="+(Z.imageW/2).toString():isNaN(parseFloat(temp))?null:"zInitialX="+temp:null;temp=c.initialY;g=Z.Utils.isStrVal(temp)?"center"==temp?"zInitialY="+(Z.imageH/2).toString():isNaN(parseFloat(temp))?

null:"zInitialY="+temp:null;temp=c.initialZoom;var h=Z.Utils.isStrVal(temp)?isNaN(parseFloat(temp))?null:"zInitialZoom="+temp:null;temp=c.minZoom;var l=Z.Utils.isStrVal(temp)?isNaN(parseFloat(temp))?null:"zMinZoom="+temp:null;temp=c.maxZoom;var m=Z.Utils.isStrVal(temp)?isNaN(parseFloat(temp))?null:"zMaxZoom="+temp:null,f=null!==f?f:null,f=null!==g?null!==f?f+"&"+g:g:null,f=null!==h?null!==f?f+"&"+h:h:null,f=null!==l?null!==f?f+"&"+l:l:null;g=null!==m?null!==f?f+"&"+m:m:null;h=Z.Utils.isStrVal(g)?

"&":"";e=e+h+g;switch(c.transition){case "Fade":Z.Viewer.setImageWithFade(c.media,e,b);break;case "None":Z.Viewer.setImage(c.media,e,!1,b);break;default:Z.Viewer.setImageWithFade(c.media,e,b)}c=Z.Utils.arrayIndexOfObjectValue(lb.options,"value",c.internalID.toString());-1!=c&&(lb.selectedIndex=c)};this.slideTransitionTimeoutHandler=function(a,b,c,e){e&&(Z.Viewer.setImage(b,c,!1,e),a="in");window.clearTimeout(Z.slideTransitionTimeout);Z.slideTransitionTimeout=null;"out"==a?0<=Z.slideOpacity?(Z.slideOpacity-=

og,a="out"):(Z.slideOpacity=0,a="in",Z.setCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50)}),Z.Viewer.setImage(b,c,!1,null)):(0==Z.slideOpacity&&(Z.Utils.playAudio(te,tb[Bc].audio),Z.clearCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50)})),1>=Z.slideOpacity?(Z.slideOpacity+=og,a="in"):(Z.slideOpacity=1,

a=null));ea&&Z.Utils.setOpacity(ea,Z.slideOpacity);Z.NavigatorDisplay&&Z.Utils.setOpacity(Z.NavigatorDisplay,Z.slideOpacity);null!==a&&0!=Z.slideOpacity&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50))};this.initializeAudioMuteButtons=function(){if(Z.audioContent){var a=document.getElementById("buttonAudioOn");a&&(a.style.display="inline-block")}};this.audioMute=function(a){Z.audioMuted=a;var b=document.getElementById("buttonAudioMuted"),

c=document.getElementById("buttonAudioOn");b&&c&&(a?(b.style.display="inline-block",c.style.display="none"):(b.style.display="none",c.style.display="inline-block"))};this.setView=function(a,b,c,e,g){Gc(a,b,c,e,g)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=Ib&&(Ib-=ae);break;case "in":0>=Ib&&(Ib+=ae);break;case "stop":Ib=0}Z.zooming=0==Ib?"stop":0<Ib?"in":"out";0!=Ib?Cc||((0>Ib&&Z.imageZ>Z.minZ||0<Ib&&Z.imageZ<Z.maxZ)&&l.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(Ga),

Cc=window.setTimeout(Sd,tf)):(Ud(),l.updateView(),l.toggleWatermarks(!0))}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=Hb&&(Hb+=af);break;case "up":0>=Rb&&(Rb+=af);break;case "down":0<=Rb&&(Rb-=af);break;case "right":0<=Hb&&(Hb-=af);break;case "horizontalStop":Hb=0;break;case "verticalStop":Rb=0;break;case "stop":Rb=Hb=0}Z.panningX=0==Hb?"stop":0<Hb?"left":"right";Z.panningY=0==Rb?"stop":0<Rb?"up":"down";x(na,

1);x(na,1);0!=Hb||0!=Rb?Cc||(l.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(Ga),Cc=window.setTimeout(Sd,tf)):(Ud(),l.updateView(),l.toggleWatermarks(!0))}};this.zoomAndPanToView=function(a,b,c,e,g,f,h){l.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof e||null===e)e=Z.imageR;if("undefined"===typeof g||

null===g)g=Lg;if("undefined"===typeof f||null===f)f=Ef;l.toggleWatermarks(!1);Z.useCanvas||Z.Utils.clearDisplay(Ga);if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===typeof e||null===e)e=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=Oa(a,b,c,e,"image");a=b.x;b=b.y;c=ba(c);Ae=0;Td(a,b,c,e,g,f,h)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(Ud(),ed&&

(window.clearTimeout(ed),ed=null),Z.tourPlaying&&b&&l.tourStop(),Z.slideshowPlaying&&b&&l.slideshowStop(),a||l.updateView())};this.z638=function(a){Dc(a)&&(Oe(),Wa(),Va(),Gb())};this.reset=function(a){a?l.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):l.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);Rd(!0)};this.labelScale=function(a){switch(a){case "down":0<=bc&&(bc-=cf);break;case "up":0>=bc&&(bc+=cf);break;case "stop":bc=0}0!=bc?pd||(pd=window.setTimeout(Vd,gg)):(pd&&(window.clearTimeout(pd),

pd=null),bc=0)};this.toggleWatermarks=function(a){if(qd){var b="inline-block"==qd.display;qd.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=function(){Z.z476=!Z.z476;if(Z.z476){var a=parseFloat(Ia.left),b=parseFloat(Ia.top),a=Oa(a,b,Z.imageZ,Z.imageR,"container");T.left=a.x+"px";T.top=a.y+"px";l.updateView()}};this.toggleBackfill=function(){var a=Z.ViewerDisplay.firstChild.firstChild.style;a.display="none"==a.display?"inline-block":"none"};this.toggleDisplay=

function(){var a=Z.ViewerDisplay.firstChild.childNodes[1].style;a.display="none"==a.display?"inline-block":"none"};this.toggleFullViewModeExternal=function(){Gf=!0;l.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){var c=null,e=null;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var g=document.body.style,f=document.documentElement.style,h=Z.ViewerDisplay.style,e=Z.Utils.getElementStyle(Z.pageContainer);Z.fullView?(hg=g.width,ig=g.height,jg=g.overflow,kg=f.overflow,Ff=Z.Utils.isStrVal(e.backgroundColor)&&

"transparent"!=e.backgroundColor?e.backgroundColor:Z.Utils.isStrVal(g.backgroundColor)&&"transparent"!=g.backgroundColor?g.backgroundColor:Z.Utils.getResource("z120"),lg=h.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(fullScreenEntering=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),e=Z.Utils.getScreenSize()):(e=Z.Utils.getWindowSize(),Z.mobileDevice?(g.width=e.x,g.height=e.y):(g.width="100%",g.height="100%")),c=e.x,e=e.y,g.overflow="hidden",f.overflow="hidden",h.backgroundColor=Ff,h.position=

"fixed",h.zIndex="99999999"):(g.overflow=jg,f.overflow=kg,h.backgroundColor=Ff,h.position="relative",h.zIndex=lg,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),g.width=hg,g.height=ig,c=parseFloat(e.width),e=parseFloat(e.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(e)&&(e=Z.ViewerDisplay.clientHeight),Gf=!1);Z.viewerW=c;Z.viewerH=e;l.setSizeAndPosition(c,e);g=document.getElementById("buttonFullView");f=document.getElementById("buttonFullViewExit");

g&&f&&(g.style.display=Z.fullView?"none":"inline-block",f.style.display=Z.fullView?"inline-block":"none");Gf?(be||(g=Z.Utils.getResource("z420"),f=parseFloat(Z.viewerW)-54,h=parseFloat(Z.viewerH)-54,e=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),be=new Z.Utils.Button("buttonFullViewExitExternal",g,null,null,null,null,"34px","34px",f+"px",h+"px","mousedown",Be,"z391EXITEXTERNAL","solid","1px",e,"0px","0px"),Z.ViewerDisplay.appendChild(be.elmt)),be.elmt.style.display="inline-block"):

be&&(be.elmt.style.display="none");Z.ToolbarDisplay&&Z.Toolbar.z542()&&(Z.toolbarCurrentW=-1==Z.toolbarW?c:Z.toolbarW,Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,null,null,1==Z.toolbarPosition?Z.viewerH-Z.toolbarH:0));Z.NavigatorDisplay&&Z.Navigator.z542()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,Z.navigatorL,Z.navigatorT);Z.RulerDisplay&&Z.Ruler.z542()&&Z.Ruler.setSizeAndPosition(null,null,null,null);l.validateXYZDefaults();Z.imageZ=ba(Z.imageZ);c=parseFloat(T.left);g=parseFloat(T.top);

c=Oa(c,g,Z.imageZ,Z.imageR,"container");T.left=c.x+"px";T.top=c.y+"px";l.updateView(!0)};this.toggleEditModeMeasure=function(a){l.zoomAndPanAllStop();"undefined"!==typeof a&&!a||"measure"==Z.labelMode?(null===Z.editMode&&"measure"==Z.labelMode&&0<t.length&&(l.deleteAllMeasureHotspots(),w=null),l.setEditModeLabel("view")):l.setEditModeLabel("measure")};this.rotateClockwise=function(){l.rotate(90,!0)};this.rotateCounterwise=function(){l.rotate(-90,!0)};this.rotate=function(a,b){if(!Z.interactivityOff)if(Z.rotationSupported){Rd();

var c=Z.imageR+a,e=N(c);Z.interactivityOff=!0;b?l.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ,c,600,12,function(){Z.imageR=e}):(Z.Utils.rotateElement(T,c),Z.imageR=e,l.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ))}else Z.Utils.showMessage(Z.Utils.getResource("z12"))};this.increaseImageFilter=function(a){if(Z.Utils.isStrVal(a)){var b;switch(a){case "brightness":b=40;break;case "contrast":b=10;break;case "sharpness":b=1;break;case "blurriness":b=3}l.setImageFilter(a,b)}};this.decreaseImageFilter=function(a){if(Z.Utils.isStrVal(a)){var b;

switch(a){case "brightness":b=-40;break;case "contrast":b=-10;break;case "sharpness":b=-1;break;case "blurriness":b=-3}l.setImageFilter(a,b)}};this.setImageFilter=function(a,b){"undefined"!==typeof a&&null!==a&&"null"!==a&&(-1==Z.Utils.arrayIndexOfObjectValue(rb,"filter",a)||"edges"!=a&&"inversion"!=a&&"grayscale"!=a&&"threshold"!=a)&&(Z.Toolbar.addCounterToImageFilterList(a,rb.length),rb[rb.length]={filter:a,value:b},validateImageFiltersConvolve(),Tc(a,b))};validateImageFiltersConvolve=function(){var a=

-1!=Z.Utils.arrayIndexOfObjectValue(rb,"filter","sharpness"),b=-1!=Z.Utils.arrayIndexOfObjectValue(rb,"filter","blurriness"),c=-1!=Z.Utils.arrayIndexOfObjectValue(rb,"filter","edges");sd=a||b||c};this.clearImageFilterLast=function(){0<rb.length&&(Z.Toolbar.removeLastCounterFromImageFilterList(rb.length),rb.pop(),validateImageFiltersConvolve(),l.updateView(!0))};this.clearImageFiltersAll=function(){0<rb.length&&(Z.Toolbar.removeAllCountersFromImageFilterList(),Z.Utils.arrayClear(rb),validateImageFiltersConvolve(),

l.updateView(!0))};this.fullScreenEscapeHandler=function(a){fullScreenEntering?fullScreenEntering=!1:l.toggleFullViewMode(!1,!0)}};

Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(cb);cb=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice?e(a):f(!a)}function e(a){Q&&(Q.display=a?"inline-block":"none")}function f(a){if(Q){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),e=document.getElementById("buttonMinimize"),f=document.getElementById("buttonExpand"),h=document.getElementById("logoDivider"),

k=0;f&&!B&&(k=parseFloat(f.style.left)+parseFloat(f.style.width)+4);if(Z.imageFiltersVisible)var p=document.getElementById("imageFilterPanelBackground"),s=document.getElementById("buttonContainerImageFilter");var q=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),e&&f&&!B&&(h&&(h.style.display="none"),e.style.display="none",f.style.display="inline-block"),Q.width=k+"px",c&&(c.style.width=k+"px"),p&&s&&(p.style.width="0px",s.style.display="none")):(b&&(b.style.display="inline-block"),e&&f&&!B&&(h&&

(h.style.display="inline-block"),e.style.display="inline-block",f.style.display="none"),Q.width=q+"px",c&&(c.style.width=q+"px"),p&&s&&db&&(p.style.width=D+"px",s.style.display="inline-block"))}}function h(a){if(F&&R){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(F.style.left),c=parseFloat(F.style.left)+parseFloat(F.style.width)-parseFloat(R.style.width)-b;R.style.left=a*c+b+"px"}}function k(a){R&&(ma=!0,a=Z.Utils.getMousePosition(a),R.mouseXPrior=a.x,R.mouseYPrior=a.y)}function r(){if(F&&R){var b=

parseFloat(F.style.left),c=parseFloat(F.style.left)+parseFloat(F.style.width)-parseFloat(R.style.width),e=parseFloat(R.style.left)+(A.x-R.mouseXPrior);e<b?e=b:e>c?e=c:R.mouseXPrior=A.x;R.style.left=e+"px";a.z638(Z.minZ+(e-b)/(c-b)*(Z.maxZ-Z.minZ))}}function p(b){if(b=Z.Utils.event(b)){var c=b.type,e=Z.Utils.target(b);if(e){var f=e.parentNode;f&&(tbID=f.id)}e=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&a.zoomAndPanAllStop(!1,!0);if((!Z.interactivityOff||"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==

tbID||"buttonRotateCounterwise"==tbID)&&(!e||"[object HTMLSelectElement]"!=e&&"[object HTMLOptionElement]"!=e)&&!Z.Utils.isRightMouseButton(b)){Z.mobileDevice&&b.preventDefault();if("viewportContainer"==tbID||ma)if(f=document.getElementById("buttonSlider"))tbID=f.id;var h=f,e=c;if(-1!=h.id.indexOf("button")&&-1==h.id.indexOf("buttonContainer")){var q=h.firstChild,D=h.childNodes[1],h=h.childNodes[2];if(q&&D&&h)if(q=q.style,D=D.style,h=h.style,q.visibility=D.visibility=h.visibility="hidden","mouseover"==

e||"mouseup"==e)D.visibility="visible";else if("mousedown"==e||"mousemove"==e||"touchstart"==e||"MSPointerDown"==e)h.visibility="visible";else if("mouseout"==e||"touchend"==e||"touchcancel"==e||"MSPointerUp"==e)q.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":Z.Utils.removeEventListener(f.firstChild,"mouseover",p);Z.Utils.addEventListener(f.childNodes[1],"mousedown",p);Z.Utils.addEventListener(f.childNodes[1],"mouseout",p);ma&&Z.Utils.addEventListener(f.childNodes[1],

"mouseup",p);break;case "mousedown":"trackSlider"!=tbID&&(Z.Utils.removeEventListener(f.childNodes[1],"mousedown",p),Z.Utils.removeEventListener(f.childNodes[1],"mouseout",p),Z.Utils.addEventListener(f.childNodes[2],"mouseup",p),Z.Utils.addEventListener(f.childNodes[2],"mouseout",p),"buttonSlider"==tbID&&(k(b),E(b),Z.Utils.addEventListener(document,"mousemove",E),L||(L=window.setInterval(r,ha)),Z.Utils.addEventListener(document,"mouseup",p)));a&&u(b,tbID);break;case "mouseup":Z.Utils.removeEventListener(f.childNodes[2],

"mouseup",p);Z.Utils.removeEventListener(f.childNodes[2],"mouseout",p);Z.Utils.addEventListener(f.childNodes[1],"mousedown",p);Z.Utils.addEventListener(f.childNodes[1],"mouseout",p);ma&&Z.Utils.removeEventListener(f.childNodes[1],"mouseup",p);a&&u(b,tbID);break;case "mouseout":Z.Utils.removeEventListener(f.childNodes[1],"mousedown",p);Z.Utils.removeEventListener(f.childNodes[1],"mouseout",p);Z.Utils.addEventListener(f.firstChild,"mouseover",p);a&&u(b,tbID);break;case "touchstart":"buttonSlider"==

tbID&&(k(b),s(b),Z.Utils.addEventListener(document,"touchmove",s),L||(L=window.setInterval(r,ha)));Z.Utils.addEventListener(f,"touchend",p);Z.Utils.addEventListener(f,"touchcancel",p);a&&u(b,tbID);break;case "touchend":Z.Utils.addEventListener(f,"touchstart",p);a&&u(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(f,"touchstart",p);a&&u(b,tbID);break;case "MSPointerDown":"buttonSlider"==tbID&&(k(b),s(b),Z.Utils.addEventListener(document,"MSPointerMove",s),L||(L=window.setInterval(r,ha)));

Z.Utils.addEventListener(f,"MSPointerUp",p);a&&u(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(f,"MSPointerDown",p),a&&u(b,tbID)}}}function u(b,c){var e=b.type;if("mousedown"==e||"touchstart"==e)switch(e=document.activeElement.id,!Z.Utils.isStrVal(e)||"poiNameTextElement"!=e&&"labelNameTextElement"!=e&&"captionTextElement"!=e&&"tooltipTextElement"!=e&&"clickURLTextElement"!=e&&"noteNameTextElement"!=e&&"noteTextElement"!=e||document.getElementById(e).blur(),J.positionButtonBorder(c),c){case "buttonMinimize":b.altKey?

a.setHotspotsVisibility(!a.getHotspotsVisibility()):(J.minimize(!0),Z.Navigator&&Z.Navigator.setVisibility(!1));break;case "buttonExpand":b.altKey?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(J.minimize(!1),Z.Navigator&&Z.Navigator.setVisibility(!0));break;case "buttonZoomOut":a.zoom("out");break;case "buttonSlider":break;case "trackSlider":if(F){var e=Z.Utils.getElementPosition(F),e=Z.mobileDevice?Z.Utils.getMousePosition(b).x-e.x:b.clientX-e.x,f=parseFloat(F.style.width),e=Z.minZ+(e-0)/

(f-0)*(Z.maxZ-Z.minZ);e<Z.minZ+.1&&(e=Z.minZ);e>Z.maxZ-.1&&(e=Z.maxZ);a.z638(e);a.updateView()}break;case "buttonZoomIn":a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(b.altKey);break;case "buttonFullView":break;case "buttonFullViewExit":break;case "buttonMeasure":a.toggleEditModeMeasure(!0);break;case "buttonMeasureExit":a.toggleEditModeMeasure(!1);

break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"));break;case "buttonHelpMarkup":Z.Utils.showHelp(Z.Utils.getResource("z31"));break;case "buttonHelpAnnotation":Z.Utils.showHelp(Z.Utils.getResource("z28"));break;case "buttonRotateClockwise":a.rotateClockwise();break;case "buttonRotateCounterwise":a.rotateCounterwise();break;case "buttonTourPrior":a.priorDestination(!0);

break;case "buttonTourNext":a.nextDestination(!0);break;case "buttonTourStart":a.tourStart();break;case "buttonTourStop":a.tourStop();break;case "buttonSlideshowPrior":a.priorSlide(!0);break;case "buttonSlideshowNext":a.nextSlide(!0);break;case "buttonSlideshowStart":a.slideshowStart();break;case "buttonSlideshowStop":a.slideshowStop();break;case "buttonAudioOn":a.audioMute(!0);break;case "buttonAudioMuted":a.audioMute(!1);break;case "buttonImageFilterPanelShow":J.imageFilterPanelShow();break;case "buttonImageFilterPanelHide":J.imageFilterPanelHide();

break;case "buttonImageFilterPlus":a.increaseImageFilter(x);break;case "buttonImageFilterMinus":a.decreaseImageFilter(x);break;case "buttonImageFilterApply":a.setImageFilter(x);break;case "buttonImageFilterClear":a.clearImageFilterLast();break;case "buttonImageFiltersClearAll":a.clearImageFiltersAll();break;case "buttonPOIAdd":a.addNewPOI();break;case "buttonPOIEdit":a.editCurrentPOI();break;case "buttonPOIDelete":a.deleteCurrentPOI();break;case "buttonPOICancel":a.cancelEditsPOI();break;case "buttonPOISave":a.saveEditsPOI();

break;case "buttonLabelAdd":a.addNewLabel();break;case "buttonLabelEdit":a.editCurrentLabel();break;case "buttonLabelDelete":a.deleteCurrentLabel();break;case "buttonLabelCancel":a.cancelEditsLabel();break;case "buttonLabelSave":a.saveEditsLabel();break;case "buttonNoteAdd":a.addNewNote();break;case "buttonNoteEdit":a.editCurrentNote();break;case "buttonNoteDelete":a.deleteCurrentNote();break;case "buttonNoteCancel":a.cancelEditsNote();break;case "buttonNoteSave":a.saveEditsNote();break;case "buttonClearAll":a.deleteAllAnnotations();

break;case "buttonViewMode":a.setEditModeLabel("view");break;case "buttonEditColorPicker":a.toggleLabelColorPicker();break;case "buttonEditModeFreehand":a.setEditModeLabel("freehand");break;case "buttonEditModeText":a.setEditModeLabel("text");break;case "buttonEditModeIcon":a.setEditModeLabel("icon");break;case "buttonEditModeRectangle":a.setEditModeLabel("rectangle");break;case "buttonEditModePolygon":a.setEditModeLabel("polygon");break;case "buttonEditModeMeasure":a.setEditModeLabel("measure");

break;case "buttonLabelScaleDown":a.labelScale("down");break;case "buttonLabelScaleUp":a.labelScale("up");break;default:"buttonColor"==c.substr(0,11)&&a.setDrawingColor(c)}else if("mouseup"==e||"touchend"==e||"touchcancel"==e)if("buttonSlider"==c||ma){L&&(window.clearInterval(L),L=null);ma&&(Z.mobileDevice?Z.Utils.removeEventListener(document,"touchmove",s):(Z.Utils.removeEventListener(document,"mousemove",E),Z.Utils.removeEventListener(document,"mouseup",p)));for(var e=Z.ToolbarDisplay.childNodes,

f=0,h=e.length;f<h;f++){var k=e[f],q=k.id;if(q&&-1!=q.indexOf("button"))if("buttonContainer"!=q&&"buttonContainerImageFilter"!=q)Z.Utils.setButtonDefaults(k);else for(var k=k.childNodes,q=0,r=k.length;q<r;q++){var D=k[q],C=D.id;C&&-1!=C.indexOf("button")&&Z.Utils.setButtonDefaults(D)}}ma=!1;a.updateView()}else"buttonZoomOut"==c||"buttonZoomIn"==c?(a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==c&&b.altKey&&Z.Utils.showGlobals()):"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"==

c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonLabelScaleDown"==c||"buttonLabelScaleUp"==c?a.labelScale("stop"):"buttonFullView"==c?a.toggleFullViewMode(!0):"buttonFullViewExit"==c&&a.toggleFullViewMode(!1);else"mouseout"==e&&("buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonLabelScaleDown"!=c&&"buttonLabelScaleUp"!=c||a.labelScale("stop"))}function E(a){A=new Z.Utils.Point(a.clientX,

a.clientY)}function s(a){(a=Z.Utils.getFirstTouch(a))&&(A=new Z.Utils.Point(a.pageX,a.pageY))}function C(a){if(a=Z.Utils.event(a))if(a=Z.Utils.target(a),x=a.options[a.selectedIndex].value,"null"!==x){a=document.getElementById("buttonImageFilterPlus");var b=document.getElementById("buttonImageFilterMinus"),c=document.getElementById("buttonImageFilterApply");"brightness"==x||"contrast"==x||"sharpness"==x||"blurriness"==x?(a.style.display="inline-block",b.style.display="inline-block",c.style.display=

"none"):"edges"==x||"inversion"==x||"grayscale"==x||"threshold"==x?(a.style.display="none",b.style.display="none",c.style.display="inline-block"):Z.Utils.showMessage(Z.Utils.getResource("z282"))}else a.selectedIndex=0}var J=this,W=!1;Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var U,Q,F,R,S=[],q=[],H=[],ha=parseInt(Z.Utils.getResource("z205"),10),ma=!1,L=null,A=null,cb=null,oa=null,Ta,ua,B,$;if(Z.imageFiltersVisible)var D,

M=[],db=Z.initialImageFilters,x="";this.z542=function(){return W};this.getSkinArray=function(){return S};this.getSkinSizes=function(){return H};this.show=function(a){c(a)};this.setVisibility=function(a){e(a)};this.minimize=function(a){f(a)};this.z644=function(a){Z.AnnotationPanelDisplay&&(Z.AnnotationPanelDisplay.style.display=!a||Z.measureVisible&&null===Z.editMode?"none":"inline-block")};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};

this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,c){if(Z.progressVisible){cb&&window.clearInterval(cb);var e,f=document.getElementById("progressTextBoxCenteredDiv");f&&(f=f.firstChild)&&(0==a||0==c?(f.nodeValue="llllllllll",cb=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(e=Math.round(100-c/a*100),e=Math.round(e/10),f.nodeValue=Z.Utils.stringMultiply("l",e)))}};this.parseSkinXML=function(b){Z.skinMode=

b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var e,f;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,f="SIZESSTANDARD"):(e=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,f="SIZESLARGE");var k=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof k&&null!==k&&(oa=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);

k=[];k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("TOOLBARH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("LOGOH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERW").nodeValue);k[k.length]=

parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("DIVIDERH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);

k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSW").nodeValue);k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSH").nodeValue);

k[k.length]=parseFloat(b.getElementsByTagName(f)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var s,r,D;f="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.tourPath||Z.slidePath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.panButtonsVisible?35:Z.sliderVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;s=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==s&&(r=s.nodeValue);s=

b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+f.toString());null!==s&&(D=s.nodeValue);if("undefined"!==typeof r&&Z.Utils.isStrVal(r)&&"undefined"!==typeof D&&Z.Utils.isStrVal(D)){r=!1;D=0;for(f+=1;D<f;D++)s=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+D).nodeValue,Z.Utils.isStrVal(s)?q[D]=e+"/"+s:(q[D]="null",r=!0);r&&Z.Utils.showMessage(Z.Utils.getResource("z279"));S=q;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute",

"visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");Q=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),10);Q.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,q[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);H=k;Z.logoVisible&&(Z.Utils.isStrVal(Z.logoCustomPath)?(k=Z.Utils.cacheProofPath(Z.logoCustomPath),k=new Z.Utils.Graphic("toolbarLogo",

k,null,"1px","1px","1px","1px")):k=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,q[7],"1px","1px","1px","1px"),Z.Utils.isStrVal(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),b.setAttribute("outline","none"),b.appendChild(k.elmt),Z.ToolbarDisplay.appendChild(b)):(k.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),Z.ToolbarDisplay.appendChild(k.elmt)),

0==Z.toolbarVisible||1==Z.toolbarVisible)&&(k=new Z.Utils.Graphic("logoDivider",Z.skinPath,q[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(k.elmt));k=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(k);Z.mobileDevice?Z.Utils.addEventListener(k,"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(k,"mousedown",Z.Utils.preventDefault),

Z.Utils.addEventListener(k,"mouseover",J.backgroundEventsHandler));b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,q[0],"1px","1px","0px","0px");k.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,q[9],q[10],q[11],"1px","1px","1px","1px","mouseover",p,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",null,Z.skinPath,q[12],

q[13],q[14],"1px","1px","1px","1px","mouseover",p,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,q[1],q[2],q[3],"1px","1px","1px","1px","mouseover",p,"z400");k.appendChild(b.elmt);Z.sliderVisible&&(b=new Z.Utils.Graphic("trackSlider",Z.skinPath,q[15],"1px","1px","0px","0px","z385"),k.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",p),Z.Utils.addEventListener(b.elmt,"touchstart",p),b=new Z.Utils.Button("buttonSlider",null,Z.skinPath,

q[17],q[18],q[19],"1px","1px","1px","1px","mouseover",p,"z385"),k.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,q[4],q[5],q[6],"1px","1px","1px","1px","mouseover",p,"z399");k.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,q[20],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,q[21],q[22],q[23],"1px","1px","1px","1px","mouseover",p,"z370"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",

null,Z.skinPath,q[24],q[25],q[26],"1px","1px","1px","1px","mouseover",p,"z372"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,q[27],q[28],q[29],"1px","1px","1px","1px","mouseover",p,"z369"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,q[30],q[31],q[32],"1px","1px","1px","1px","mouseover",p,"z371"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonReset",null,Z.skinPath,q[33],q[34],q[35],"1px","1px","1px","1px","mouseover",p,"z378"),k.appendChild(b.elmt));

if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,q[36],"1px","1px","1px","1px"),k.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,q[40],q[41],q[42],"1px","1px","1px","1px","mouseover",p,"z391EXIT"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,q[37],q[38],q[39],"1px","1px","1px","1px","mouseover",p,"z391"),k.appendChild(b.elmt);Z.measureVisible&&null===Z.editMode&&(Z.fullScreenVisible||

Z.fullPageVisible||(b=new Z.Utils.Graphic("measureDivider",Z.skinPath,q[36],"1px","1px","1px","1px"),k.appendChild(b.elmt)),null===Z.editMode&&(b=new Z.Utils.Button("buttonMeasureExit",null,Z.skinPath,q[49],q[50],q[51],"1px","1px","1px","1px","mouseover",p,"z392EXIT"),k.appendChild(b.elmt)),b=new Z.Utils.Button("buttonMeasure",null,Z.skinPath,q[46],q[47],q[48],"1px","1px","1px","1px","mouseover",p,"z392"),k.appendChild(b.elmt));Z.rotationVisible&&(b=new Z.Utils.Graphic("rotateDivider",Z.skinPath,

q[52],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateCounterwise",null,Z.skinPath,q[53],q[54],q[55],"1px","1px","1px","1px","mouseover",p,"z381"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateClockwise",null,Z.skinPath,q[56],q[57],q[58],"1px","1px","1px","1px","mouseover",p,"z380"),k.appendChild(b.elmt));null!==Z.tourPath&&(b=new Z.Utils.Graphic("tourDivider",Z.skinPath,q[59],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourPrior",

null,Z.skinPath,q[60],q[61],q[62],"1px","1px","1px","1px","mouseover",p,"z394"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourNext",null,Z.skinPath,q[63],q[64],q[65],"1px","1px","1px","1px","mouseover",p,"z393"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStart",null,Z.skinPath,q[66],q[67],q[68],"1px","1px","1px","1px","mouseover",p,"z395"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStop",null,Z.skinPath,q[69],q[70],q[71],"1px","1px","1px","1px","mouseover",p,"z396"),

k.appendChild(b.elmt));null!==Z.slidePath&&(b=new Z.Utils.Graphic("slideshowDivider",Z.skinPath,q[59],"1px","1px","1px","1px"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowPrior",null,Z.skinPath,q[60],q[61],q[62],"1px","1px","1px","1px","mouseover",p,"z384"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowNext",null,Z.skinPath,q[63],q[64],q[65],"1px","1px","1px","1px","mouseover",p,"z383"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStart",null,Z.skinPath,q[66],

q[67],q[68],"1px","1px","1px","1px","mouseover",p,"z386"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStop",null,Z.skinPath,q[69],q[70],q[71],"1px","1px","1px","1px","mouseover",p,"z387"),k.appendChild(b.elmt));if(null!==Z.tourPath||null!==Z.slidePath)b=new Z.Utils.Button("buttonAudioOn",null,Z.skinPath,q[72],q[73],q[74],"1px","1px","1px","1px","mouseover",p,"z321"),k.appendChild(b.elmt),b=new Z.Utils.Button("buttonAudioMuted",null,Z.skinPath,q[75],q[76],q[77],"1px","1px","1px","1px",

"mouseover",p,"z322"),k.appendChild(b.elmt);if(Z.imageFiltersVisible){b=new Z.Utils.Graphic("imageFilterDivider",Z.skinPath,q[78],"1px","1px","1px","1px");k.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelHide",null,Z.skinPath,q[79],q[80],q[81],"1px","1px","1px","1px","mouseover",p,"z350");k.appendChild(b.elmt);b=new Z.Utils.Button("buttonImageFilterPanelShow",null,Z.skinPath,q[82],q[83],q[84],"1px","1px","1px","1px","mouseover",p,"z351");k.appendChild(b.elmt);b=Z.Utils.createContainerElement("div",

"buttonContainerImageFilter","none","absolute","visible","1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(b);Z.mobileDevice||Z.Utils.addEventListener(b,"mouseover",J.backgroundEventsHandler);e=parseFloat(Z.Utils.getResource("z82"));r=Z.Utils.getResource("z83");f=Z.Utils.getResource("z83NOALPHA");r=Z.Utils.createContainerElement("div","imageFilterPanelBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",

r,"0px","0px","normal",null,!0);Z.Utils.setOpacity(r,e,f);b.appendChild(r);e=Z.Utils.getResource("z425").split(",");f=Z.Utils.getResource("z426").split(",");r=0;for(D=e.length;r<D;r++)M[M.length]={text:e[r],value:f[r]};e=new Z.Utils.createSelectElement("imageFilterList","",M,1,1,1,null,!0,C);b.appendChild(e);e=new Z.Utils.Button("buttonImageFilterMinus",null,Z.skinPath,q[85],q[86],q[87],"1px","1px","1px","1px","mouseover",p,"z349");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterPlus",

null,Z.skinPath,q[88],q[89],q[90],"1px","1px","1px","1px","mouseover",p,"z352");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterApply",null,Z.skinPath,q[91],q[92],q[93],"1px","1px","1px","1px","mouseover",p,"z346");b.appendChild(e.elmt);e=new Z.Utils.Graphic("imageFilterStateDivider",Z.skinPath,q[94],"1px","1px","1px","1px");b.appendChild(e.elmt);e=new Z.Utils.Button("buttonImageFilterClear",null,Z.skinPath,q[95],q[96],q[97],"1px","1px","1px","1px","mouseover",p,"z347");b.appendChild(e.elmt);

e=new Z.Utils.Button("buttonImageFiltersClearAll",null,Z.skinPath,q[98],q[99],q[100],"1px","1px","1px","1px","mouseover",p,"z347ALL");b.appendChild(e.elmt)}if(1==Z.helpVisible||3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,q[43],q[44],q[45],"1px","1px","1px","1px","mouseover",p,"z342"),k.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px",

"0px","normal",null,!0),e=H[16],k.appendChild(b),k=document.createTextNode(Z.Utils.getResource("z183")),b.appendChild(Z.Utils.createCenteredElement(k,"progressTextBoxCenteredDiv")),null===oa&&(oa=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(k,oa,"verdana",e+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(k));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=H[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=

U=H[1];J.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-U:0);a&&a.z542()&&(1==Z.toolbarVisible&&(k=Z.Utils.getElementStyle(Z.pageContainer),k=parseFloat(k.height),isNaN(k)&&(k=Z.ViewerDisplay.clientHeight),a.setSizeAndPosition(Z.viewerW,k-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),k=a.getZoom(),h(k),a.setDrawingColor("buttonColor0",!0));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);

Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);W=!0;Z.Utils.validateCallback("toolbarInitialized");Z.Viewport&&Z.Viewport.z542()&&Z.Toolbar&&Z.Toolbar.z542()&&Z.Navigator&&Z.Navigator.z542()&&Z.Utils.validateCallback("viewerInitialized")}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(b,c,e,f){"undefined"===typeof b||null===b?b=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=b;if("undefined"===typeof c||null===c)c=0<

Z.toolbarVisible?U:0;if("undefined"===typeof e||null===e)e=0;if("undefined"===typeof f||null===f)f=1==Z.toolbarPosition?Z.viewerH-U:0;Q=Z.ToolbarDisplay.style;Q.width=b+"px";Q.height=c+"px";Q.left=e+"px";Q.top=f+"px";var h=b,k=c,p=H[2],q=H[3],s=H[4],r=H[5],C=H[6],u=H[7],x=H[8],A=H[9],J=H[10],M=H[11],E=H[12],W=H[13],L=H[14],S=H[15],y=0,ma=(k-q)/2+1,ha=(k-r)/2,ca=(k-u)/2,oa=1.3*ca,Wa=ca+4,cb=ca+2,wc=1==Z.logoVisible?0:x/2,Pe=1==Z.logoVisible?0:x/2,Ka=x-(C-s),va=3,Xa=0;Z.panButtonsVisible&&(va+=4,Xa+=

1);if(Z.fullScreenVisible||Z.fullPageVisible)va+=1,Xa+=1;Z.helpVisible&&(va+=1,Z.fullScreenVisible||Z.fullPageVisible||(Xa+=1));Z.measureVisible&&(Z.fullScreenVisible||Z.fullPageVisible||(Xa+=1),va+=1);Z.rotationVisible&&(va+=2,Xa+=1);if(null!==Z.tourPath||null!==Z.slidePath)va+=3,Xa+=1,Z.audioContent&&(va+=1);Z.imageFiltersVisible&&(va+=1,Xa+=1);var Qb=va*x+Xa*Ka;Z.sliderVisible&&(Qb+=W);Ta=ua=B=$=!1;var Lc=(1==Z.logoVisible?p+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?

x:0),le=1==Z.panButtonsVisible?4*x+Ka:0,md=Lc+20+Qb+20+L;md>h&&(Ta=!0,md-W>h&&(ua=!0,md-W-L>h&&(B=!0,md-W-L-Lc>h&&($=!0,Qb-=le),Lc=0),L=0),Qb-=W);var nf=(h-Qb)/2-20+3,Xc=document.getElementById("toolbarBackground");Xc&&(Xc.style.width=h+"px",Xc.style.height=k+"px",Xc.firstChild.style.width=h+"px",Xc.firstChild.style.height=k+"px");var uc=document.getElementById("buttonContainer");uc&&(uc.style.width=Qb+40+"px",uc.style.height=k+"px",uc.style.left=nf+"px");var Zc=document.getElementById("buttonBackground");

Zc&&(Zc.style.width=h+"px",Z.Utils.graphicSize(Zc,parseFloat(uc.style.width),parseFloat(uc.style.height)),Zc.style.left="0px");var Mc=document.getElementById("toolbarLogo");if(Mc){var ja=Mc.style;if(ja)if(B)ja.display="none";else{ja.display="inline-block";Z.Utils.graphicSize(Mc,p,q);ja.left=y+"px";ja.top=ma+"px";var y=y+(p+2),Fd=document.getElementById("logoDivider");if(Fd){Z.Utils.graphicSize(Fd,s,r);var pe=Fd.style;pe.left=y+"px";pe.top=ha+"px"}}}if(0!=Z.toolbarVisible&&1!=Z.toolbarVisible){var mc=

document.getElementById("buttonMinimize"),lc=document.getElementById("buttonExpand");if(mc&&lc){var ib=mc.style,$c=lc.style;ib&&$c&&(B?(ib.display="none",$c.display="none"):(ib.display="inline-block",$c.display="inline-block",Z.Utils.buttonSize(mc,C,u),Z.Utils.buttonSize(lc,C,u),ib.left=y+wc+"px",ib.top=oa+"px",$c.left=y+Pe+"px",$c.top=oa+"px"))}}var y=20,Gd=document.getElementById("buttonZoomOut");if(Gd){Z.Utils.buttonSize(Gd,C,u);var nd=Gd.style;nd.left=y+"px";nd.top=ca+"px";y+=x}F=document.getElementById("trackSlider");

R=document.getElementById("buttonSlider");if(F&&R){var Pa=F.style,ld=R.style;Pa&&ld&&(Ta?(Pa.display="none",ld.display="none"):(Pa.display="inline-block",ld.display="inline-block",Z.Utils.graphicSize(F,M,E),Pa.left=y-2+"px",Pa.top=Wa+"px",Z.Utils.buttonSize(R,A,J),ld.left=parseFloat(Pa.left)+"px",ld.top=cb+"px",y+=W))}var je=document.getElementById("buttonZoomIn");if(je){Z.Utils.buttonSize(je,C,u);var Re=je.style;Re.left=y+"px";Re.top=ca+"px";y+=x+1}if(!$){var ie=document.getElementById("panDivider");

if(ie){Z.Utils.graphicSize(ie,s,r);var Qe=ie.style;Qe.left=y+"px";Qe.top=ha+"px";var y=y+Ka,ke=document.getElementById("buttonPanLeft");if(ke){Z.Utils.buttonSize(ke,C,u);var Se=ke.style;Se.left=y+"px";Se.top=ca+"px";y+=x}var ec=document.getElementById("buttonPanUp");if(ec){Z.Utils.buttonSize(ec,C,u);var Zb=ec.style;Zb.left=y+"px";Zb.top=ca+"px";y+=x}var Id=document.getElementById("buttonPanDown");if(Id){Z.Utils.buttonSize(Id,C,u);var Nc=Id.style;Nc.left=y+"px";Nc.top=ca+"px";y+=x}var Jd=document.getElementById("buttonPanRight");

if(Jd){Z.Utils.buttonSize(Jd,C,u);var Ve=Jd.style;Ve.left=y+"px";Ve.top=ca+"px";y+=x}}}var ve=document.getElementById("buttonReset");if(ve){Z.Utils.buttonSize(ve,C,u);var Ue=ve.style;Ue.left=y+"px";Ue.top=ca+"px";y+=x+1}var qe=document.getElementById("fullViewDivider");if(qe){Z.Utils.graphicSize(qe,s,r);var Te=qe.style;Te.left=y+"px";Te.top=ha+"px";y+=Ka}var re=document.getElementById("buttonFullViewExit");if(re){Z.Utils.buttonSize(re,C,u);var we=re.style;we.left=y+"px";we.top=ca+"px";we.display=

Z.fullView?"inline-block":"none"}var nc=document.getElementById("buttonFullView");if(nc){Z.Utils.buttonSize(nc,C,u);var Yb=nc.style;Yb.left=y+"px";Yb.top=ca+"px";y+=x+1;Yb.display=Z.fullView?"none":"inline-block"}var Kd=document.getElementById("measureDivider");if(Kd){Z.Utils.graphicSize(Kd,s,r);var ad=Kd.style;ad.left=y+"px";ad.top=ha+"px";y+=Ka}if(null===Z.editMode){var Kc=document.getElementById("buttonMeasureExit");if(Kc){Z.Utils.buttonSize(Kc,C,u);var Ld=Kc.style;Ld.left=y+"px";Ld.top=ca+"px";

Ld.display="measure"==Z.labelMode?"inline-block":"none"}}if(mc=document.getElementById("buttonMeasure"))Z.Utils.buttonSize(mc,C,u),ib=mc.style,ib.left=y+"px",ib.top=ca+"px",y+=x+1,ib.display="measure"==Z.labelMode?"none":"inline-block";var Md=document.getElementById("rotateDivider");if(Md){Z.Utils.graphicSize(Md,s,r);var xc=Md.style;xc.left=y+"px";xc.top=ha+"px";var y=y+Ka,Nd=document.getElementById("buttonRotateCounterwise");if(Nd){Z.Utils.buttonSize(Nd,C,u);var xe=Nd.style;xe.left=y+"px";xe.top=

ca+"px";y+=x}var Ac=document.getElementById("buttonRotateClockwise");if(Ac){Z.Utils.buttonSize(Ac,C,u);var Od=Ac.style;Od.left=y+"px";Od.top=ca+"px";y+=x+1}}if(null!==Z.tourPath){var Ya=document.getElementById("tourDivider");if(Ya){Z.Utils.graphicSize(Ya,s,r);var Pd=Ya.style;Pd.left=y+"px";Pd.top=ha+"px";var y=y+Ka,pc=document.getElementById("buttonTourPrior");if(pc){Z.Utils.buttonSize(pc,C,u);var zc=pc.style;zc.left=y+"px";zc.top=ca+"px";y+=x+1}var La=document.getElementById("buttonTourNext");if(La){Z.Utils.buttonSize(La,

C,u);var eb=La.style;eb.left=y+"px";eb.top=ca+"px";y+=x+1}var qc=document.getElementById("buttonTourStop");if(qc){Z.Utils.buttonSize(qc,C,u);var ye=qc.style;ye.left=y+"px";ye.top=ca+"px";ye.display=Z.tourPlaying?"inline-block":"none"}var ze=document.getElementById("buttonTourStart");if(ze){Z.Utils.buttonSize(ze,C,u);var Qd=ze.style;Qd.left=y+"px";Qd.top=ca+"px";y+=x+1;Qd.display=Z.tourPlaying?"none":"inline-block"}}}else if(null!==Z.slidePath){var dd=document.getElementById("slideshowDivider");if(dd){Z.Utils.graphicSize(dd,

s,r);var Rd=dd.style;Rd.left=y+"px";Rd.top=ha+"px";var y=y+Ka,Gc=document.getElementById("buttonSlideshowPrior");if(Gc){Z.Utils.buttonSize(Gc,C,u);var Sd=Gc.style;Sd.left=y+"px";Sd.top=ca+"px";y+=x+1}var Td=document.getElementById("buttonSlideshowNext");if(Td){Z.Utils.buttonSize(Td,C,u);var Ud=Td.style;Ud.left=y+"px";Ud.top=ca+"px";y+=x+1}var Dc=document.getElementById("buttonSlideshowStop");if(Dc){Z.Utils.buttonSize(Dc,C,u);var Vd=Dc.style;Vd.left=y+"px";Vd.top=ca+"px";Vd.display=Z.slideshowPlaying?

"inline-block":"none"}var Be=document.getElementById("buttonSlideshowStart");if(Be){Z.Utils.buttonSize(Be,C,u);var Tc=Be.style;Tc.left=y+"px";Tc.top=ca+"px";y+=x+1;Tc.display=Z.slideshowPlaying?"none":"inline-block"}}}if(null!==Z.tourPath||null!==Z.slidePath){var Wd=document.getElementById("buttonAudioMuted");if(Wd){Z.Utils.buttonSize(Wd,C,u);var Uc=Wd.style;Uc.left=y+"px";Uc.top=ca+"px";Uc.display="none"}var Xd=document.getElementById("buttonAudioOn");if(Xd){Z.Utils.buttonSize(Xd,C,u);var Bb=Xd.style;

Bb.left=y+"px";Bb.top=ca+"px";y+=x+1;Bb.display="none"}a.initializeAudioMuteButtons()}if(Z.imageFiltersVisible){var sa=document.getElementById("imageFilterDivider");if(sa){Z.Utils.graphicSize(sa,s,r);var $e=sa.style;$e.left=y+"px";$e.top=ha+"px";var y=y+Ka,Ee=document.getElementById("buttonImageFilterPanelHide");if(Ee){Z.Utils.buttonSize(Ee,C,u);var Fe=Ee.style;Fe.left=y+"px";Fe.top=ca+"px";Fe.display=db?"inline-block":"none"}var He=document.getElementById("buttonImageFilterPanelShow");if(He){Z.Utils.buttonSize(He,

C,u);var ce=He.style;ce.left=y+"px";ce.top=ca+"px";y+=x+1;ce.display=db?"none":"inline-block"}var Qa=15,l=H[6],jc=H[7],oc=H[8],jd=H[4],kd=H[5],gc=oc-(l-jd),hb=(jc-kd)/2,rd=parseInt(Z.Utils.getResource("z137"),10),Ic=D=Math.round(rd+4*oc+2*gc+30-4),hc=Math.round(jc+24),Aa=document.getElementById("buttonImageFilterPanelShow"),Fa=document.getElementById("buttonContainerImageFilter"),Ab=document.getElementById("imageFilterList");if(Fa&&Aa&&Ab){var yf=parseFloat(Aa.style.left),Jc=parseFloat(Aa.parentNode.style.left),

rc=Fa.style;rc.width=Ic+"px";rc.height=hc+"px";rc.left=yf+Jc+oc-Ic+"px";rc.top=-(hc+5)+"px";var Kb=document.getElementById("imageFilterPanelBackground");if(Kb){var ea=Kb.style;ea.width=Ic+"px";ea.height=hc+"px"}var T=Ab.style;T.width=rd+"px";T.left="15px";T.top="10px";var Qa=Qa+(rd+gc+2),fd=document.getElementById("buttonImageFilterMinus");if(fd){Z.Utils.buttonSize(fd,l,jc);var aa=fd.style;aa.left=Qa+"px";aa.top="12px";Qa+=oc}var fa=document.getElementById("buttonImageFilterPlus");if(fa){Z.Utils.buttonSize(fa,

l,jc);var Sb=fa.style;Sb.left=Qa+"px";Sb.top="12px";Qa+=oc}var gd=document.getElementById("buttonImageFilterApply");if(gd){Z.Utils.buttonSize(gd,l,jc);var ga=gd.style;Sb?ga.left=parseFloat(Sb.left)+"px":(ga.left=Qa+"px",Qa+=oc);ga.top="12px";gd.style.display="none"}var Ia=document.getElementById("imageFilterStateDivider");if(Ia){Z.Utils.graphicSize(Ia,jd,kd);var Ma=Ia.style;Ma.left=Qa+"px";Ma.top=12+hb+"px";Qa+=gc}var Oc=document.getElementById("buttonImageFilterClear");if(Oc){Z.Utils.buttonSize(Oc,

l,jc);var pb=Oc.style;pb.left=Qa+"px";pb.top="12px";Qa+=oc+1}var Pc=document.getElementById("buttonImageFiltersClearAll");if(Pc){Z.Utils.buttonSize(Pc,l,jc);var Xb=Pc.style;Xb.left=Qa+"px";Xb.top="12px"}}}}if(1==Z.helpVisible||3==Z.helpVisible){var hd=document.getElementById("buttonHelp");if(hd){Z.Utils.buttonSize(hd,C,u);var Db=hd.style;Db.left=y+"px";Db.top=ca+"px"}}var Yd=document.getElementById("progressTextBox");if(Yd){var yb=Yd.style;yb&&(ua?yb.display="none":(yb.display="inline-block",yb.width=

L+"px",yb.height=S+"px",yb.left=h-parseFloat(uc.style.left)-parseFloat(yb.width)+"px",yb.top=(k-parseFloat(yb.height))/2+"px"))}};this.z667=function(a){h(a)};this.z457=function(a){p(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(ma||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}};this.positionButtonBorder=function(a){if("buttonColor"==a.substr(0,11))var b=document.getElementById("buttonBorderSm");

else if("buttonViewMode"==a||"buttonEditModeFreehand"==a||"buttonEditModeText"==a||"buttonEditModeIcon"==a||"buttonEditModeRectangle"==a||"buttonEditModePolygon"==a||"buttonEditModeMeasure"==a)b=document.getElementById("buttonBorderLg");var c=document.getElementById(a);b&&c&&("buttonClearAll"==a&&(c=document.getElementById("buttonViewMode")),a=b.style,c=c.style,a.left=parseFloat(c.left)-2+"px",a.top=parseFloat(c.top)-2+"px")};this.imageFilterPanelShow=function(){var a=document.getElementById("imageFilterPanelBackground"),

b=document.getElementById("buttonContainerImageFilter"),c=document.getElementById("buttonImageFilterPanelShow"),e=document.getElementById("buttonImageFilterPanelHide");a&&b&&(a.style.width=D+"px",b.style.display="inline-block",c.style.display="none",e.style.display="inline-block");db=!0};this.imageFilterPanelHide=function(){var a=document.getElementById("imageFilterPanelBackground"),b=document.getElementById("buttonContainerImageFilter"),c=document.getElementById("buttonImageFilterPanelShow"),e=document.getElementById("buttonImageFilterPanelHide");

a&&b&&(a.style.width="0px",b.style.display="none",c.style.display="inline-block",e.style.display="none");db=!1};this.addCounterToImageFilterList=function(a,b){var c=document.getElementById("imageFilterList"),e=Z.Utils.arrayIndexOfObjectValue(M,"value",a);if(-1!=e){var f=c.options[e].text,f=isNaN(f.substring(f.length-1,f.length))?":  ":",";c.options[e].text+=f+(b+1).toString()}};this.removeLastCounterFromImageFilterList=function(a){for(var b=document.getElementById("imageFilterList"),c,e=a.toString(),

f=0,h=b.options.length;f<h;f++)a=b.options[f].text.length,b.options[f].text.substring(a-1)==e&&(c=b.options[f].text.substring(a-2,a-1),c=","==c?2:3,b.options[f].text=b.options[f].text.substring(0,a-c))};this.removeAllCountersFromImageFilterList=function(){for(var a=document.getElementById("imageFilterList"),b=a.options.length=0,c=M.length;b<c;b++)a.options[a.options.length]=new Option(M[b].text,M[b].value)}};

Z.ZoomifyNavigator=function(a){function b(c,e){"ZoomifyImageFile"==Z.tileSource&&(M=e);if(0!=M.width&&0!=M.height){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",db+"px",x+"px",g+"px",Oa+"px","solid","1px","transparent none","0px","0px","normal",null,!0);L=Z.NavigatorDisplay;A=L.style;Z.slidePath&&Z.Utils.setOpacity(L,0);var f=parseInt(Z.Utils.getResource("z230"),10);A.zIndex=(f+2).toString();var f=parseFloat(Z.Utils.getResource("z82")),

k=Z.Utils.getResource("z83"),s=Z.Utils.getResource("z83NOALPHA"),k=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",db+"px",x+"px","0px","0px","none","0px",k,"0px","0px","normal",null,!0);Z.Utils.setOpacity(k,f,s);Z.NavigatorDisplay.appendChild(k);cb=k;oa=cb.style;f=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",db+"px",x+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);f.appendChild(M);

M.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(f);Ta=f;ua=Ta.style;B=M;f=B.width;s=B.height;k=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",db+1+"px",x+1+"px",g+"px",Oa+"px","solid","1px","transparent none","0px","0px","normal",null,!0);k.style.borderColor=Z.Utils.getResource("z169");Z.NavigatorDisplay.appendChild(k);$=k;D=$.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);h(db,x,g,Oa,ba,f,s);p(1==Z.navigatorVisible||2==Z.navigatorVisible);

Z.mobileDevice?(Z.Utils.addEventListener(L,"touchstart",R),Z.Utils.addEventListener(L,"touchmove",S),Z.Utils.addEventListener(L,"touchend",q),Z.Utils.addEventListener(L,"touchcancel",H)):(Z.Utils.addEventListener(L,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(L,"mousedown",U));ha=!0;Z.Utils.validateCallback("navigatorInitialized");a&&a.z542()&&Z.Toolbar&&Z.Toolbar.z542()&&Z.Navigator&&Z.Navigator.z542()&&Z.Utils.validateCallback("viewerInitialized");u()}else window.setTimeout(function(){b(c,

e)},100)}function c(b){"ZoomifyImageFile"==Z.tileSource?N=a.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource?N=Z.Utils.cacheProofPath(Z.imagePath+"/TileGroup0/0-0-0."+Z.tileType):"ZoomifyPFFFile"==Z.tileSource?N=a.formatTilePath(0,0,0):"ImageServer"==Z.tileSource&&(N=a.formatTilePath(0,0,0));M=null;M=new Image;M.onload=b;M.onerror=W;"offsetLoading"!=N?"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(N,Z.Utils.createCallback(null,b),"navigator"):M.src=N:window.setTimeout(function(){c(b)},

100)}function e(a,b){if(Z.NavigatorDisplay)if(Z.slidePath&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(M=b),Ta&&M&&0<M.width&&0<M.height){var c=M.width,f=M.height;Ta.appendChild(M);B=Z.NavigatorDisplay.childNodes[1].firstChild;h(db,x,g,Oa,ba,c,f);c=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;p((1==Z.navigatorVisible||2==Z.navigatorVisible)&&c);c=parseInt(Z.Utils.getResource("z230"),

10);Z.NavigatorDisplay.style.zIndex=(c+2).toString();u()}else window.setTimeout(function(){e()},100)}function f(){ha&&(ma&&(window.clearInterval(ma),ma=null),L&&A&&cb&&oa&&Ta&&ua&&B&&$&&D||(L=Z.NavigatorDisplay,A=L.style,cb=Z.NavigatorDisplay.firstChild,oa=cb.style,Ta=Z.NavigatorDisplay.childNodes[1],ua=Ta.style,B=Z.NavigatorDisplay.childNodes[1].firstChild,$=Z.NavigatorDisplay.childNodes[2],D=$.style))}function h(a,b,c,e,f,g,h){f||(f=ba);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===

typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof e||null===e)e=0;L||(L=Z.NavigatorDisplay);A||(A=L.style);B=L.childNodes[1].firstChild;0==B.width&&"undefined"!==g&&null!==g&&(B.width=g);0==B.height&&"undefined"!==h&&null!==h&&(B.height=h);L&&A&&B&&(f&&(a=1,a=0==f?Z.viewerW/Z.viewerH:B.width/B.height,a*=b),A.width=a+"px",A.height=b+"px",A.left=c+"px",A.top=e+"px",k(a,b))}function k(a,b){B||(B=Z.NavigatorDisplay.childNodes[1].firstChild);B&&0!=B.width&&

0!=B.height?(oa||(oa=Z.NavigatorDisplay.firstChild.style),ua||(ua=Z.NavigatorDisplay.childNodes[1].style),oa&&ua&&(oa.width=a+"px",oa.height=b+"px",r(a,b),ua.width=B.width+"px",ua.height=B.height+"px",ua.left=(a-B.width)/2+"px",ua.top=(b-B.height)/2+"px",u())):window.setTimeout(function(){k(a,b)},100)}function r(a,b){B||(B=Z.NavigatorDisplay.childNodes[1].firstChild);if(B){var c=B.width,e=B.height,f=c/e,g=a/c,h=b/e;g<=h?(c=a,e=a/f,navImageT=(b-a/c*e)/2):h<g&&(e=b,c=b*f,navImageL=(a-b/e*c)/2);B.width=

c;B.height=e}}function p(a){A||(A=Z.NavigatorDisplay.style);A&&(A.display=a?"inline-block":"none")}function u(){if(a&&a.z542()){s();E();var b=a.calculateCurrentCenterCoordinates();C(b)}}function E(){if(B&&D){var b=B.width/Z.imageW,c=B.height/Z.imageH,e=a.getZoom(),c=Z.viewerH*c/e;D.width=Z.viewerW*b/e+"px";D.height=c+"px"}}function s(){ua||(ua=Z.NavigatorDisplay.childNodes[1].style);if(ua){var b=a.getRotation();Z.Utils.rotateElement(ua,b,!0)}}function C(a){if(B&&D&&ua){if("undefined"===typeof a||

null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(B.width),e=parseFloat(B.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,e/Z.imageH*a.y-e/2,-b);a=b.x-parseFloat(D.width)/2;c=b.y-parseFloat(D.height)/2;b=parseFloat(A.width)/2;c=parseFloat(A.height)/2+c-1;D.left=b+a+"px";D.top=c+"px"}}function J(){if(B&&D&&ua){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=

parseFloat(D.left),e=parseFloat(D.top),f=parseFloat(A.width)/2,g=parseFloat(A.height)/2,e=e-g,c=c-f+parseFloat(D.width)/2,f=e+parseFloat(D.height)/2,b=Z.Utils.rotatePoint(c,f,b),c=parseFloat(B.width),f=parseFloat(B.height),e=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/e,(b.y+f/2)/e);a.syncViewportToNavigator(b)}}function W(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function U(b){Z.interactivityOff||(a.zoomAndPanAllStop(!1,!0),L&&$&&D&&(b=Z.Utils.event(b),$.mouseXPrior=b.clientX,$.mouseYPrior=

b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(L,"mousemove",Q),Z.Utils.addEventListener(L,"mouseup",F),Z.Utils.addEventListener(document,"mouseup",F)))}function Q(a){if(!Z.interactivityOff&&$&&D){var b=parseFloat(D.left),c=parseFloat(D.top);D.left=b+(a.clientX-$.mouseXPrior)+"px";D.top=c+(a.clientY-$.mouseYPrior)+"px";$.mouseXPrior=a.clientX;$.mouseYPrior=a.clientY;J();return!1}}function F(b){if(!Z.interactivityOff&&L&&$&&D){document.mousemove=null;document.mouseup=

null;Z.Utils.removeEventListener(L,"mousemove",Q);Z.Utils.removeEventListener(L,"mouseup",F);Z.Utils.removeEventListener(document,"mouseup",F);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),D.left=b.clientX-c.x-parseFloat(D.width)/2+"px",D.top=b.clientY-c.y-parseFloat(D.height)/2+"px");J();a.updateView()}}function R(a){!Z.interactivityOff&&(a.preventDefault(),

L&&$&&D&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),$.mouseXPrior=a.x,$.mouseYPrior=a.y)}function S(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if($&&D&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(D.left),c=parseFloat(D.top);D.left=b+(a.x-$.mouseXPrior)+"px";D.top=c+(a.y-$.mouseYPrior)+"px";$.mouseXPrior=a.x;$.mouseYPrior=a.y;J()}return!1}}function q(b){if(!Z.interactivityOff&&

L&&$&&D){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),D.left=b.x-c.x-parseFloat(D.width)/2+"px",D.top=b.y-c.y-parseFloat(D.height)/2+"px")}J();a.updateView()}}function H(b){if(!Z.interactivityOff&&L&&$&&D){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);

Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),D.left=b.x-c.x-parseFloat(D.width)/2+"px",D.top=b.y-c.y-parseFloat(D.height)/2+"px")}J();a.updateView()}}var ha=!1,ma,L,A,cb,oa,Ta,ua,B,$,D,M,db=Z.navigatorW,x=Z.navigatorH,g=Z.navigatorL,Oa=Z.navigatorT,ba=Z.navigatorFit,N;c(b);this.z560=function(a,c){b(a,c)};this.setImage=function(a){Ta&&(Ta.innerHTML="");c(e)};this.z542=function(){return ha};this.setVisibility=

function(a){p(a)};this.z668=function(){u()};this.z662=function(){E()};this.z664=function(){s()};this.z663=function(a){C(a)};this.z689=function(){ha?f():ma=window.setInterval(f,300)};this.setSizeAndPosition=function(a,b,c,e,f,g,k){h(a,b,c,e,f,g,k)}};

Z.ZoomifyRuler=function(a){function b(a,b,c,e){if("undefined"===typeof a||null===a)a=Z.rulerW;if("undefined"===typeof b||null!==b)b=Z.rulerH;if("undefined"===typeof c||null!==c)c=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;if("undefined"===typeof e||null!==e)e=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;u.width=a+"px";u.height=b+"px";u.left=c+"px";u.top=e+"px"}function c(a){u||(u=Z.RulerDisplay.style);u&&(u.display=a?"inline-block":"none")}function e(){var b=a.getZoom(),c="pixels"==

Z.units?1:5;if(H){magnificationList.visibility="visible";var e;e=0!=L?L*b:100*b;1>e?Math.round(100*e):Math.round(e)}e=0;for(var f=ua.length;e<f;e++)ua[e].symbol==Z.units&&(B=e);Ta=null!==oa&&0!=oa?oa:null!==cb&&0!=cb?Z.imageW/cb:1;b=Z.Utils.roundToDigitLimit($/Ta/b,c);Q.firstChild.nodeValue=b.toString();S.visibility="visible";R.firstChild.nodeValue="um"!=ua[B].symbol?ua[B].symbol:"\u03bcm"}function f(b){if(H){var c=Math.round(100*a.getZoom()),e="%",f=Math.round(100*a.getZoom())==Math.round(1E3*a.getZoom())/

1E3*100?"":"~";1==Z.rulerListType&&0!=L&&(c=Math.round(h(a.getZoom(),L)),e="x");e=c.toString()+e+f;if(b){for(b=insertIndex=0;c>A[b].value;)b++,insertIndex=b;if(c==A[insertIndex].value)Z.Utils.updateSelectElement(q,A);else{var g=Z.Utils.arrayClone("magnifications",A,g),g=Z.Utils.arraySplice(g,insertIndex,0,{text:e,value:c.toString()});Z.Utils.updateSelectElement(q,g)}q.selectedIndex=insertIndex}else q.options[0]=new Option(e,c.toString()),q.selectedIndex=0}}function h(a,b){return a*b/100}function k(b){var c=

0;if(b=Z.Utils.event(b))b=Z.Utils.target(b),c=parseInt(b.options[b.selectedIndex].value,10);isNaN(c)||a.zoomAndPanToView(a.viewX,a.viewY,(1==Z.rulerListType?100*c/L:c)/100)}var r=!1,p,u,E,s,C,J,W,U,Q,F,R,S,q,H;Z.Utils.getResource("z442");var ha=Z.Utils.getResource("z441"),ma=Z.Utils.getResource("z440"),L=Z.sourceMagnification,A,cb=Z.unitsPerImage,oa=Z.pixelsPerUnit,Ta=1,ua=[],B=-1,$=1;(function(){Z.RulerDisplay=Z.Utils.createContainerElement("div","RulerDisplay","inline-block","absolute","hidden",

"1px","1px","0px","0px","solid","1px","transparent none","0px","0px","normal");p=Z.RulerDisplay;u=p.style;var h=parseFloat(Z.Utils.getResource("z82")),M=Z.Utils.getResource("z83"),B=Z.Utils.getResource("z83NOALPHA"),M=Z.Utils.createContainerElement("div","rulerBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",M,"0px","0px","normal",null,!0);Z.Utils.setOpacity(M,h,B);Z.RulerDisplay.appendChild(M);E=M;s=E.style;h=Z.Utils.getResource("z198");B=Z.Utils.createContainerElement("div",

"rulerScaleBar","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",h,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(B);C=B;J=C.style;B=parseInt(Z.Utils.getResource("z230"),10);J.zIndex=(B+3).toString();B=Z.Utils.createContainerElement("div","rulerScaleBarNotchL","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",h,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(B);rSBNL=B;rsbnlS=rSBNL.style;h=Z.Utils.createContainerElement("div","rulerScaleBarNotchR",

"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",h,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(h);rSBNR=h;rsbnrS=rSBNR.style;h=parseInt(Z.Utils.getResource("z194"),10);B=Z.Utils.createContainerElement("div","errorTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);M=document.createTextNode("");B.appendChild(M);Z.Utils.setTextNodeStyle(M,"black","verdana",h+"px","none","normal","normal",

"normal","normal","1em","center","none");Z.RulerDisplay.appendChild(B);W=B;U=W.style;B=Z.Utils.createContainerElement("div","scaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);M=document.createTextNode("");B.appendChild(M);Z.Utils.setTextNodeStyle(M,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","right","none");Z.RulerDisplay.appendChild(B);Q=B;F=Q.style;B=Z.Utils.createContainerElement("div",

"unitTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);M=document.createTextNode("");B.appendChild(M);Z.Utils.setTextNodeStyle(M,"black","verdana",h+"px","none","normal","normal","normal","normal","1em","left","none");Z.RulerDisplay.appendChild(B);R=B;S=R.style;if(0!=Z.rulerListType){A=1==Z.rulerListType&&0!=L?[{text:"2.5x",value:2.5},{text:"5x",value:5},{text:"10x",value:10},{text:"20x",value:20},{text:"40x",value:40},

{text:"60x",value:60},{text:"100x",value:100}]:[{text:"10%",value:10},{text:"20%",value:20},{text:"30%",value:30},{text:"40%",value:40},{text:"50%",value:50},{text:"60%",value:60},{text:"70%",value:70},{text:"80%",value:80},{text:"90%",value:90},{text:"100%",value:100}];h=new Z.Utils.createSelectElement("magnificationList","",A,1,1,1,null,!0,k);Z.RulerDisplay.appendChild(h);q=h;H=q.style;var h=100*Z.minZ,B=100*Z.maxZ,M=Math.round(h),x=Math.round(B),g="%";-1==h&&(h=Math.round(100*a.calcZoomDecimalToFitDisplay()));

1==Z.rulerListType&&0!=L&&(h=h*L/100,M=Math.round(h),g="x");for(;A[0].value<=M;)A=Z.Utils.arraySplice(A,0,1);-1==B&&(B=Math.round(100*a.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=L&&(B=B*L/100,x=Math.round(B),g="x");for(;A[A.length-1].value>=x;)A=Z.Utils.arraySplice(A,A.length-1,1);A=Z.Utils.arraySplice(A,0,0,{text:M.toString()+g+(M==h?"":"~")+ha,value:h});A[A.length]={text:x.toString()+g+(x==B?"":"~")+ma,value:B};Z.Utils.updateSelectElement(q,A);q.selectedIndex=0}ua=[{magnitude:Math.pow(10,

24),symbol:"Ym"},{magnitude:Math.pow(10,21),symbol:"Zm"},{magnitude:Math.pow(10,18),symbol:"Em"},{magnitude:Math.pow(10,15),symbol:"Pm"},{magnitude:Math.pow(10,12),symbol:"Tm"},{magnitude:Math.pow(10,9),symbol:"Gm"},{magnitude:Math.pow(10,6),symbol:"Mm"},{magnitude:Math.pow(10,3),symbol:"km"},{magnitude:Math.pow(10,2),symbol:"hm"},{magnitude:Math.pow(10,1),symbol:"dam"},{magnitude:Math.pow(10,0),symbol:"m"},{magnitude:Math.pow(10,-1),symbol:"dm"},{magnitude:Math.pow(10,-2),symbol:"cm"},{magnitude:Math.pow(10,

-3),symbol:"mm"},{magnitude:Math.pow(10,-6),symbol:"um"},{magnitude:Math.pow(10,-9),symbol:"nm"},{magnitude:Math.pow(10,-12),symbol:"pm"},{magnitude:Math.pow(10,-15),symbol:"fm"},{magnitude:Math.pow(10,-18),symbol:"am"},{magnitude:Math.pow(10,-21),symbol:"zm"},{magnitude:Math.pow(10,-24),symbol:"ym"},{magnitude:Math.pow(10,-24),symbol:"pixels"}];h=Z.rulerW;B=Z.rulerH;M=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;x=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;$=0!=Z.rulerListType?

h-53-16:h-10;var g=(B-1+5)/2,oa=$/2-5,ba=g-10,N="pixels"==Z.units?7:0;s&&J&&rsbnlS&&rsbnrS&&W&&U&&Q&&F&&R&&S&&(b(h,B,M,x),s.width=h+"px",s.height=B+"px",s.left="0px",s.top="0px",H&&(H.width="53px",H.left=h-53-3+"px",H.top=(B-20)/2+"px",H.visibility="visible"),J.width=$+"px",J.height="1px",J.left="5px",J.top=g+3+"px",rsbnlS.width="1px",rsbnlS.height="6px",rsbnlS.left="5px",rsbnlS.top=g+"px",rsbnrS.width="1px",rsbnrS.height="6px",rsbnrS.left=5+$+"px",rsbnrS.top=g+"px",U.width=$+"px",U.height="15px",

U.left="12px",U.top=ba+"px",F.width=oa+"px",F.height="15px",F.left=15-N+"px",F.top=ba+"px",S.width=oa+"px",S.height="15px",S.left=$/2+15-N+"px",S.top=ba+"px");Z.ViewerDisplay.appendChild(Z.RulerDisplay);c(Z.rulerVisible);Z.mobileDevice||Z.Utils.addEventListener(p,"mouseover",Z.Utils.stopPropagation);r=!0;a&&a.z542()&&(e(),f(!0))})();this.z542=function(){return r};this.setVisibility=function(a){c(a)};this.setSizeAndPosition=function(a,c,e,f,g){b(a,c,e,f,g)};this.z668=function(b){a&&a.z542()&&(e(),

f(b))}};

Z.NetConnector=function(){function a(a,e,f,h,k,p){var r=b();if(r){var u="function"===typeof e;if(u){var E=e;e=function(){window.setTimeout(Z.Utils.createCallback(null,E,r),1)};r.onreadystatechange=function(){4==r.readyState&&(r.onreadystatechange=new Function,e())}}try{"undefined"===typeof f||null===f?(r.open("GET",a,u),r.send(null)):"undefined"!==typeof h&&null!==h&&("postXML"==h?(Z.postingXML=!0,r.open("POST",a,!0),r.setRequestHeader("Content-Type","application/xml"),r.send(f)):"ZoomifyImageFile"==Z.tileSource&&

(r.open("GET",a,!0),r.responseType="arraybuffer",Z.Utils.defineObjectProperty(r,"zType",{value:h,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(r,"zTile",{value:k,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(r,"zChunkNumber",{value:p,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&r.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),r.setRequestHeader("Range","bytes="+f.start.toString()+"-"+f.end.toString()),

r.send(null)))}catch(q){c(q,a,h),r.onreadystatechange=r=null}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}function b(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function c(a,b,c){!0==Z.localUse&&(Z.browser==Z.browsers.CHROME||

Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):!0==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):!0==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z289"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+c+".",!1,r,"center"):-1!=

b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!1,r,"center"):-1!=b.toLowerCase().indexOf(".pff")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,r,"center"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,r,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARXML"),!1,r,"center"):-1!=b.indexOf(Z.Utils.getResource("z209"))?Z.Utils.showMessage(Z.Utils.getResource("z256-SLIDESXML"),

!1,r,"center"):-1!=b.indexOf(Z.Utils.getResource("z135"))?Z.Utils.showMessage(Z.Utils.getResource("z256-HOTSPOTSXML"),!1,r,"center"):-1!=b.indexOf(Z.Utils.getResource("z69"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSXML"),!1,r,"center"):-1!=b.indexOf(Z.Utils.getResource("z68"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSJSON"),!1,r,"center"):-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))||-1!=b.toLowerCase().indexOf(Z.Utils.getResource("z70"))?Z.Utils.showMessage(Z.Utils.getResource("z256-ANNOTATIONSSAVEHANDLER"),

!1,r,"center"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,r,"center")}function e(a){if(a)if(200!==a.status&&0!==a.status&&206!==a.status)if("ZoomifyImageFile"==Z.tileSource){var b=a.status;a=404==b?"Not Found":a.statusText;Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+b+" - "+a,!1,r,"center")}else b=a.status,a=404==b?"Not Found":a.statusText,Z.Utils.showMessage(Z.Utils.getResource("z273")+b+" - "+a,!1,r,"center");else{var c=null,c=null!==Z.annotationPath&&".json"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-

5,Z.annotationPath.length);if(a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource)Z.Viewport&&(b=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType?Z.Viewport.parseZIFHeader(b):"offset"==a.zType?Z.Viewport.parseZIFOffsetChunk(b,a.zChunkNumber):"byteCount"==a.zType?Z.Viewport.parseZIFByteCountChunk(b,a.zChunkNumber):"image"==a.zType.substring(0,5)?(p--,Z.Viewport.parseZIFTileImage(b,a.zTile,a.zType)):"navigator"==a.zType?Z.Viewport.parseZIFNavigatorImage(b,a.zTile,a.zType):Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),

!1,r,"center"));else if(a.responseXML&&a.responseXML.documentElement&&!c)c=a.responseXML,f(c);else if(a.responseText)if(a=a.responseText,-1!=a.indexOf("ZAS")&&c)try{Z.annotationJSONObject=JSON.parse(a);var b=Z.Utils.jsonConvertObjectToXMLText(Z.annotationJSONObject),e=Z.Utils.xmlConvertTextToDoc(b);Z.Viewport&&Z.Viewport.parseAnnotationsXML(e)}catch(h){Z.Utils.showMessage(h.name+Z.Utils.getResource("z276")+h.message)}else Z.postingXML?(Z.postingXML=!1,Z.Utils.showMessage(Z.Utils.getResource("z1"),

!1,r,"center"),Z.Viewport&&Z.Viewport.setAllHotspotsSaved()):"ZoomifyImageFolder"==Z.tileSource?(c=Z.Utils.xmlConvertTextToDoc(a),f(c)):"ZoomifyPFFFile"==Z.tileSource&&(-1!=a.toUpperCase().indexOf("PFFHEADER")?(b=a.indexOf("reply_data=")+11,a=a.substring(b,a.length)):(b=a.indexOf("begin=")+6,e=a.indexOf("&",b),beginValue=a.substring(b,e),b=a.indexOf("reply_data=")+11,replyDataValue=a.substring(b,a.length),a="<PFFOFFSET BEGIN='"+beginValue+"' REPLYDATA='"+replyDataValue+"' />"),c=Z.Utils.xmlConvertTextToDoc(a),

f(c))}else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,r,"center")}function f(a){if(a&&a.documentElement){var b=a.documentElement.tagName;"COPYRIGHT"==b?(b=a.documentElement.getAttribute("STATEMENTTEXT"),a=a.documentElement.getAttribute("DECLINEDTEXT"),Z.Utils.isStrVal(b)?Z.Utils.showCopyright(b,a):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)):"IMAGE_PROPERTIES"==b||"ZIFHEADER"==b||"PFFHEADER"==b?("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==

Z.tileSource||"ImageServer"==Z.tileSource)&&Z.Viewport&&Z.Viewport.z607(a):"PFFOFFSET"==b?Z.Viewport&&Z.Viewport.parseOffsetChunk(a):"SKINDATA"==b?Z.Toolbar&&Z.Toolbar.parseSkinXML(a):"SLIDEDATA"==b?Z.Viewport&&Z.Viewport.parseSlidesXML(a):"HOTSPOTDATA"==b?Z.Viewport&&Z.Viewport.parseHotspotsXML(a):"ZAS"==b?Z.Viewport&&Z.Viewport.parseAnnotationsXML(a):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)}else Z.Utils.showMessage(Z.Utils.getResource("z293"),!0)}function h(a,b,c){p--;if("function"===

typeof a)try{a(c)}catch(e){Z.Utils.showMessage(e.name+Z.Utils.getResource("z245")+b+" "+e.message,!0)}}function k(a,b,c){function e(c){f.onload=null;f.onabort=null;f.onerror=null;h&&window.clearTimeout(h);window.setTimeout(function(){b(a,c?f:null)},1)}var f=null,h=null;this.start=function(){f=new Image;var b=function(){e(!1)};f.onload=function(){e(!0)};f.onabort=b;f.onerror=b;h=window.setTimeout(function(){Z.Utils.showMessage(Z.Utils.getResource("z253"),!1,r,"center");e(!1);2==Z.debug&&Z.Utils.trace("Image request for "+

c+" timeout: "+a)},E);f.src=a}}var r=parseInt(Z.Utils.getResource("z268MEDIUM"),10),p=0,u=parseInt(Z.Utils.getResource("z140"),10),E=parseFloat(Z.Utils.getResource("z139"));this.loadXML=function(b){a(b,e,null)};this.loadJSON=function(b){a(b,e,null)};this.loadByteRange=function(b,c,f,h,k,p){c=new Z.Utils.Range(c,f);a(b,e,c,h,k,p)};this.loadImageByteRange=function(b,c,f,h){c=b.substring(0,b.indexOf("?"));var k=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(",")));b=parseFloat(b.substring(b.indexOf(",")+

1,b.length));b=new Z.Utils.Range(k,k+b);a(c,e,b,f,h)};this.postXML=function(b,c){a(b,e,c,"postXML")};this.loadImage=function(a,b,c,e){return p<u?(p++,b=Z.Utils.createCallback(null,h,b),"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof e&&null!==e||"navigator"==c)?this.loadImageByteRange(a,b,c,e):(new k(a,b,c)).start(),!0):!1}};

Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=

b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&

(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=

function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var e=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,e);b={target:a,eventName:b,handler:c,handler2:e};var e=(a.document||a).parentWindow,

f="l"+this._listenerCounter++;e._allListeners||(e._allListeners={});e._allListeners[f]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=f;e._unloadListenerAdded||(e._unloadListenerAdded=!0,e.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var e=(a.document||a).parentWindow,f=a._listeners[c];a.detachEvent("on"+b,e._allListeners[f].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete e._allListeners[f]}},

this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var e=a._listeners;if(!e)return-1;a=(a.document||a).parentWindow;for(var f=

e.length-1;0<=f;f--){var h=a._allListeners[e[f]];if(h&&h.eventName==b&&h.handler==c)return f}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.canvasSupported=null;Z.cssTransformsSupported=

null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.mobileDevice=null;Z.localUse=null;Z.zifSupported=null;Z.onReady=null;Z.onAnnotationReady=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;

Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.fadeInSpeed=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=null;Z.navigatorTop=null;Z.navigatorFit=null;Z.clickZoom=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=

null;Z.keys=null;Z.z476=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.watermarkPath=null;Z.copyrightPath=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.hotspotListTitle=null;Z.hotspotsDrawOnlyInView=!0;Z.captionBoxes=!1;Z.tour=!1;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=null;Z.slideshow=!1;Z.slidePath=null;Z.slideListTitle=null;Z.slideTransitionSpeed=null;Z.slideshowPlaying=null;Z.audioContent=!1;Z.audioMuted=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationFolder=null;

Z.annotationJSONObject=null;Z.annotationXMLText=null;Z.simplePath=!1;Z.noPost=!1;Z.noPostDefaults=!1;Z.annotationSort="none";Z.saveHandlerPath=null;Z.postingXML=!1;Z.minimizeVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;Z.measureVisible=!1;Z.rotationVisible=null;Z.initialR=0;Z.initialRotation=null;Z.virtualPointerVisible=null;Z.crosshairsVisible=null;Z.rulerVisible=null;

Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.magnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerWidth=null;Z.rulerH=null;Z.rulerHeight=null;Z.rulerL=null;Z.rulerLeft=null;Z.rulerT=null;Z.rulerTop=null;Z.coordinatesVisible=null;Z.imageFiltersVisible=null;Z.initialImageFilters=null;Z.progressVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=

null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.freehandVisible=null;Z.textVisible=null;Z.iconVisible=null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.annotationPanelVisible=null;Z.annotationPathProvided=!1;Z.saveHandlerProvided=!1;Z.tileSource=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=

null;Z.TooltipDisplay=null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.CoordinatesDisplay=null;Z.coordinates=null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=null;Z.imageW=null;Z.imageH=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.interactivityOff=

!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=null;Z.delayedFunctionCallTimer=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=navigator.appName,e=navigator.appVersion,f=!1,h=!1,k=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==c&&window.attachEvent&&window.ActiveXObject)b=k.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(k.substring(b+

5,k.indexOf(";",b))),f="undefined"!==typeof document.documentMode;else if("Netscape"==c&&-1!=k.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==c&&window.addEventListener){var r=k.indexOf("firefox"),c=k.indexOf("safari"),e=k.indexOf("chrome");0<=r?(a=Z.browsers.FIREFOX,b=parseFloat(k.substring(r+8))):0<=c&&(b=k.substring(0,c).lastIndexOf("/"),a=0<=e?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(k.substring(b+1,c)));c=new Image;c.style.getPropertyValue&&(h=c.style.getPropertyValue("image-rendering"))}else"Opera"==

c&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(e));var p;if(window.ActiveXObject)for(c=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0,r=c.length;e<r;e++)try{netReq=new ActiveXObject(c[e]);p=c[e];break}catch(u){}else window.XMLHttpRequest&&(netReq=new XMLHttpRequest,p="XMLHttpRequest");var c="response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||

"responseArrayBuffer"in XMLHttpRequest.prototype,e=document.createElement("canvas"),e=!(!e.getContext||!e.getContext("2d")),r=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),e=e&&r,r=!(a==Z.browsers.CHROME&&2>b),h=f||h?"high":null,E=(document.documentElement||{}).style||{},f=!1,s=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],C,J;for(;C=s.shift();)if("undefined"!==typeof E[C]){f=!0;J=/webkit/i.test(C);break}E=f;s=!1;if("undefined"!==typeof document.cancelFullScreen||

"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)s=!0;var W=Array.prototype.splice,U=!1;try{new Float32Array(1),U=!0}catch(Q){}var F=!1;try{new Uint8Array(1),F=!0}catch(R){}var S=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),S=!0}catch(q){}var k=-1<k.indexOf("android")||

-1<k.indexOf("iphone")||-1<k.indexOf("ipad")||-1<k.indexOf("ipod"),H;switch(window.location.protocol){case "http:":H=!1;break;case "https:":H=!1;break;case "file:":H=!0;break;default:H=null}var ha=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.xmlHttpRequestSupport=

p;Z.responseArraySupported=c;Z.canvasSupported=e;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=f;Z.cssTransformProperty=C;Z.cssTransformNoUnits=J;Z.alphaSupported=r;Z.renderQuality=h;Z.rotationSupported=E;Z.fullScreenSupported=s;Z.arraySpliceSupported=W;Z.float32ArraySupported=U;Z.uInt8ArraySupported=F;Z.definePropertySupported=S;Z.mobileDevice=k;Z.localUse=H;Z.zifSupported=ha},isStrVal:function(a){return"undefined"!==

typeof a&&null!==a&&""!==a&&"null"!==a},validateColorVal:function(a){0!=a.indexOf("#")&&(a="#"+a);return a},enforceCopyright:function(){this.readCookie("imageCopyright")?Z.Viewer.configureViewer():this.loadCopyrightText()},readCookie:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,e=b.length;c<e;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return f.substring(a.length,f.length)}return null},loadCopyrightText:function(){(new Z.NetConnector).loadXML(Z.copyrightPath)},

showCopyright:function(a,b){var c=this.getResource("z102"),e=this.getResource("z101");Z.CopyrightDisplay=this.createContainerElement("div","CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",c,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.CopyrightDisplay.style.zIndex=(c+11).toString();var f=parseFloat(Z.CopyrightDisplay.style.width)/2-220,c=parseFloat(Z.CopyrightDisplay.style.height)/

2-100,h=this.createContainerElement("div","textBox","inline-block","absolute","hidden","440px","200px",f+"px",c+"px","none","0px","transparent none","0px","0px","normal",null,!0);h.id="textBox";Z.CopyrightDisplay.appendChild(h);var k=document.createTextNode(a);h.appendChild(this.createCenteredElement(k,"copyrightTextNode"));this.setTextNodeStyle(k,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var k=this.createContainerElement("div","declinedTextContainer",

"hidden","absolute","hidden","0px","0px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0),r=document.createTextNode(b);k.appendChild(r);h.appendChild(k);f=f+220-95;c=c+200+20;h=this.getResource("z418");h=new Z.Utils.Button("buttonAgree",h,null,null,null,null,"80px","20px",f+"px",c+"px","mousedown",this.copyrightAgreeButtonHandler,"z332","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(h.elmt);f+=110;h=this.getResource("z419");e=new Z.Utils.Button("buttonExit",h,

null,null,null,null,"80px","20px",f+"px",c+"px","mousedown",this.copyrightExitButtonHandler,"z333","solid","1px",e,"0px","0px");Z.CopyrightDisplay.appendChild(e.elmt)},hideCopyright:function(){var a=document.getElementById("copyrightTextNode").firstChild,b=document.getElementById("declinedTextContainer").firstChild.nodeValue;a.nodeValue=b;a=document.getElementById("buttonAgree");Z.Utils.removeEventListener(a,"mousedown",this.copyrightAgreeButtonHandler);Z.CopyrightDisplay.removeChild(a);a=document.getElementById("buttonExit");

Z.Utils.removeEventListener(a,"mousedown",this.copyrightExitButtonHandler);Z.CopyrightDisplay.removeChild(a)},copyrightAgreeButtonHandler:function(a){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay);document.cookie="imageCopyright=confirmed";Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(a){Z.Utils.hideCopyright()},parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,e=a.length;c<e;c++){var f=a[c],h=f.indexOf("=");

if(0<h){var k=f.substring(0,h),f=f.substring(h+1);b[k]=f}}}return b},parametersToDelimitedString:function(a,b){var c="",e;for(e in a)c+=e+"="+a[e].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=this.getResource("z287"),c=this.getResource("z110"),e=this.getResource("z109"),f=this.getResource("z108"),c=c!=e?!0:!1;c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var h=this.getResource("z187"),k=this.getResource("z186"),e=this.getResource("z185"),h=h!=k?!0:!1,r=this.getResource("z215"),

k=this.getResource("z214"),p=this.getResource("z213");Z.specialStorageEnabled=r!=k?!0:!1;var u=this.getResource("z107"),E=this.getResource("z106"),r=this.getResource("z105"),u=u!=E?!0:!1;Z.skinPath=this.getResource("z201");Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=

parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));

Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=parseInt(this.getResource("z170"),10);Z.navigatorFit=this.getResource("z166");Z.clickZoom="0"!=this.getResource("z93");Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.keys="0"!=this.getResource("z146");Z.z476="0"!=this.getResource("z95");Z.canvas=

"0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible;Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderVisible="0"!=this.getResource("z206");Z.panButtonsVisible="0"!=this.getResource("z174");

Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.fullViewVisible="0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");Z.measureVisible="0"!=this.getResource("z157");Z.rotationVisible="0"!=this.getResource("z190");Z.units=this.getResource("z231");Z.sourceMagnification=parseInt(this.getResource("z212"),

10);Z.virtualPointerVisible="0"!=this.getResource("z233");Z.crosshairsVisible="0"!=this.getResource("z103");Z.rulerVisible="0"!=this.getResource("z196");Z.rulerListType=this.getResource("z193");Z.rulerW=parseInt(this.getResource("z197"),10);Z.rulerH=parseInt(this.getResource("z191"),10);Z.rulerL=parseInt(this.getResource("z192"),10);Z.rulerT=parseInt(this.getResource("z195"),10);isNaN(parseFloat(this.getResource("z210")))||(Z.slideTransitionSpeed=parseFloat(this.getResource("z210")));Z.coordinatesVisible=

"0"!=this.getResource("z100");Z.imageFiltersVisible="0"!=this.getResource("z138");Z.initialImageFilters="0"!=this.getResource("z142");Z.freehandVisible="0"!=this.getResource("z116");Z.textVisible="0"!=this.getResource("z217");Z.iconVisible="0"!=this.getResource("z136");Z.rectangleVisible="0"!=this.getResource("z189");Z.polygonVisible="0"!=this.getResource("z181");Z.annotationPanelVisible="0"!=this.getResource("DEFAULT_ANNOTATIONPANELVISIBLE");Z.focal=parseInt(this.getResource("z114"),10);Z.quality=

parseInt(this.getResource("z188"),10);if("object"===typeof a&&null!==a){Z.annotationPathProvided=void 0!==a.zHotspotPath||void 0!==a.zAnnotationPath||void 0!==a.zAnnotationXMLText||void 0!==a.zAnnotationJSONObject;Z.saveHandlerProvided=void 0!==a.zSaveHandlerPath;for(var s in a)if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(s.substr(1))])alert(b+" "+s);else if(pValue=a[s],c||"zNavigatorVisible"==s)switch(s){case "zOnAnnotationReady":"function"===typeof pValue&&(Z.onAnnotationReady=pValue);

break;case "zOnReady":"function"===typeof pValue&&(Z.onReady=pValue,window.setTimeout(Z.getReady,100));break;case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=

100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zToolbarVisible":Z.toolbarVisible=parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==

pValue&&(Z.sliderVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+

" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":Z.skinPath=pValue;break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zProgressVisible":"0"==pValue&&(Z.progressVisible=!1);break;default:if(h)switch(s){case "zZoomSpeed":Z.zoomSpeed=parseInt(pValue,10);break;case "zPanSpeed":Z.panSpeed=parseInt(pValue,10);break;case "zFadeInSpeed":Z.fadeInSpeed=parseInt(pValue,10);break;case "zClickZoom":"0"==pValue&&

(Z.clickZoom=!1);break;case "zClickPan":"0"==pValue&&(Z.clickPan=!1);break;case "zMousePan":"0"==pValue&&(Z.mousePan=!1);break;case "zKeys":"0"==pValue&&(Z.keys=!1);break;case "zConstrainPan":"0"==pValue&&(Z.z476=!1);break;case "zCanvas":"0"==pValue&&(Z.canvas=!1);Z.canvasSupported&&Z.canvas||(Z.useCanvas=!1);break;case "zDebug":Z.debug=parseInt(pValue,10);break;case "zImageProperties":Z.imageProperties=pValue;break;case "zNavigatorWidth":isNaN(parseInt(pValue,10))||(Z.navigatorW=parseInt(pValue,

10));break;case "zNavigatorHeight":isNaN(parseInt(pValue,10))||(Z.navigatorH=parseInt(pValue,10));break;case "zNavigatorLeft":isNaN(parseInt(pValue,10))||(Z.navigatorL=parseInt(pValue,10));break;case "zNavigatorTop":isNaN(parseInt(pValue,10))||(Z.navigatorT=parseInt(pValue,10));break;case "zNavigatorFit":isNaN(parseFloat(pValue))||(Z.navigatorFit=parseInt(pValue,10));break;case "zToolbarPosition":Z.toolbarPosition=parseInt(pValue,10);break;case "zLogoCustomPath":Z.logoCustomPath=pValue;break;case "zRotationVisible":"1"==

pValue&&(Z.rotationVisible=!0);break;case "zInitialRotation":isNaN(parseFloat(pValue))||(Z.initialR=parseInt(pValue,10));break;case "zVirtualPointerVisible":"1"==pValue&&(Z.virtualPointerVisible=!0);break;case "zCrosshairsVisible":"1"==pValue&&(Z.crosshairsVisible=!0);break;case "zRulerVisible":"1"==pValue&&(Z.rulerVisible=!0);break;case "zRulerListType":this.isStrVal(pValue)&&(Z.rulerListType=pValue);break;case "zRulerWidth":isNaN(parseInt(pValue,10))||(Z.rulerW=parseInt(pValue,10));break;case "zRulerHeight":isNaN(parseInt(pValue,

10))||(Z.rulerH=parseInt(pValue,10));break;case "zRulerLeft":isNaN(parseInt(pValue,10))||(Z.rulerL=parseInt(pValue,10));break;case "zRulerTop":isNaN(parseInt(pValue,10))||(Z.rulerT=parseInt(pValue,10));break;case "zMeasureVisible":Z.measureVisible="1"==pValue?!0:!1;break;case "zUnits":this.isStrVal(pValue)&&(Z.units=pValue);break;case "zUnitsPerImage":isNaN(parseFloat(pValue))||(Z.unitsPerImage=parseFloat(pValue));break;case "zPixelsPerUnit":isNaN(parseFloat(pValue))||(Z.pixelsPerUnit=parseFloat(pValue));

break;case "zSourceMagnification":isNaN(parseInt(pValue,10))||(Z.sourceMagnification=parseInt(pValue,10));break;case "zMagnification":alert(Z.Utils.getResource("z275")+" zMagnification is now zSourceMagnification");break;case "zWatermarkPath":Z.watermarkPath=pValue;break;case "zCopyrightPath":Z.copyrightPath=pValue;break;case "zCoordinatesVisible":"1"==pValue&&(Z.coordinatesVisible=!0);break;case "zHotspotPath":Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotFolder=Z.hotspotPath;

".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.hotspots=!0;break;case "zHotspotListTitle":Z.hotspotListTitle=pValue;break;case "zHotspotsDrawOnlyInView":"0"==pValue&&(Z.hotspotsDrawOnlyInView=!1);break;case "zCaptionBoxes":"1"==pValue&&(Z.captionBoxes=!0);break;case "zTourPath":Z.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotPath=Z.tourPath;Z.hotspotFolder=

Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.tour=!0;break;case "zTourListTitle":Z.tourListTitle=pValue;break;case "zSlidePath":Z.slidePath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);".xml"==Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slideFolder=Z.slideFolder.substring(0,Z.slideFolder.lastIndexOf("/")));Z.slideshow=

!0;break;case "zSlideListTitle":Z.slideListTitle=pValue;break;case "zTilesPNG":"1"==pValue&&(Z.tileType="png");break;case "zTileW":Z.tileW=parseInt(pValue,10);break;case "zTileH":Z.tileH=parseInt(pValue,10);break;default:if(u)switch(s){case "zImageFiltersVisible":"1"==pValue&&(Z.imageFiltersVisible=!0);break;case "zInitialImageFilters":"0"==pValue&&(Z.initialImageFilters=!1);break;case "zAnnotationPath":Z.annotationPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.annotationFolder=Z.annotationPath;

".xml"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-4,Z.annotationPath.length)&&(Z.annotationFolder=Z.annotationFolder.substring(0,Z.annotationFolder.lastIndexOf("/")));Z.annotations=!0;break;case "zAnnotationXMLText":Z.annotationXMLText=pValue;Z.annotations=!0;break;case "zAnnotationJSONObject":Z.annotationJSONObject=pValue;Z.annotations=!0;break;case "zSimplePath":"1"==pValue&&(Z.simplePath=!0);break;case "zNoPost":"1"==pValue&&(Z.noPost=!0);break;case "zNoPostDefaults":"1"==

pValue&&(Z.noPostDefaults=!0);break;case "zAnnotationSort":Z.annotationSort=pValue;break;case "zFreehandVisible":"0"==pValue&&(Z.freehandVisible=!1);break;case "zTextVisible":"0"==pValue&&(Z.textVisible=!1);break;case "zIconVisible":"0"==pValue&&(Z.iconVisible=!1);break;case "zRectangleVisible":"0"==pValue&&(Z.rectangleVisible=!1);break;case "zPolygonVisible":"0"==pValue&&(Z.polygonVisible=!1);break;case "zAnnotationPanelVisible":"0"==pValue&&(Z.annotationPanelVisible=!1);break;case "zMarkupMode":"1"==

pValue&&(Z.annotationPathProvided?(Z.editMode="markup",Z.editing="addLabel"):alert(this.getResource("z247")));break;case "zEditMode":"1"==pValue&&(Z.annotationPathProvided?Z.editMode="edit":alert(this.getResource("z247")));break;case "zSaveHandlerPath":Z.saveHandlerPath=pValue;break;default:if(Z.specialStorageEnabled==k)alert(p+" "+s);else switch(s){case "zServerIP":Z.serverIP=pValue;break;case "zServerPort":Z.serverPort=pValue;break;case "zTileHandlerPath":Z.tileHandlerPath=pValue;break;case "zImageW":Z.imageW=

parseInt(pValue,10);break;case "zImageH":Z.imageH=parseInt(pValue,10);break;case "zFocal":Z.focal=parseInt(pValue,10);break;case "zQuality":Z.quality=parseInt(pValue,10)}}else alert(r+" "+s)}else alert(e+" "+s)}else alert(f+" "+s)}if(Z.Utils.isStrVal(Z.annotationPath)||Z.Utils.isStrVal(Z.saveHandlerPath))u?Z.Utils.isStrVal(Z.saveHandlerPath)&&(Z.saveHandlerPath=Z.saveHandlerPath):(Z.annotationPath="",alert(r));Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||

(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));if(this.isStrVal(a))for(var b=0,c=a.length;b<c;b++){var e=a[b],f=e.indexOf("=");

if(0<f){var h=e.substring(0,f),e=e.substring(f+1);if(this.isStrVal(e))switch(h){case "zInitialX":isNaN(parseFloat(e))||(Z.initialX=parseFloat(e));break;case "zInitialY":isNaN(parseFloat(e))||(Z.initialY=parseFloat(e));break;case "zInitialZoom":isNaN(parseFloat(e))||(Z.initialZ=parseFloat(e),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(e))||(Z.minZ=parseFloat(e),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(e))||(Z.maxZ=parseFloat(e),

Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(){if(null!==Z.imagePath){var a=this.getResource("z213");-1!=Z.imagePath.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):Z.Utils.isStrVal(Z.tileHandlerPath)?-1!=Z.imagePath.toLowerCase().indexOf(".pff")?Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(a):Z.Utils.isStrVal(Z.tileHandlerPath)&&

(Z.specialStorageEnabled?(Z.tileSource="ImageServer",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(a)):Z.tileSource="ZoomifyImageFolder"}},getResource:function(a){var b="";switch(a){case "z110":b="Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";break;case "z187":b="Enable Pro parameters";break;

case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":b="Changing this violates License Agreement";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";

break;case "z107":b="Changing this violates License Agreement";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "z125":b="0";break;case "z124":b="8192";break;case "z123":b="1060";break;case "z90":b="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "z90-PFF":b="256";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b=

"300";break;case "z139":b="60000";break;case "z218":b="1.15";break;case "z220":b=Z.mobileDevice?"50":"300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "z104":b="0";break;case "z175":b="5";break;case "z176":b="10";

break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "z95":b="1";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b=

"1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;case "z171":b="2";break;case "z172":b="150";break;case "z167":b="100";break;case "z168":b="-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b=

"1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "z206":b="1";break;case "z205":b="10";break;case "z174":b="1";break;case "z121":b="1";break;case "z119":b="1";break;case "z120":b="white";break;case "z118":b="0";break;case "z141":b="0";break;case "z232":b="Assets/VirtualPointer/virtualPointer.png";break;case "z157":b="undefined"===typeof Z.parameters||null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&

"0"==Z.parameters.zMeasureVisible||!("undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode||"undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b="\t#F8F8F8";break;case "z190":b="0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";break;case "z212":b="40";break;case "z231":b="pixels";break;case "z233":b="0";break;case "z103":b="0";break;

case "z196":b="0";break;case "z193":b="2";break;case "z194":b="10";break;case "z198":b="#696969";break;case "z197":b="150";break;case "z191":b="30";break;case "z192":b="-1";break;case "z195":b="-1";break;case "z100":b="0";break;case "z234":b="0.6";break;case "z235":b="0.33";break;case "z237":b="512";break;case "z236":b="384";break;case "z102":b="#D3D3D3";break;case "z101":b="#FFFFFF";break;case "z227":b="destinations.xml";break;case "z226":b=!0;break;case "z225":b=!0;break;case "z209":b="slides.xml";

break;case "z208":b=!0;break;case "z207":b=!0;break;case "z203":b="NAME";break;case "z204":b="200";break;case "z202":b="2";break;case "z210":b="2";break;case "z211":b="0.05";break;case "z156":b="170";break;case "z155":b="12";break;case "z154":b="11";break;case "z135":b="hotspots.xml";break;case "z130":b="6";break;case "z161":b="2";break;case "z152":b="7";break;case "z129":b="14";break;case "z160":b="3";break;case "z151":b="14";break;case "z115":b="1.8";break;case "z134":b=!0;break;case "z132":b="NAME";

break;case "z133":b="200";break;case "z131":b="2";break;case "z138":b="0";break;case "z142":b="1";break;case "z137":b="150";break;case "z116":b="1";break;case "z217":b="1";break;case "z136":b="1";break;case "z189":b="1";break;case "z181":b="1";break;case "DEFAULT_ANNOTATIONPANELVISIBLE":b="1";break;case "z69":b="annotations.xml";break;case "z68":b="annotations.json";break;case "z57":b="circle.png";break;case "z57TYPE":b="icon";break;case "z70":b="save";break;case "z71":b="upload";break;case "z67":b=

!0;break;case "z65":b="220";break;case "z61":b="177";break;case "z62":b="11";break;case "z63":b="11";break;case "z64":b="11";break;case "z72SMALL":b="2";break;case "z72":b="3";break;case "z53":b="50";break;case "z51":b="122";break;case "z55":b="160";break;case "z54":b="88";break;case "z56":b="10";break;case "z59":b="82";break;case "z66":b=!0;break;case "z52":b=!0;break;case "z60":b=!0;break;case "z147":b="0.02";break;case "z148":b="30";break;case "z177":b=2;break;case "z179":b=.3;break;case "z180":b=

300;break;case "z96":b="1";break;case "z98":b="#FFFFFF";break;case "z89":b="#FFFFFF";break;case "z177FREEHAND":b=2;break;case "z113":b="#FFFFFF";break;case "z216":b="#999999";break;case "z97":b="10";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z99":b="lightgray";break;case "z229":b="#D3D3D3";break;case "z228":b="#FFFFFF";break;case "z114":b="1";break;case "z188":b="55";break;case "z9":b="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";

break;case "z12":b="Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z6":b="5000";break;case "z6SHORT":b="3000";break;case "z4SHORT":b="Click a button to\npick a label type";break;case "z4":b="Click a button to pick a label type.\nTips will show only on first use of each button.";

break;case "ALERT_HOWTOEDITMODEVIEW":b="Click image to zoom-in.\nAlt-click to zoom-out.\nClick-drag to pan.";break;case "ALERT_HOWTOEDITMODEFREEHAND":b="\nClick-drag in image to draw.";break;case "ALERT_HOWTOEDITMODETEXT":b="\nClick in image to create caption. Edit text in panel.";break;case "ALERT_HOWTOEDITMODEICON":b="Select icon type from list.\nClick image to create icon.\nAlt-click-drag icon to position.";break;case "ALERT_HOWTOEDITMODERECTANGLE":b="\nClick-drag in image to create rectangle.";

break;case "ALERT_HOWTOEDITMODEPOLYGON":b="Click in image to start polygon and add control points.\nRe-click first point to close the polygon.\nOr alt-click in image to leave polygon open.";break;case "ALERT_HOWTOEDITMODEMEASURE":b="Click in image to measure length.\nAdditional clicks measure perimeter.\nRe-click starting point to measure area.";break;case "z8":b="\nClick the '?' button for help.";break;case "z3":b="Hotspot click links are disabled in edit mode\nto allow hotspot positioning by click-dragging:\n";

break;case "z2":b="\nCancelling all unsaved edits.";break;case "z15":b="\nSaving unsaved edits.";break;case "z1":b="\nXML save complete.";break;case "z13":b="SAVEDISABLEDFORDEMO";break;case "z14":b="\nDemo edits are saved only during the browser session.";break;case "z11":b="\nProcessing image filter...";break;case "z10":b="\nProcessing backfill image filter...";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";

break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z289":b=

"Browsers allow PFF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website might be missing a file:  ";break;case "z280-ZIF":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z247":b="Attempt to initiate Edit mode without providing path to hotspots or annotations XML data file.";

break;case "z248":b="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";break;case "z246":b="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";break;case "z298":b="Attempt to initiate Edit mode without providing path to Save Handler - server side script or other resource to post XML data.";break;case "z297":b="Annotations cannot be saved: missing or incorrect save\nhandler path parameter, or missing file on server.";

break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-PFFIMAGEHEADER":b="Error loading image: image header request invalid.";break;case "z256-PFFIMAGEOFFSET":b=

"Error loading image: image offset request invalid.";break;case "z256-TOOLBARXML":b="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page.";break;case "z256-SLIDESXML":b="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256-HOTSPOTSXML":b="Error loading hotspots: please make sure hotspot path in web page matches hotspots folder location on webserver.";

break;case "z256-ANNOTATIONSXML":b="Error loading annotations: please make sure annotation XML path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSJSON":b="Error loading annotations: please make sure annotation JSON path in web page matches annotation folder location on webserver.";break;case "z256-ANNOTATIONSSAVEHANDLER":b="Error saving annotations: please make sure save handler path in web page matches save handler file location on webserver.";break;case "z256":b=

"Error making network request:\npossible invalid path or network error.";break;case "z272":b="Error related to network security: ";break;case "z273":b="Error related to network status: ";break;case "z273RANGEREQUESTS":b="Error related to network status - range requests and ZIF storage may not be supported: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z243":b=" converting XML doc to XML text (DOMParser): ";break;case "z276":b=" parsing JSON file to JSON object: ";

break;case "z277":b=" parsing JSON label to JSON object: ";break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b="XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";

break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;case "z291":b="Virtual pointer graphic failed to load: ";break;case "z292":b="Watermark image failed to load: ";break;case "z283":b="Unknown element style - no known method to identify.";

break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";break;case "z282":b="Selected filter requires assignment of increment or toggle interface.";break;case "z360":b="Launch Zoomify Website";break;case "z363":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Minimize Toolbar"+

a;break;case "z341":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Expand Toolbar"+a;break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b=

"Exit Full View";break;case "z391EXITEXTERNAL":b="Exit Full View";break;case "z342":b="Show Help";break;case "z342MARKUP":b="Show Markup Help";break;case "z342ANNOTATION":b="Show Annotation Help";break;case "z380":b="Rotate Clockwise 90 Degrees";break;case "z381":b="Rotate Counterwise 90 Degrees";break;case "z398":b="Click-Drag To Position";break;case "z392":b="Begin Measuring";break;case "z392EXIT":b="Stop Measuring";break;case "z394":b="Prior Destination";break;case "z393":b="Next Destination";

break;case "z395":b="Start Tour";break;case "z396":b="Stop Tour";break;case "z384":b="Prior Slide";break;case "z383":b="Next Slide";break;case "z386":b="Start Slideshow";break;case "z387":b="Stop Slideshow";break;case "z321":b="Mute Sound";break;case "z322":b="Enable Sound";break;case "z350":b="Hide Image Filter Panel";break;case "z351":b="Show Image Filter Panel";break;case "z352":b="Increase Filter";break;case "z349":b="Decrease Filter";break;case "z346":b="Apply Selected Filter";break;case "z347":b=

"Clear Last Application Of Selected Filter";break;case "z347ALL":b="Clear All Filters";break;case "z397":b="Image Navigation";break;case "z334":b="Toggle Color Palette";break;case "z335":b="Freehand Drawings";break;case "z340":b="Text Labels";break;case "z336":b="Icon Labels";break;case "z339":b="Rectangle Labels";break;case "z338":b="Polygon Labels";break;case "z337":b="Measurements";break;case "z373":b="Add New POI";break;case "z376":b="Edit Current POI";break;case "z375":b="Delete Current POI";

break;case "z374":b="Cancel POI Changes";break;case "z377":b="Save POI Changes";break;case "z353":b="Add New Label";break;case "z356":b="Edit Current Label";break;case "z355":b="Delete Current Label";break;case "z354":b="Cancel Label Changes";break;case "z357":b="Save Label Changes";break;case "z364":b="Add New Note";break;case "z367":b="Edit Current Note";break;case "z366":b="Delete Current Note";break;case "z365":b="Cancel Note Changes";break;case "z368":b="Save Note Changes";break;case "z324":b=

"Select Color";break;case "z325":b="Select Color";break;case "z326":b="Select Color";break;case "z327":b="Select Color";break;case "z328":b="Select Color";break;case "z329":b="Select Color";break;case "z330":b="Select Color";break;case "z331":b="Select Color";break;case "z359":b="Grow Label";break;case "z358":b="Shrink Label";break;case "z379":b="Hide Icon Until Mouse-Over";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";break;case "z361":b="Decline And Close Message";

break;case "z332":b="Agree To Copyright And View Images";break;case "z333":b="Exit And Do Not View Images";break;case "z382":b="Toggle Full Page View";break;case "z390":b="Toggle Viewport Display";break;case "z388":b="Toggle Viewport Backfill";break;case "z389":b="Toggle Constrain Pan";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";break;case "z420":b="X";break;case "z441":b=

" min";break;case "z440":b=" max";break;case "z442":b="units in %s";break;case "z431":b="Length: ";break;case "z431TOTAL":b="Total length: ";break;case "z433":b="Perimeter: ";break;case "z430":b="Area: ";break;case "z434":b="\u00b2";break;case "z425":b="Select Filter Type,<>,Brightness,Contrast,Sharpness,Blurriness,<>,Edges,Inversion,Grayscale,Threshold";break;case "z426":b="null,null,brightness,contrast,sharpness,blurriness,null,edges,inversion,grayscale,threshold";break;case "z418":b="Agree";break;

case "z419":b="Exit";break;case "z444":b="Tour Destinations";break;case "z443":b="Slides";break;case "z424":b="Hotspots";break;case "z410":b="POI";break;case "z408":b="Label";break;case "z407":b="Caption";break;case "z413":b="Tooltip";break;case "z414":b="Click";break;case "z412":b="Scale";break;case "z411":b="Rollover";break;case "z409":b="Note";break;case "z403":b="Select Icon Type,Circle,Triangle,Square,Arrow Down,Arrow Down Left,Arrow Down Right,Arrow Left,Arrow Right,Arrow Up,Arrow Up Left,Arrow Up Right,Line Horizontal,Line Vertical,External Graphics File";

break;case "z404":b="shim,circle.png,triangle.png,square.png,arrowDown.png,arrowDownLeft.png,arrowDownRight.png,arrowLeft.png,arrowRight.png,arrowUp.png,arrowUpLeft.png,arrowUpRight.png,lineHorizontal.png,lineVertical.png,External Graphics File";break;case "z401":b="Caption position...,Bottom Left,Bottom Center,Bottom Right,Center Left,Center Center,Center Right,Top Left,Top Center,Top Right";break;case "z402":b="shim,7,8,9,4,5,6,1,2,3";break;case "z405":b="Open URL in...,Same Window,New Window,Parent Frame,Top Frame";

break;case "z406":b="shim,_self,_blank,_parent,_top";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b="84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z417":b="290";break;case "z415":b="200";break;case "z416":b="Current Mouse Coordinates\n(Alt-Click add, select, right-click Copy)";break;case "z445":b="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";

break;case "z446":b="Show Globals";break;case "z449":b="Toggle Display";break;case "z447":b="Toggle Backfill";break;case "z448":b="Toggle Constrain Pan";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, alt-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";

break;case "z31":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Markup Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>Markup Mode allows fast, easy addition of labels to a zoomable image.<br><br><strong>Creating A Label</strong><br><br>Click any of the buttons at the top of the Markup Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Next, click or click-drag in the image:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and positioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons but the caption dynamically changes to display the current length or area.<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul>Use the Color button to set a color. The color selected affects freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode.<br><br><strong>Editing Label Values</strong><br><br>The Markup Panel also displays the name and caption of the currently selected label for easy editing. Use the TAB key to implement any edits or click in the image.<br><br>Delete a label using the trash can button. The label will be removed from the image and the Markup Panel will display the prior label in the label list.<br><br>Save a label using the button with the disk icon. Or, use the label list to change the selected label - the previously selected label will be automatically saved.<br><br><i><strong>Special Tips:</strong><ul><li>Alt-click any label to display its name and caption in the Markup Panel for editing.<li>Alt-click-drag any completed label to reposition it in the image.<li>If using a mouse, hold the cursor over any button at any time to see a helpful reminder.</ul></i></font></p>";

break;case "z28":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Editing Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive, visual means, to add <i>Points of Interest</i> to a zoomable image, including the option of associated <i>Labels</i> and <i>Notes</i>.<br><br><strong>Point Of Interests</strong><br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>To create a Point Of Interest, click the <i>Add</i> button beneath the Point Of Interest choice list at the top of the Annotation Panel to create a new Point of Interest. Or, click the <i>Edit</i> button to modify the current POI. If no Annotations have been created, a placeholder POI will be the only item in the Point Of Interest list.<br><br><i><strong>More Buttons:</strong></i><br><br>When the Add button is clicked, two different buttons will be displayed: <i>Save</i> and <i>Cancel</i>. If the Edit button is clicked, a third button will also be displayed: <i>Delete</i>.<br><br>Save a Point Of Interest using the button with the disk icon. Cancel edits to a Point Of Interest using the button with the large X icon.<br><br>Delete a Point Of Interest using the trash can button. The POI will be removed from the list and the prior POI in the list will be displayed.<br><br><i><strong>Important:</strong><ul><li>Changing the selected POI in the POI list will automatically save any edits to the current POI.<li>Clicking any of the buttons Save, Cancel, and Delete will leave the Add or Edit mode and return to Annotation Panel to its default display.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Labels</strong><br><br>To add a new Label to the current Point Of Interest, click the Add button beneath the Label section of the Annotation Panel. Or, click the Edit button to edit the current Label. If no Labels have been created yet, the Label list will be empty.<br><br>If adding a new Label, click any of the buttons at the top of the Label section of the Annotation Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Now click or click-drag in the image to create a new Label:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and repositioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons except that the caption dynamically changes to display the current length or area.</ul>Use the Color button to set the color of new freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode in the current Label.<br><br><i><strong>Important:</strong><ul><li>In Add mode, multiple clicks or click-drags will create multiple Labels - to support rapid annotation authoring.<li>In Edit mode, any clicks or click-drags will simple replace the current Label in the image.<li>Alt-click any label in the image to display its values in the Annotatoin Panel for editing. (Add or Edit mode)<li>Alt-click-drag any completed label in the image to reposition it.  (Add or Edit mode)<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul></i><i><strong>More Label Values:</strong></i><br><br>The Annotation Panel also displays the name, caption, tooltip, and click-URL of of the currently selected label for easy editing. Use the TAB key to implement any edits or click in another text field or in the image. <br><br>Two choice lists are also included: the first allows the caption to be positioned relative to the Label in the image while the second determines whether the click-URL (if any) will open in the current browser window or a new browser window or a specific frame in the web page. <br><br>The Scale buttons allow the Label to be sized in the image.  The Rollover checkbox can be used to hide a Label in the image until the cursor is over it (not supported by mobile devices).<br><br>The Save, Cancel, and Delete buttons for Labels work just as they do with Points of Interest, as described above. And remember, changing the selected Label in the Label list will automatically save any edits to the current Label. Alt-clicking or alt-click-dragging a Label in the image will also change the current Label in the Label list and cause any edits to be saved (see the first two Special Tips below).<br><br><i><strong>Important:</strong><ul><li>Changing the selected Label by clicking or click-dragging it in the image will change the selected Point Of Interest if the newly selected Label is associated with a different POI - if editing is in progress the edits will be automatically saved.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Notes</strong><br><br>To add a new Note to the current Point Of Interest, click the Add button beneath the Note section of the Annotation Panel. Or, click the Edit button to edit the current Note. If no Notes have been created yet, the Note list will be empty.<br><br>Use the name and text fields to easily add or edit the Note values. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area. Notes can contain carriage returns.<br><br>The Save, Cancel, and Delete buttons for Notes work just as they do with Points of Interest, as described above. And remember, changing the selected Note in the Note list will automatically save any edits to the current Note.</font></p>";

break;case "z30":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "z29":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";

break;case "z50":b="Anonymous";break;case "z27":b="Whole Image";break;case "z43":b="New Point Of Interest ";break;case "z44":b=this.getResource("z50");break;case "z34":b="New Hotspot ";break;case "z33":b="Caption for hotspot ";break;case "z37":b="New Label ";break;case "z35":b="Caption for label ";break;case "z45":b="Polygon ";break;case "z38":b="Tooltip for label ";break;case "z36":b="";break;case "z39":b=this.getResource("z50");break;case "z40":b="New Note ";break;case "z41":b="Note text";break;

case "z42":b=this.getResource("z50");break;case "z20":b="List creation in progress...";break;case "z21":b="Note loading in progress...";break;case "z25":b="#000000";break;case "z22":b="#FFFFFF";break;case "z48":b="#FFFFFF";break;case "z46":b="#FFFFFF";break;case "z26":b="1";break;case "z23":b="1";break;case "z49":b="1";break;case "z47":b="1";break;case "z24":b="8";break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);

else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},createCallback:function(a,b){for(var c=[],e=2,f=arguments.length;e<f;e++)c[c.length]=arguments[e];return function(){for(var e=c.concat([]),f=0,r=arguments.length;f<r;f++)e[e.length]=arguments[f];return b.apply(a,e)}},validateCallback:function(a){var b=Z.Utils.arrayIndexOfObjectValue(Z.callbacks,"callbackEvent",

a);if(-1!=b){var c=Z.callbacks[b];if("object"===typeof c&&"function"===typeof c.callbackFunction)switch(a){case "viewUpdateCompleteGetLabelIDs":var e=Z.Viewport.getLabelIDsInCurrentView(!1);Z.Utils.functionCallWithDelay(function(){c.callbackFunction(e)},10);break;case "viewUpdateCompleteGetLabelInternalIDs":var f=Z.Viewport.getLabelIDsInCurrentView(!0);Z.Utils.functionCallWithDelay(function(){c.callbackFunction(f)},10);break;case "labelSavedGetJSONObject":a=Z.Viewport.getCurrentLabel().internalID;

var h=Z.Viewport.getLabelJSONObject(a,!0);Z.Utils.functionCallWithDelay(function(){c.callbackFunction(h)},10);break;default:Z.Utils.functionCallWithDelay(function(){c.callbackFunction()},10)}}},createContainerElement:function(a,b,c,e,f,h,k,r,p,u,E,s,C,J,W,U,Q){var F=document.createElement(a);this.isStrVal(b)&&(F.id=b);b=F.style;b.display=this.isStrVal(c)?c:"inline-block";b.position=this.isStrVal(e)?e:"static";b.overflow=this.isStrVal(f)?f:"hidden";"canvas"==a?(this.isStrVal(h)&&F.setAttribute("width",

h),this.isStrVal(k)&&F.setAttribute("height",k)):(this.isStrVal(h)&&(b.width=h),this.isStrVal(k)&&(b.height=k));this.isStrVal(r)&&(b.left=r);this.isStrVal(p)&&(b.top=p);b.borderStyle=this.isStrVal(u)?u:"none";b.borderWidth=this.isStrVal(E)?E:"0px";b.borderColor="#696969";b.background=this.isStrVal(s)?s:"transparent none";b.margin=this.isStrVal(C)?C:"0px";b.padding=this.isStrVal(J)?J:"0px";b.whiteSpace=this.isStrVal(W)?W:"normal";this.isStrVal(U)&&(b.cursor=U);"undefined"!==Q&&Q&&(Z.mobileDevice?Z.Utils.addEventListener(F,

"touchstart",Z.Utils.preventDefault):(Z.Utils.addEventListener(F,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(F,"contextmenu",Z.Utils.preventDefault)));return F},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),e=[];e[e.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';e[e.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';

e[e.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=e.join("");for(var e=c=c.firstChild,f=c.getElementsByTagName("div");0<f.length;)e=f[0],f=e.getElementsByTagName("div");e.appendChild(a);return c},createTextElement:function(a,b,c,e,f,h,k,r,p,u,E,s,C,J,W,U,Q,F){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,e,f,h,r,p,"white","0px",k,"normal");

e=document.createElement("textarea");c.appendChild(e);f=e.style;e.id=a;e.value=b;e.readOnly=u;f.width="100%";f.height="100%";f.margin="0";f.border="0";this.isStrVal(E)&&(f.fontFamily=E);this.isStrVal(s)&&(f.fontSize=s);this.isStrVal(C)&&(f.resize=C);this.isStrVal(J)&&(e.columns=J);this.isStrVal(W)&&(e.rows=W);this.isStrVal(U)&&(f.overflowX=U);this.isStrVal(Q)&&(f.overflowY=Q);this.isStrVal(F)&&(e.wrap=F,"off"==F&&(f.whiteSpace="nowrap"));return c},createSelectElement:function(a,b,c,e,f,h,k,r,p){var u=

document.createElement("select");u.id=a;Z.Utils.isStrVal(b)&&"none"!=b&&(u.options[0]=new Option(b,null));a=0;for(b=c.length;a<b;a++)u.options[u.options.length]=new Option(c[a].text,c[a].value);u.onchange=p;c=u.style;c.width=e+"px";c.position="absolute";c.left=f+"px";c.top=h+"px";c.fontSize=null==k?"11px":k+"px";c.fontFamily="verdana";c.visibility=r;return u},updateSelectElement:function(a,b,c){if(a){var e=-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var f=0,h=b.length;f<h;f++)a.options[a.options.length]=

new Option(b[f].text,b[f].value.toString());"undefined"!==typeof c&&null!==c&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",c),10),-1!=b&&(e=b));b=a.options.length-1;a.selectedIndex=e<=b?e:b}},getChildElementByID:function(a,b){for(var c=null,e=0,f=a.childNodes.length;e<f&&(c=a.childNodes[e],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);e++);return c},getElementPosition:function(a){for(var b=0,c=0,e="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,e);f;)b+=a.offsetLeft,

c+=a.offsetTop,e&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=f,e="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,e);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,"");this.showMessage(this.getResource("z283"))},

getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=0,c=0;"DOMMouseScroll"==a.type&&Z.browser==

Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?b=-1*a.detail:this.showMessage(this.getResource("z285"));

return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},e=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(e.scrollLeft||e.scrollTop)a=e.scrollLeft,b=e.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=0,b=0,c=document.documentElement||{},e=document.body||

{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):e.clientWidth||e.clientHeight?(a=e.clientWidth,b=e.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,b,c,e,f,h,k,r,p,u,E,s,C,J,W,U,Q,F,R,S){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",k,r,p,u,J,W,U,Q,F,R,S);if(Z.Utils.isStrVal(b)){var q=document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(q));

Z.Utils.setTextNodeStyle(q,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var H=Z.Utils.createGraphicElement(c+"/"+e),ha=Z.Utils.createGraphicElement(c+"/"+f),ma=Z.Utils.createGraphicElement(c+"/"+h);H.style.width=ha.style.width=ma.style.width=k;H.style.height=ha.style.height=ma.style.height=r;H.style.position=ha.style.position=ma.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&

(H.style.top=ha.style.top=ma.style.top="");ha.style.visibility=ma.style.visibility="hidden";H.alt=ha.alt=ma.alt="";"undefined"!==typeof C&&Z.Utils.isStrVal(C)&&(H.alt=Z.Utils.getResource(C));a.appendChild(H);a.appendChild(ha);a.appendChild(ma)}Z.mobileDevice?(Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault),Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault)):(Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault),

Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation),Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation),"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(H,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ha,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ma,"contextmenu",Z.Utils.preventDefault)));Z.Utils.isStrVal(b)||

(Z.Utils.disableTextInteraction(q),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.isStrVal(C)&&(a.title=Z.Utils.getResource(C));Z.Utils.setButtonHandler(a,E,s);this.elmt=a},buttonSize:function(a,b,c){var e=a.style;e.width=b+"px";e.height=c+"px";c=a.firstChild;e=a.childNodes[1];a=a.childNodes[2];c&&e&&a&&(c.style.width=e.style.width=a.style.width=b+"px",c.style.height=e.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);

Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],e=a.childNodes[2];b&&c&&e&&(b.style.visibility=c.style.visibility=e.style.visibility="hidden",Z.mobileDevice?(Z.Utils.removeEventListener(a,"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457)):(Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457),

Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(e,"mouseup",Z.Toolbar.z457)));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];

c&&(c.style.visibility="visible")},setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;targetEvent=Z.mobileDevice?"mousedown"==b?"touchstart":"touchend":"undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,targetEvent,

c)},Checkbox:function(a,b,c,e,f,h,k,r,p){var u=Z.Utils.createContainerElement("div","containerFor-"+a,"inline-block","absolute","hidden",c,e,f,h,"none","0px","transparent none","0px","0px","normal"),E=document.createElement("input");u.appendChild(E);E.type="checkbox";E.id=a;E.value=b;E.width=c;E.height=e;a=u.style;a.width=c+"px";a.height=e+"px";a.left=f+"px";a.top=h+"px";Z.mobileDevice?Z.Utils.addEventListener(E,"touchstart",r):Z.Utils.addEventListener(E,k,r);Z.tooltipsVisible&&Z.Utils.isStrVal(p)&&

(E.title=Z.Utils.getResource(p));return u},Graphic:function(a,b,c,e,f,h,k,r){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=e;c.height=f;"undefined"!==typeof r&&Z.Utils.isStrVal(r)?b.alt=Z.Utils.getResource(r):b.alt="";c=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",e,f,h,k,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=c;Z.mobileDevice?Z.Utils.addEventListener(b,"touchstart",

Z.Utils.preventDefault):Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+

a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},graphicSize:function(a,b,c){var e=a.style;e.width=b+"px";e.height=c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},stringReadable:function(a){return a.replace(RegExp("%20",

"g")," ")},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),e=a;do e+=e;while(0<--c);return e.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=

a.replace(/\t/g,"")},setHTMLTextDefaultCaptionStyle:function(a,b,c,e,f,h,k,r,p,u,E,s,C){a=a.style;-1==b.indexOf("color=")&&(a.color=c);-1==b.indexOf("font-family=")&&(a.fontFamily=e);-1==b.indexOf("font-size=")&&(a.fontSize=f);-1==b.indexOf("font-size-adjust=")&&(a.fontSizeAdjust=h);-1==b.indexOf("font-style=")&&(a.fontStyle=k);-1==b.indexOf("font-stretch=")&&(a.fontStretch=r);-1==b.indexOf("font-variant=")&&(a.fontVariant=p);-1==b.indexOf("font-weight=")&&(a.fontWeight=u);-1==b.indexOf("line-height=")&&

(a.lineHeight=E);-1==b.indexOf("text-align=")&&(a.textAlign=s);-1==b.indexOf("text-decoration=")&&(a.textDecoration=C)},setHTMLTextStyle:function(a,b,c,e,f,h,k,r,p,u,E,s){a=a.style;a.color=b;a.fontFamily=c;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=h;a.fontStretch=k;a.fontVariant=r;a.fontWeight=p;a.lineHeight=u;a.textAlign=E;a.textDecoration=s},setTextAreaStyle:function(a,b,c,e,f,h,k,r,p,u,E,s,C){a=a.firstChild.style;a.color=b;a.fontFamily=c;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=h;a.fontStretch=

k;a.fontVariant=r;a.fontWeight=p;a.lineHeight=u;a.textAlign=E;a.textDecoration=s;a.padding=C},setTextNodeStyle:function(a,b,c,e,f,h,k,r,p,u,E,s){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=e;a.fontSizeAdjust=f;a.fontStyle=h;a.fontStretch=k;a.fontVariant=r;a.fontWeight=p;a.lineHeight=u;a.textAlign=E;a.textDecoration=s},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+

this.getResource("z244")+c.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(e){this.showMessage(e.name+this.getResource("z244")+e.message)}else this.showMessage(this.getResource("z294"));return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(c){this.showMessage(c.name+this.getResource("z243")+c.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(e){this.showMessage(e.name+this.getResource("z243")+

e.message)}else this.showMessage(this.getResource("z294"));return b},jsonConvertObjectToXMLText:function(a){var b=function(a,c){var e="";if(a instanceof Array)for(var r=0,p=a.length;r<p;r++)e+=b(a[r],c)+"\n";else if("object"===typeof a){r=!1;e+="<"+c;for(p in a)"object"!==typeof a[p]?e+=" "+p+'="'+a[p].toString()+'"':r=!0;e+=">";if(r)for(p in a)"#text"==p?e+=a[p]:"object"===typeof a[p]&&(e+=b(a[p],p));e+="</"+c+">"}else e+="<"+c+">"+a.toString()+"</"+c+">";return e},c="",e;for(e in a)c+=b(a[e],e);

return c.replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(a){var b={convertToObject:function(a){var e={};if(1==a.nodeType){if(a.attributes.length)for(var f=0,h=a.attributes.length;f<h;f++)e[a.attributes[f].nodeName]=(a.attributes[f].nodeValue||"").toString();if(a.firstChild){for(var f=0,h=!1,k=a.firstChild;k;k=k.nextSibling)1==k.nodeType?h=!0:3==k.nodeType&&k.nodeValue.match(/[^ \f\n\r\t\v]/)&&f++;if(h)if(2>f)for(b.reduceWhitespace(a),k=a.firstChild;k;k=k.nextSibling)3==k.nodeType?e["#text"]=

b.escapeMinimal(k.nodeValue):e[k.nodeName]?e[k.nodeName]instanceof Array?e[k.nodeName][e[k.nodeName].length]=b.convertToObject(k):e[k.nodeName]=[e[k.nodeName],b.convertToObject(k)]:e[k.nodeName]=b.convertToObject(k);else a.attributes.length?e["#text"]=b.escapeMinimal(b.innerXML(a)):e=b.escapeMinimal(b.innerXML(a));else f&&(a.attributes.length?e["#text"]=b.escapeMinimal(b.innerXML(a)):e=b.escapeMinimal(b.innerXML(a)))}a.attributes.length||a.firstChild||(e=null)}else 9==a.nodeType?e=b.convertToObject(a.documentElement):

alert("This node type not supported : "+a.nodeType);return e},convertToJSONText:function(a,e){var f=e?'"'+e+'"':"";if(a instanceof Array){for(var h=0,k=a.length;h<k;h++)a[h]=b.convertToJSONText(a[h],"","\t");f+=(e?":[":"[")+(1<a.length?"\n\t"+a.join(",\n\t")+"\n":a.join(""))+"]"}else if(null==a)f+=(e&&":")+"null";else if("object"===typeof a){h=[];for(k in a)h[h.length]=b.convertToJSONText(a[k],k,"\t");f+=(e?":{":"{")+(1<h.length?"\n\t"+h.join(",\n\t")+"\n":h.join(""))+"}"}else f="string"==typeof a?

f+((e&&":")+'"'+a.toString()+'"'):f+((e&&":")+a.toString());return f},reduceWhitespace:function(a){a.normalize();for(var e=a.firstChild;e;)if(3==e.nodeType)if(e.nodeValue.match(/[^ \f\n\r\t\v]/))e=e.nextSibling;else{var f=e.nextSibling;a.removeChild(e);e=f}else 1==e.nodeType&&b.reduceWhitespace(e),e=e.nextSibling;return a},escapeMinimal:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=

a.innerHTML;else{var f=function(a){var b="";if(1==a.nodeType){for(var b=b+("<"+a.nodeName),c=0,e=a.attributes.length;c<e;c++)b+=" "+a.attributes[c].nodeName+"='"+(a.attributes[c].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=f(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=a.nextSibling)b+=f(a)}return b}};9==a.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+b.convertToJSONText(b.convertToObject(b.reduceWhitespace(a)),

a.nodeName,"\t").replace(/\t/g,"  ")+"\n}"},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayClone:function(a,b,c){c=[];switch(a){case "pois":a=0;for(var e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value,id:b[a].id,x:b[a].x,y:b[a].y,z:b[a].z};break;case "labels":a=0;for(e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value,poiID:b[a].poiID,id:b[a].id};break;case "hotspots":a=0;for(e=b.length;a<e;a++)c[c.length]={id:b[a].id,internalID:b[a].internalID,poiID:b[a].poiID,

name:b[a].name,mediaType:b[a].mediaType,media:b[a].media,audio:b[a].audio,image:b[a].image,iW:b[a].iW,iH:b[a].iH,x:b[a].x,y:b[a].y,z:b[a].z,xScale:b[a].xScale,yScale:b[a].yScale,clickURL:b[a].clickURL,urlTarget:b[a].urlTarget,rollover:b[a].rollover,caption:b[a].caption,tooltip:b[a].tooltip,user:b[a].user,date:b[a].date,textColor:b[a].textColor,backColor:b[a].backColor,lineColor:b[a].lineColor,fillColor:b[a].fillColor,textVisible:b[a].textVisible,backVisible:b[a].backVisible,lineVisible:b[a].lineVisible,

fillVisible:b[a].fillVisible,captionPosition:b[a].captionPosition,saved:b[a].saved,visibility:b[a].visibility,captionHTML:b[a].captionHTML,tooltipHTML:b[a].tooltipHTML,polyClosed:b[a].polyClosed,polygonPts:b[a].polygonPts,showFor:b[a].showFor,transition:b[a].transition,changeFor:b[a].changeFor,rotation:b[a].rotation};break;case "polygon":a=0;for(e=b.length;a<e;a++)c[c.length]={x:b[a].x,y:b[a].y};break;case "notes":a=0;for(e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value,noteText:b[a].noteText,

poiID:b[a].poiID,id:b[a].id};break;case "magnifications":for(a=0,e=b.length;a<e;a++)c[c.length]={text:b[a].text,value:b[a].value}}return c},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var e=a.length;c<e;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,e){if("undefined"!==typeof a){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var f=a.length;e<f;e++)if(a[e][b]===c)return e}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,e,f,h){if("undefined"!==typeof a){e?

0>e&&(e=Math.max(0,a.length+e)):e=0;for(var k=a.length;e<k;e++)if(a[e][b]===c&&a[e][f].toString()===h.toString())return e}return-1},arrayIndexOfSubstring:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var e=a.length;c<e;c++)if(-1!=a[c].indexOf(b))return c;return-1},arrayIndexOfObjectValueSubstring:function(a,b,c,e,f){e?0>e&&(e=Math.max(0,a.length+e)):e=0;for(var h=a.length;e<h;e++)if(f){if(-1!=a[e][b].toLowerCase().indexOf(c))return e}else if(-1!=a[e][b].indexOf(c))return e;return-1},arrayIntersect:function(a,

b){for(var c,e,f,h=[],k=0,r=a.length;k<r;k++){c=a[k];f=!1;for(var p=0,u=b.length;p<u&&c>=(e=b[p]);p++)if(e==c){f=!0;break}f&&(h[h.length]=a[k])}return h},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var e=3,f=arguments.length;e<f;e++)a.splice(b,c,arguments[e]);else a.splice(b,c);else{0>c&&(c=0);var h=[];if(3<arguments.length)for(e=3,f=arguments.length;e<f;e++)h[h.length]=arguments[e];for(var e=Z.Utils.arraySubarray(a,0,b),k=Z.Utils.arraySubarrayLen(a,b,c),f=Z.Utils.arraySubarray(a,

b+c),h=e.concat(h,f),e=a.length=0,f=h.length;e<f;e++)a[a.length]=h[e];a=k}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},arraySortNumericDescending:function(a,b,c){a.sort(function(a,b){return b-a});return a},arraySubarray:function(a,b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var e=[];b<c;b++)e[e.length]=a[b];return e},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&

0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var e=[],f=b;f<b+c;f++)e[e.length]=a[f];return e},arraySubtract:function(a,b){for(var c=0,e=a.length;c<e;c++){for(var f=a[c],h=!1,k=0,r=b.length;k<r&&f>=(elmt2=b[k]);k++)if(elmt2==f){h=!0;break}h&&(a=Z.Utils.arraySplice(a,c--,1))}return a},arrayToArrayOfStrings:function(a){for(var b=[],c=0,e=a.length;c<e;c++)b[c]="undefined"!==typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=

1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},playAudio:function(a,b){Z.audioMuted||("undefined"!==typeof a&&null!==a?a.play():Z.Utils.isStrVal(b)&&(new Audio(b)).play())},loadAudio:function(a){Z.Utils.isStrVal(a)&&(new Audio(a)).load()},calculatePointsDistance:function(a,b,c,e){return Math.sqrt((a-=c)*a+(b-=e)*b)},convertPixelsToUnits:function(a,b,c){var e=1;"undefined"!==typeof b&&null!==b&&0!=b?e=b:"undefined"!==typeof c&&null!==c&&0!=c&&(e=Z.imageW/c);return a/e},polygonArea:function(a,

b,c,e){if("undefined"===typeof e||null===e)e=5;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});for(var f=c=b=0,h=a.length-1;f<h;f++)b+=a[f].x*a[f+1].y,c+=a[f].y*a[f+1].x;a=Z.Utils.convertPixelsToUnits((b-c)/2,Z.pixelsPerUnit,Z.unitsPerImage);return a=Z.Utils.roundToDigitLimit(Math.abs(a),e)},polygonCenter:function(a,b,c){var e=0,f=0;if("undefined"!==typeof a&&null!==a&&0<a.length){e=a.slice(0);b?e[e.length]={x:e[0].x,y:e[0].y}:"undefined"!==

typeof c&&null!==c&&(e[e.length]={x:c.x,y:c.y});a=e[0].x;b=e[0].y;f=e[0].x;c=e[0].y;for(var h=1,k=e.length;h<k;h++)a=Math.min(a,e[h].x),b=Math.min(b,e[h].y),f=Math.max(f,e[h].x),c=Math.max(c,e[h].y);e=a+(f-a)/2;f=b+(c-b)/2}return new Z.Utils.Point(e,f)},polygonDimensions:function(a,b){var c=0,e=0;if("undefined"!==typeof a&&null!==a&&0<a.length){c=a.slice(0);"undefined"!==typeof b&&null!==b&&(c[c.length]={x:b.x+.1*(c[c.length-1].x-b.x),y:b.y+.1*(c[c.length-1].y-b.y)});for(var f=c[0].x,e=c[0].y,h=c[0].x,

k=c[0].y,r=1,p=c.length;r<p;r++)c[r].x<f&&(f=c[r].x),c[r].x>h&&(h=c[r].x),c[r].y<e&&(e=c[r].y),c[r].y>k&&(k=c[r].y);c=h-f;e=k-e}return new Z.Utils.Point(c,e)},polygonPerimeter:function(a,b,c,e){if("undefined"===typeof e||null===e)e=5;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});c=b=0;for(var f=a.length-1;c<f;c++)b+=Z.Utils.calculatePointsDistance(a[c].x,a[c].y,a[c+1].x,a[c+1].y);b=Z.Utils.convertPixelsToUnits(b,Z.pixelsPerUnit,Z.unitsPerImage);

return b=Z.Utils.roundToDigitLimit(Math.abs(b),e)},fullScreenView:function(a,b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,

"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):

document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var e=Math.PI/180*-c;c=a*Math.cos(e)-b*Math.sin(e);a=a*Math.sin(e)+b*Math.cos(e);return new Z.Utils.Point(c,a)},rotateElement:function(a,b,c){if(b!=

Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var c=parseFloat(a.width)/2,e=parseFloat(a.height)/2,f=Z.Utils.rotatePoint,h=new Z.Utils.Point(0,0);0!=b&&(90==b?h=f(-c,e,-b):180==b?h=f(c,e,-b):270==b&&(h=f(c,-e,-b)),h.x+=c,h.y+=e);return new Z.Utils.Point(h.x,h.y)},translateElement:function(a,b,c){b="translate("+b.toString()+

"px,"+c.toString()+"px)";a.transform=b;a.msTransform=b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},filterImage:function(a,b,c){var e=a.data;switch(b){case "brightness":if("undefined"===typeof c||null===c)c=40;b=0;for(var f=e.length;b<f;b+=4)e[b]+=c,e[b+1]+=c,e[b+2]+=c;break;case "contrast":if("undefined"===typeof c||null===c)c=10;b=0;for(f=e.length;b<f;b+=4){var h=Math.round((e[b]+e[b+1]+e[b+2])/3);127<h?(e[b]+=e[b]/h*c,e[b+1]+=e[b+1]/h*c,e[b+2]+=e[b+2]/h*c):(e[b]-=e[b]/h*c,e[b+1]-=e[b+1]/

h*c,e[b+2]-=e[b+2]/h*c)}break;case "sharpness":a=Z.Utils.convolveImage(a,[0,-1,0,-1,5,-1,0,-1,0]);break;case "blurriness":if("undefined"===typeof c||null===c)c=3;c=Math.abs(c);if(1<c){b=c/2;f=Math.ceil(c)+(1-Math.ceil(c)%2);c=new Z.Utils.createFloat32Array(f);b=(b+.5)/3;b*=b;var e=-1/(2*b),k=1/Math.sqrt(2*Math.PI*b),r=Math.floor(f/2);for(b=h=0;b<f;b++){var p=b-r,p=k*Math.exp(p*p*e);c[b]=p;h+=p}b=0;for(f=c.length;b<f;b++)c[b]/=h;a=Z.Utils.convolveImageSeparable(a,c,c,!1)}break;case "edges":b=new Z.Utils.createFloat32Array([-1,

-1,-1,-1,8,-1,-1,-1,-1]);a=Z.Utils.convolveImage(a,b,!0);break;case "inversion":b=0;for(f=e.length;b<f;b+=4)e[b]=255-e[b],e[b+1]=255-e[b+1],e[b+2]=255-e[b+2],e[b+3]=255;break;case "grayscale":b=0;for(f=e.length;b<f;b+=4)h=e[b],k=e[b+1],r=e[b+2],e[b]=e[b+1]=e[b+2]=.2126*h+.7152*k+.0722*r;break;case "threshold":if("undefined"===typeof c||null===c)c=128;b=0;for(f=e.length;b<f;b+=4)h=e[b],k=e[b+1],r=e[b+2],e[b]=e[b+1]=e[b+2]=.2126*h+.7152*k+.0722*r>=c?255:0}return a},getImageData:function(a){var b=this.getCanvas(a.width,

a.height),c=b.getContext("2d");c.drawImage(a,0,0);return c.getImageData(0,0,b.width,b.height)},getCanvas:function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c},createImageData:function(a,b){return document.createElement("canvas").getContext("2d").createImageData(a,b)},createImageDataFloat32:function(a,b){return{width:a,height:b,data:new Z.Utils.createFloat32Array(a*b*4)}},createFloat32Array:function(a){return Z.float32ArraySupported?new Float32Array(a):Array(a)},convolveImage:function(a,

b,c){var e=Math.round(Math.sqrt(b.length)),f=Math.floor(e/2),h=a.data,k=a.width;a=a.height;c=c?1:0;for(var r=Z.Utils.createImageData(k,a),p=r.data,u=0;u<a;u++)for(var E=0;E<k;E++){for(var s=u,C=E,J=4*(u*k+E),W=0,U=0,Q=0,F=0,R=0;R<e;R++)for(var S=0;S<e;S++){var q=s+R-f,H=C+S-f;0<=q&&q<a&&0<=H&&H<k&&(q=4*(q*k+H),H=b[R*e+S],W+=h[q]*H,U+=h[q+1]*H,Q+=h[q+2]*H,F+=h[q+3]*H)}p[J]=W;p[J+1]=U;p[J+2]=Q;p[J+3]=F+c*(255-F)}return r},convolveImageHorizontal:function(a,b,c){var e=b.length,f=Math.floor(e/2),h=a.data,

k=a.width;a=a.height;c=c?1:0;for(var r=Z.Utils.createImageData(k,a),p=r.data,u=0;u<a;u++)for(var E=0;E<k;E++){for(var s=u,C=E,J=4*(u*k+E),W=0,U=0,Q=0,F=0,R=0;R<e;R++)var S=s,q=Math.min(k-1,Math.max(0,C+R-f)),S=4*(S*k+q),q=b[R],W=W+h[S]*q,U=U+h[S+1]*q,Q=Q+h[S+2]*q,F=F+h[S+3]*q;p[J]=W;p[J+1]=U;p[J+2]=Q;p[J+3]=F+c*(255-F)}return r},convolveImageVertical:function(a,b,c){var e=b.length,f=Math.floor(e/2),h=a.data,k=a.width;a=a.height;c=c?1:0;for(var r=Z.Utils.createImageData(k,a),p=r.data,u=0;u<a;u++)for(var E=

0;E<k;E++){for(var s=u,C=E,J=4*(u*k+E),W=0,U=0,Q=0,F=0,R=0;R<e;R++)var S=4*(Math.min(a-1,Math.max(0,s+R-f))*k+C),q=b[R],W=W+h[S]*q,U=U+h[S+1]*q,Q=Q+h[S+2]*q,F=F+h[S+3]*q;p[J]=W;p[J+1]=U;p[J+2]=Q;p[J+3]=F+c*(255-F)}return r},convolveImageSeparable:function(a,b,c,e){return Z.Utils.convolveImageHorizontal(Z.Utils.convolveImageFloat32Vertical(a,c,e),b,e)},convolveImageFloat32:function(a,b,c){var e=Math.round(Math.sqrt(b.length)),f=Math.floor(e/2),h=a.data,k=a.width;a=a.height;c=c?1:0;for(var r={width:k,

height:a,data:new Z.Utils.Float32ArrayZ(k*a*4)},p=r.data,u=0;u<a;u++)for(var E=0;E<k;E++){for(var s=u,C=E,J=4*(u*k+E),W=0,U=0,Q=0,F=0,R=0;R<e;R++)for(var S=0;S<e;S++)var q=Math.min(a-1,Math.max(0,s+R-f)),H=Math.min(k-1,Math.max(0,C+S-f)),q=4*(q*k+H),H=b[R*e+S],W=W+h[q]*H,U=U+h[q+1]*H,Q=Q+h[q+2]*H,F=F+h[q+3]*H;p[J]=W;p[J+1]=U;p[J+2]=Q;p[J+3]=F+c*(255-F)}return r},convolveImageFloat32Horizontal:function(a,b,c){var e=b.length,f=Math.floor(e/2),h=a.data,k=a.width;a=a.height;c=c?1:0;for(var r=Z.Utils.createImageDataFloat32(k,

a),p=r.data,u=0;u<a;u++)for(var E=0;E<k;E++){for(var s=u,C=E,J=4*(u*k+E),W=0,U=0,Q=0,F=0,R=0;R<e;R++)var S=s,q=Math.min(k-1,Math.max(0,C+R-f)),S=4*(S*k+q),q=b[R],W=W+h[S]*q,U=U+h[S+1]*q,Q=Q+h[S+2]*q,F=F+h[S+3]*q;p[J]=W;p[J+1]=U;p[J+2]=Q;p[J+3]=F+c*(255-F)}return r},convolveImageFloat32Vertical:function(a,b,c){var e=b.length,f=Math.floor(e/2),h=a.data,k=a.width;a=a.height;c=c?1:0;for(var r=Z.Utils.createImageDataFloat32(k,a),p=r.data,u=0;u<a;u++)for(var E=0;E<k;E++){for(var s=u,C=E,J=4*(u*k+E),W=0,

U=0,Q=0,F=0,R=0;R<e;R++)var S=4*(Math.min(a-1,Math.max(0,s+R-f))*k+C),q=b[R],W=W+h[S]*q,U=U+h[S+1]*q,Q=Q+h[S+2]*q,F=F+h[S+3]*q;p[J]=W;p[J+1]=U;p[J+2]=Q;p[J+3]=F+c*(255-F)}return r},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,

b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var c=0,e=a.length;c<e;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,e,f,h=0,k=0,r="",r=[];if(!a)return a;do b=a[h++],c=a[h++],e=a[h++],

f=b<<16|c<<8|e,b=f>>18&63,c=f>>12&63,e=f>>6&63,f&=63,r[k++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);while(h<a.length);r=r.join("");a=a.length%3;return(a?r.slice(0,a-3):r)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=

Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});

return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){e.onload=null;e.onabort=null;e.onerror=null;f&&window.clearTimeout(f);window.setTimeout(function(){b(e)},1)}var e=new Image,f=null,h=parseFloat(this.getResource("z139")),k=function(){c(!1)};e.onload=function(){c(!0)};e.onabort=k;e.onerror=k;f=window.setTimeout(function(){Z.Utils.showMessage(Z.Utils.getResource("z253"));c(!1)},h);e.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":

"")+(a.getUTCMonth()+1),c=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),e=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),f=(10>a.getUTCMinutes()?"0":"")+a.getUTCMinutes(),h=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();return a.getUTCFullYear()+b+c+e+f+h},cacheProofPath:function(a){return a+="?noCacheSfx="+(new Date).getTime().toString()},easing:function(a,b,c,e){b-=a;return 1>(c/=e/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){Z.delayedFunctionCallTimer=window.setTimeout(a,

b)},nodeIsInViewer:function(a){for(var b=!1;!1==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;else break;return b},roundToDigitLimit:function(a,b){var c=Math.round(a).toString().length>b-1?1:10;return a=Math.round(a*c)/c},sign:function(a){return a?0>a?-1:1:0},drawCrosshairs:function(a,b,c){var e=Z.Utils.createContainerElement("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",c+"px",b/2+"px","0px","solid","1px","transparent none","0px","0px","normal",

null,!0);b=Z.Utils.createContainerElement("div","viewportCenterLineHorizontal","inline-block","absolute","visible",b+"px","1px","0px",c/2+"px","solid","1px","transparent none","0px","0px","normal",null,!0);a.appendChild(b);a.appendChild(e)},configureHelpDisplay:function(){var a=parseInt(this.getResource("z422"),10),b=parseInt(this.getResource("z421"),10),c=Z.viewerW-a-80,e=Z.viewerH-b-80,f=this.getResource("z127"),h=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay",

"inline-block","absolute","hidden",a+"px",b+"px",c+"px",e+"px","solid","1px",f,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);c=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,a-50+"px",b-74+"px","4px","4px","solid","1px","white","0px","20px",null);c.style.overflowY="auto";Z.HelpDisplay.appendChild(c);Z.help=document.getElementById("helpTextBox");c=parseInt(Z.Utils.getResource("z230"),10);Z.HelpDisplay.style.zIndex=(c+9).toString();b=b-18-

5;a-=66;c=this.getResource("z423");h=new Z.Utils.Button("buttonHelpOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",h,"0px","0px");Z.HelpDisplay.appendChild(h.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();if(Z.help){Z.help.innerHTML=unescape(a);Z.HelpDisplay.style.display="inline-block";a=document.getElementById("buttonHelpOk");var b=parseInt(this.getResource("z421"),

10);a.style.display="inline-block";Z.HelpDisplay.style.height=b+"px"}},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.viewerH-b-40,e=this.getResource("z159"),f=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",e,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);

c=parseInt(Z.Utils.getResource("z230"),10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");f=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid",

"1px",f,"0px","0px");Z.MessageDisplay.appendChild(f.elmt)},messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,e,f){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var h=!0;f&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,

a)?h=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);if(h&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof e&&null!==e&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=e),e=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(e.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(e.style.display="none",Z.MessageDisplay.style.height=

a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),

Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},configureCoordinatesDisplay:function(){var a=parseInt(this.getResource("z417"),10),b=parseInt(this.getResource("z415"),10),c=Z.viewerW-a-20,e=Z.viewerH-b-30,f=this.getResource("z99");Z.CoordinatesDisplay=this.createContainerElement("div","CoordinatesDisplay","inline-block","absolute","hidden",a+"px",b+"px",c+"px",e+"px","solid","1px",f,"0px","0px","normal");Z.ViewerDisplay.appendChild(Z.CoordinatesDisplay);c=parseInt(Z.Utils.getResource("z230"),

10);Z.CoordinatesDisplay.style.zIndex=(c+8).toString();c=Z.Utils.getResource("z416");c=Z.Utils.createTextElement("coordsLabelBox",c,a-18+"px","28px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-coordsLabelBox"))c.firstChild.style.textAlign="center";c=Z.Utils.createTextElement("coordsDisplayBox","",a-18+"px","18px","4px","46px","4px","solid","1px",!0,"verdana","12px","none",null,1,

"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);Z.coordinates=document.getElementById("coordsDisplayBox");if(c=document.getElementById("textBoxFor-coordsDisplayBox"))c.firstChild.style.textAlign="center";a=Z.Utils.createTextElement("coordsSaveBox","",a-18+"px",b-92+"px","4px","78px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(a);Z.coordinatesSave=document.getElementById("coordsSaveBox");if(a=document.getElementById("textBoxFor-coordsSaveBox"))a.firstChild.style.textAlign=

"center"},showCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinates&&(Z.coordinates.value=a)},saveCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinatesSave&&(Z.coordinatesSave.value+=a+"\n")},configureTraceDisplay:function(){var a=Z.viewerW/3+12,b=Z.viewerH/3+45,c=Z.viewerH/3,e=this.getResource("z229");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute","hidden",a+"px",b+"px",

"10px",c+"px","solid","1px",e,"0px","10px","normal");Z.ViewerDisplay.appendChild(Z.TraceDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.TraceDisplay.style.zIndex=(c+12).toString();a=Z.Utils.createTextElement("debugTraces","Trace Values\n",a-15+"px",b-60+"px","10px","10px","5px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.TraceDisplay.appendChild(a);Z.traces=document.getElementById("debugTraces");var a=58,c=10,b=b-21-10,e=this.getResource("z228"),f=this.getResource("z446"),

f=new this.Button("buttonShowGlobals",f,null,null,null,null,a+"px","42px",c+"px",b+"px","mousedown",this.showGlobals,"z382","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);c+=a+10;f=this.getResource("z449");f=new this.Button("buttonToggleDisplay",f,null,null,null,null,a+"px","42px",c+"px",b+"px","mousedown",Z.Viewport.toggleDisplay,"z390","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);c+=a+10;f=this.getResource("z447");f=new this.Button("buttonToggleBackfill",f,null,

null,null,null,a+"px","42px",c+"px",b+"px","mousedown",Z.Viewport.toggleBackfill,"z388","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(f.elmt);c+=a+10;a+=12;f=this.getResource("z448");a=new this.Button("buttonToggleConstrainPan",f,null,null,null,null,a+"px","42px",c+"px",b+"px","mousedown",Z.Viewport.toggleConstrainPan,"z389","solid","1px",e,"0px","0px");Z.TraceDisplay.appendChild(a.elmt)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.configureTraceDisplay()},

hideTraces:function(){Z.TraceDisplay.style.display="none"},trace:function(a){Z.TraceDisplay||Z.Utils.configureTraceDisplay();Z.traces&&(Z.traces.value+="\n"+a+"\n")},showGlobals:function(){var a;a="\n                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n";a+="\n";a+="VIEW:    ";a+="Z.imageX="+Z.imageX+",   ";a+="Z.imageY="+Z.imageY+",   ";a+="Z.imageZ="+Z.imageZ+",   ";a+="Z.imageR="+Z.imageR+",   ";a+="Z.priorX="+Z.priorX+",   ";a+="Z.priorY="+Z.priorY+",   ";a+="Z.priorZ="+Z.priorZ+

",   ";a+="Z.priorR="+Z.priorR+",   ";a+="\n";a+="IMAGE & SKIN:    ";a+="Z.imagePath="+Z.imagePath+",   ";a+="Z.skinPath="+Z.skinPath+",   ";a+="Z.skinMode="+Z.skinMode+",   ";a+="Z.imageW="+Z.imageW+",   ";a+="Z.imageH="+Z.imageH+",   ";a+="tierCount="+Z.Viewport.getTierCount()+",   ";a+="z320="+Z.Viewport.getTileW()+",   ";a+="z319="+Z.Viewport.getTileH()+"\n";a+="\n";a+="PAGE & BROWSER:    ";a+="Z.pageContainer="+Z.pageContainer+",   ";a+="Z.browser="+Z.browser+",   ";a+="Z.browserVersion="+Z.browserVersion+

",   ";a+="Z.canvasSupported="+Z.canvasSupported+",   ";a+="Z.cssTransformsSupported="+Z.cssTransformsSupported+",   ";a+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ";a+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ";a+="Z.alphaSupported="+Z.alphaSupported+",   ";a+="Z.renderQuality="+Z.renderQuality+",   ";a+="Z.rotationSupported="+Z.rotationSupported+",   ";a+="Z.fullScreenSupported="+Z.fullScreenSupported+",   ";a+="Z.float32ArraySupported="+Z.float32ArraySupported+",   ";a+=

"Z.uInt8ArraySupported="+Z.uInt8ArraySupported+",   ";a+="Z.xmlHttpRequestSupport="+Z.xmlHttpRequestSupport+",   ";a+="Z.definePropertySupported="+Z.definePropertySupported+",   ";a+="Z.responseArraySupported="+Z.responseArraySupported+",   ";a+="Z.responseArrayPrototyped="+Z.responseArrayPrototyped+",   ";a+="Z.mobileDevice="+Z.mobileDevice+",   ";a+="Z.zifSupported="+Z.zifSupported+",   ";a+="Z.localUse="+Z.localUse+"\n";a+="\n";a+="VIEWER OPTIONS & DEFAULTS:    ";a+="Z.initialX="+Z.initialX+",   ";

a+="Z.initialY="+Z.initialY+",   ";a+="Z.initialZ="+Z.initialZ+",   ";a+="Z.minZ="+Z.minZ+",   ";a+="Z.maxZ="+Z.maxZ+",   ";a+="Z.fitZ="+Z.fitZ+",   ";a+="Z.zoomSpeed="+Z.zoomSpeed+",   ";a+="Z.panSpeed="+Z.panSpeed+",   ";a+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ";a+="Z.toolbarVisible="+Z.toolbarVisible+",   ";a+="Z.toolbarW="+Z.toolbarW+",   ";a+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ";a+="Z.toolbarH="+Z.toolbarH+",   ";a+="Z.toolbarPosition="+Z.toolbarPosition+",   ";a+="Z.tooltipsVisible="+

Z.tooltipsVisible+",   ";a+="Z.helpVisible="+Z.helpVisible+",   ";a+="Z.navigatorVisible="+Z.navigatorVisible+",   ";a+="Z.navigatorW="+Z.navigatorW+",   ";a+="Z.navigatorH="+Z.navigatorH+",   ";a+="Z.navigatorL="+Z.navigatorL+",   ";a+="Z.navigatorT="+Z.navigatorT+",   ";a+="Z.navigatorFit="+Z.navigatorFit+",   ";a+="Z.clickZoom="+Z.clickZoom+",   ";a+="Z.clickPan="+Z.clickPan+",   ";a+="Z.mousePan="+Z.mousePan+",   ";a+="Z.keys="+Z.keys+",   ";a+="Z.z476="+Z.z476+",   ";a+="Watermark alpha = "+

Z.Utils.getResource("z234")+",   ";a+="Z.watermarkPath="+Z.watermarkPath+",   ";a+="Z.copyrightPath="+Z.copyrightPath+",   ";a+="Z.hotspotPath="+Z.hotspotPath+",   ";a+="Z.tourPath="+Z.tourPath+",   ";a+="Z.slidePath="+Z.slidePath+",   ";a+="Z.slideTransitionSpeed="+Z.slideTransitionSpeed+",   ";a+="Z.audioContent="+Z.audioContent+",   ";a+="Z.audioMuted="+Z.audioMuted+",   ";a+="Z.annotationPath="+Z.annotationPath+",   ";a+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ";a+="Z.minimizeVisible="+Z.minimizeVisible+

",   ";a+="Z.sliderVisible="+Z.sliderVisible+",   ";a+="Z.panButtonsVisible="+Z.panButtonsVisible+",   ";a+="Z.fullScreenVisible="+Z.fullScreenVisible+",   ";a+="Z.fullPageVisible="+Z.fullPageVisible+",   ";a+="Z.initialFullPage="+Z.initialFullPage+",   ";a+="Z.measureVisible="+Z.measureVisible+",   ";a+="Z.rotationVisible="+Z.rotationVisible+",   ";a+="Z.initialRotation="+Z.initialRotation+",   ";a+="Z.virtualPointerVisible="+Z.virtualPointerVisible+",   ";a+="Z.crosshairsVisible="+Z.crosshairsVisible+

",   ";a+="Z.rulerVisible="+Z.rulerVisible+",   ";a+="Z.units="+Z.units+",   ";a+="Z.unitsPerImage="+Z.unitsPerImage+",   ";a+="Z.pixelsPerUnit="+Z.pixelsPerUnit+",   ";a+="Z.sourceMagnification="+Z.sourceMagnification+",   ";a+="Z.rulerListType="+Z.rulerListType+",   ";a+="Z.rulerW="+Z.rulerW+",   ";a+="Z.rulerH="+Z.rulerH+",   ";a+="Z.rulerL="+Z.rulerL+",   ";a+="Z.rulerT="+Z.rulerT+",   ";a+="Z.coordinatesVisible="+Z.coordinatesVisible+",   ";a+="Z.imageFiltersVisible="+Z.imageFiltersVisible+",   ";

a+="Z.progressVisible="+Z.progressVisible+",   ";a+="Z.logoVisible="+Z.logoVisible+",   ";a+="Z.logoLinkURL="+Z.logoLinkURL+",   ";a+="Z.logoCustomPath="+Z.logoCustomPath+",   ";a+="Z.canvas="+Z.canvas+",   ";a+="Z.debug="+Z.debug+",   ";a+="Z.imageProperties="+Z.imageProperties+",   ";a+="Z.serverIP="+Z.serverIP+",   ";a+="Z.serverPort="+Z.serverPort+",   ";a+="Z.tileHandlerPath="+Z.tileHandlerPath+",   ";a+="Z.tileHandlerPathFull="+Z.tileHandlerPathFull+",   ";a+="Z.tileSource="+Z.tileSource+",   ";

a+="Z.tileType="+Z.tileType+",   ";a+="Z.freehandVisible="+Z.freehandVisible+",   ";a+="Z.textVisible="+Z.textVisible+",   ";a+="Z.iconVisible="+Z.iconVisible+",   ";a+="Z.rectangleVisible="+Z.rectangleVisible+",   ";a+="Z.polygonVisible="+Z.polygonVisible+",   ";a+="\n";a+="INTERNAL VALUES:    ";a+="\n";a+="displayW="+Z.Viewport.getW()+",   ";a+="displayH="+Z.Viewport.getH()+",   ";a+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ";a+="tierBackfill="+Z.Viewport.getTierBackfill()+",   ";a+="tierBackfillDynamic="+

Z.Viewport.getTierBackfillDynamic()+",   ";a+="tierScale="+Z.Viewport.getTierScale()+",   ";a+="z315="+Z.Viewport.getTiersScaleUpMax()+",   ";a+="z314="+Z.Viewport.getTiersScaleDownMax()+",   ";a+="z316="+Z.Viewport.getTilesCacheMax()+",   ";a+="Z.useCanvas="+Z.useCanvas+"\n";a+="Z.specialStorageEnabled="+Z.specialStorageEnabled+"\n";a+="Z.editMode="+Z.editMode+"\n";a+="Z.labelMode="+Z.labelMode+"\n";a+="Z.editing="+Z.editing+"\n";a+="\n";a+="INTERNAL LISTS:    ";a+="tierWs="+Z.Viewport.getTierWs()+

",   ";a+="tierHs="+Z.Viewport.getTierHs()+",   ";a+="tierTileCounts="+Z.Viewport.getTierTileCounts()+",   ";a+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n";a+="\n";alert(a)}};